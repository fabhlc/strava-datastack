{
  "version": 3,
  "sources": ["../../tua-body-scroll-lock/dist/tua-bsl.mjs"],
  "sourcesContent": ["/**\n * tua-body-scroll-lock v1.5.3\n * (c) 2024 Evinma, BuptStEve\n * @license MIT\n */\n\nvar isServer = function isServer() {\n  return typeof window === 'undefined';\n};\nvar detectOS = function detectOS(ua) {\n  ua = ua || navigator.userAgent;\n  var ipad = /(iPad).*OS\\s([\\d_]+)/.test(ua);\n  var iphone = !ipad && /(iPhone\\sOS)\\s([\\d_]+)/.test(ua);\n  var android = /(Android);?[\\s/]+([\\d.]+)?/.test(ua);\n  var ios = iphone || ipad;\n  return {\n    ios: ios,\n    android: android\n  };\n};\nfunction getEventListenerOptions(options) {\n  /* istanbul ignore if */\n  if (isServer()) return false;\n  if (!options) {\n    throw new Error('options must be provided');\n  }\n  var isSupportOptions = false;\n  var listenerOptions = {\n    get passive() {\n      isSupportOptions = true;\n      return undefined;\n    }\n  };\n  /* istanbul ignore next */\n  // eslint-disable-next-line @typescript-eslint/no-empty-function\n  var noop = function noop() {};\n  var testEvent = '__TUA_BSL_TEST_PASSIVE__';\n  window.addEventListener(testEvent, noop, listenerOptions);\n  window.removeEventListener(testEvent, noop, listenerOptions);\n  var capture = options.capture;\n  /* istanbul ignore next */\n  return isSupportOptions ? options : typeof capture !== 'undefined' ? capture : false;\n}\nfunction noticeRequiredTargetElement(targetElement) {\n  if (targetElement) return false;\n  if (targetElement === null) return false;\n  /* istanbul ignore if */\n  if (process.env.NODE_ENV === 'production') return false;\n  /* istanbul ignore if */\n  if (process.env.NODE_ENV !== 'test') {\n    console.warn('If scrolling is also required in the floating layer, ' + 'the target element must be provided.');\n  }\n  return true;\n}\n/**\n * Get global function that calls preventDefault\n */\nfunction getPreventEventDefault() {\n  if ('__BSL_PREVENT_DEFAULT__' in window) {\n    return window.__BSL_PREVENT_DEFAULT__;\n  }\n  window.__BSL_PREVENT_DEFAULT__ = function (event) {\n    if (!event.cancelable) return;\n    event.preventDefault();\n  };\n  return window.__BSL_PREVENT_DEFAULT__;\n}\nfunction toArray(x) {\n  if (!x) return [];\n  return Array.isArray(x) ? x : [x];\n}\n\nvar initialLockState = {\n  lockedNum: 0,\n  lockedElements: [],\n  unLockCallback: null,\n  documentListenerAdded: false,\n  initialClientPos: {\n    clientX: 0,\n    clientY: 0\n  }\n};\n/**\n * get current lockState\n * @param options\n * @returns lockState\n */\nfunction getLockState(options) {\n  if (isServer()) return initialLockState;\n  /** use local lockState */\n  if (!(options === null || options === void 0 ? void 0 : options.useGlobalLockState)) return getLockState.lockState;\n  /** use global lockState */\n  var lockState = '__BSL_LOCK_STATE__' in window ? Object.assign(Object.assign({}, initialLockState), window.__BSL_LOCK_STATE__) : initialLockState;\n  /** assign to global */\n  window.__BSL_LOCK_STATE__ = lockState;\n  return lockState;\n}\ngetLockState.lockState = initialLockState;\n\nfunction handleScroll(event, targetElement, initialClientPos) {\n  if (targetElement) {\n    var scrollTop = targetElement.scrollTop,\n      scrollLeft = targetElement.scrollLeft,\n      scrollWidth = targetElement.scrollWidth,\n      scrollHeight = targetElement.scrollHeight,\n      clientWidth = targetElement.clientWidth,\n      clientHeight = targetElement.clientHeight;\n    var clientX = event.targetTouches[0].clientX - initialClientPos.clientX;\n    var clientY = event.targetTouches[0].clientY - initialClientPos.clientY;\n    var isVertical = Math.abs(clientY) > Math.abs(clientX);\n    var isOnTop = clientY > 0 && scrollTop === 0;\n    var isOnLeft = clientX > 0 && scrollLeft === 0;\n    var isOnRight = clientX < 0 && scrollLeft + clientWidth + 1 >= scrollWidth;\n    var isOnBottom = clientY < 0 && scrollTop + clientHeight + 1 >= scrollHeight;\n    if (isVertical && (isOnTop || isOnBottom) || !isVertical && (isOnLeft || isOnRight)) {\n      return getPreventEventDefault()(event);\n    }\n  }\n  event.stopPropagation();\n  return true;\n}\n\nfunction setOverflowHiddenPc() {\n  var $html = document.documentElement;\n  var htmlStyle = Object.assign({}, $html.style);\n  var scrollBarWidth = window.innerWidth - $html.clientWidth;\n  var previousPaddingRight = parseInt(window.getComputedStyle($html).paddingRight, 10);\n  $html.style.overflow = 'hidden';\n  $html.style.boxSizing = 'border-box';\n  $html.style.paddingRight = \"\".concat(scrollBarWidth + previousPaddingRight, \"px\");\n  return function () {\n    ['overflow', 'boxSizing', 'paddingRight'].forEach(function (x) {\n      $html.style[x] = htmlStyle[x] || '';\n    });\n  };\n}\nfunction setOverflowHiddenMobile(options) {\n  var $html = document.documentElement;\n  var $body = document.body;\n  var scrollTop = $html.scrollTop || $body.scrollTop;\n  var htmlStyle = Object.assign({}, $html.style);\n  var bodyStyle = Object.assign({}, $body.style);\n  $html.style.height = '100%';\n  $html.style.overflow = 'hidden';\n  $body.style.top = \"-\".concat(scrollTop, \"px\");\n  $body.style.width = '100%';\n  $body.style.height = 'auto';\n  $body.style.position = 'fixed';\n  $body.style.overflow = (options === null || options === void 0 ? void 0 : options.overflowType) || 'hidden';\n  return function () {\n    $html.style.height = htmlStyle.height || '';\n    $html.style.overflow = htmlStyle.overflow || '';\n    ['top', 'width', 'height', 'overflow', 'position'].forEach(function (x) {\n      $body.style[x] = bodyStyle[x] || '';\n    });\n    var supportsNativeSmoothScroll = ('scrollBehavior' in document.documentElement.style);\n    if (supportsNativeSmoothScroll) {\n      window.scrollTo({\n        top: scrollTop,\n        behavior: 'instant'\n      });\n    } else {\n      window.scrollTo(0, scrollTop);\n    }\n  };\n}\n\n/**\n * lock body scroll\n * @param targetElement the element(s) still needs scrolling（iOS only）\n * @param options\n */\nfunction lock(targetElement, options) {\n  if (isServer()) return;\n  noticeRequiredTargetElement(targetElement);\n  var detectRes = detectOS();\n  var lockState = getLockState(options);\n  if (detectRes.ios) {\n    toArray(targetElement).filter(function (e) {\n      return e && lockState.lockedElements.indexOf(e) === -1;\n    }).forEach(function (element) {\n      element.ontouchstart = function (event) {\n        var _event$targetTouches$ = event.targetTouches[0],\n          clientX = _event$targetTouches$.clientX,\n          clientY = _event$targetTouches$.clientY;\n        lockState.initialClientPos = {\n          clientX: clientX,\n          clientY: clientY\n        };\n      };\n      element.ontouchmove = function (event) {\n        handleScroll(event, element, lockState.initialClientPos);\n      };\n      lockState.lockedElements.push(element);\n    });\n    addTouchMoveListener(lockState);\n  } else if (lockState.lockedNum <= 0) {\n    lockState.unLockCallback = detectRes.android ? setOverflowHiddenMobile(options) : setOverflowHiddenPc();\n  }\n  lockState.lockedNum += 1;\n}\n/**\n * unlock body scroll\n * @param targetElement the element(s) still needs scrolling（iOS only）\n * @param options\n */\nfunction unlock(targetElement, options) {\n  if (isServer()) return;\n  noticeRequiredTargetElement(targetElement);\n  var lockState = getLockState(options);\n  lockState.lockedNum -= 1;\n  if (lockState.lockedNum > 0) return;\n  if (unlockByCallback(lockState)) return;\n  toArray(targetElement).forEach(function (element) {\n    var index = lockState.lockedElements.indexOf(element);\n    if (element && index !== -1) {\n      element.ontouchmove = null;\n      element.ontouchstart = null;\n      lockState.lockedElements.splice(index, 1);\n    }\n  });\n  removeTouchMoveListener(lockState);\n}\n/**\n * clear all body locks\n * @param options\n */\nfunction clearBodyLocks(options) {\n  if (isServer()) return;\n  var lockState = getLockState(options);\n  lockState.lockedNum = 0;\n  if (unlockByCallback(lockState)) return;\n  if (lockState.lockedElements.length) {\n    var element = lockState.lockedElements.pop();\n    while (element) {\n      element.ontouchmove = null;\n      element.ontouchstart = null;\n      element = lockState.lockedElements.pop();\n    }\n  }\n  removeTouchMoveListener(lockState);\n}\nfunction unlockByCallback(lockState) {\n  if (detectOS().ios) return false;\n  if (typeof lockState.unLockCallback !== 'function') return false;\n  lockState.unLockCallback();\n  return true;\n}\nfunction addTouchMoveListener(lockState) {\n  if (!detectOS().ios) return;\n  if (lockState.documentListenerAdded) return;\n  document.addEventListener('touchmove', getPreventEventDefault(), getEventListenerOptions({\n    passive: false\n  }));\n  lockState.documentListenerAdded = true;\n}\nfunction removeTouchMoveListener(lockState) {\n  if (!lockState.documentListenerAdded) return;\n  document.removeEventListener('touchmove', getPreventEventDefault(), getEventListenerOptions({\n    passive: false\n  }));\n  lockState.documentListenerAdded = false;\n}\n\nexport { clearBodyLocks, getLockState, lock, unlock };\n"],
  "mappings": "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",
  "names": ["isServer", "detectOS", "noop"]
}
