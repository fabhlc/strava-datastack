import{c as xe,s as H,a as Oa,b as Pe}from"../../chunks/utils.js";import{c as Y,a as Se,b as Q,d as ye,s as Dt,g as Ft,o as yt,h as p,v as M,e as Ja,i as Wt,f as Gl}from"../../chunks/ssr.js";import"dequal";import{o as Nl,w as jl,f as zl,m as Lt,i as Za,s as va,p as Hl,e as ma,b as pa,c as Ht,h as Vl,t as $a,r as Ul,k as Vt,u as Yl,a as ql,n as Ut,v as Wl,x as It,y as Ql,z as pt,A as Al,V as Xt,B as Xl,I as Kl,C as Jl,D as Zl,E as pl,G as $l,H as ei,J as ti,K as ai,L as li,l as Ct,M as ii}from"../../chunks/VennDiagram.svelte_svelte_type_style_lang.js";import{w as Kt,d as nt}from"../../chunks/index2.js";import"clsx";import{r as oi,Q as qe,p as ri,a as el}from"../../chunks/stores.js";import{h as Ze,p as ni}from"../../chunks/profile.js";import{a as tl}from"../../chunks/index5.js";import{p as wl}from"../../chunks/stores2.js";import{b as di,f as je,D as al,c as xa,g as Qt,s as si,a as ze,d as Yt,e as Ie,E as $t,Q as Sl,h as Ol,i as gl,j as ui,k as ci,C as fi}from"../../chunks/DownloadData.js";import{c as Be,f as vi,t as mi}from"../../chunks/utils2.js";import{I as Jt}from"../../chunks/Icon.js";import{M as hi,a as ll,b as yi}from"../../chunks/index7.js";import{t as il,o as Ci,g as xi,c as Tl,r as El,a as Ll,b as _i}from"../../chunks/updater.js";import{d as Ai,u as wi,g as ol,a as Si,r as Oi,h as rl,c as gi,b as Ti,i as nl,B as Ei}from"../../chunks/button.js";import"deep-object-diff";import"chroma-js";import"ssf";import{tidy as rt,summarize as Li,nDistinct as bi,groupBy as _a,mutateWithSummary as dl,sum as Aa,mutate as ha,rate as sl,rename as ul,complete as cl,summarizeAt as ki}from"@tidyjs/tidy";import"@uwdata/mosaic-sql";import"export-to-csv";import"echarts";import"@evidence-dev/universal-sql/client-duckdb";import"yaml";import"@astronautlabs/jsonpath";import"tua-body-scroll-lock";import"lodash/merge.js";import{Q as qt}from"../../chunks/QueryViewer.js";import"prismjs";import"debounce";import"downloadjs";import{C as Di,p as bl,c as kl}from"../../chunks/CodeBlock.js";import"echarts-stat";const Fi={positioning:{placement:"bottom"},arrowSize:8,defaultOpen:!1,disableFocusTrap:!1,closeOnEscape:!0,preventScroll:!1,onOpenChange:void 0,closeOnOutsideClick:!0,portal:void 0,forceVisible:!1,openFocus:void 0,closeFocus:void 0,onOutsideClick:void 0},{name:bt}=Vl("popover"),Mi=["trigger","content"];function Ii(a){const e={...Fi,...a},t=il(Nl(e,"open","ids")),{positioning:o,arrowSize:l,disableFocusTrap:i,preventScroll:d,closeOnEscape:c,closeOnOutsideClick:n,portal:y,forceVisible:C,openFocus:f,closeFocus:A,onOutsideClick:m}=t,_=e.open??Kt(e.defaultOpen),s=Ci(_,e?.onOpenChange),v=jl.writable(null),w=il({...xi(Mi),...e.ids});zl(()=>{v.set(document.getElementById(w.trigger.get()))});function L(){s.set(!1);const r=document.getElementById(w.trigger.get());rl({prop:A.get(),defaultEl:r})}const g=Ai({open:s,activeTrigger:v,forceVisible:C}),E=Lt(bt("content"),{stores:[g,y,w.content],returned:([r,x,S])=>({hidden:r&&Za?void 0:!0,tabindex:-1,style:va({display:r?void 0:"none"}),id:S,"data-state":r?"open":"closed","data-portal":Hl(x)}),action:r=>{let x=Ut;const S=ma([g,v,o,i,c,n,y],([h,O,G,z,V,N,te])=>{x(),!(!h||!O)&&$a().then(()=>{x(),x=wi(r,{anchorElement:O,open:s,options:{floating:G,focusTrap:z?null:{returnFocusOnDeactivate:!1,clickOutsideDeactivates:N,allowOutsideClick:!0,escapeDeactivates:V},modal:{shouldCloseOnInteractOutside:T,onClose:L,open:h,closeOnInteractOutside:N},escapeKeydown:V?{handler:()=>{L()}}:null,portal:ol(r,te)}}).destroy})});return{destroy(){S(),x()}}}});function D(r){s.update(x=>!x),r&&r!==v.get()&&v.set(r)}function T(r){if(m.get()?.(r),r.defaultPrevented)return!1;const x=r.target,S=document.getElementById(w.trigger.get());return!(S&&Ul(x)&&(x===S||S.contains(x)))}const I=Lt(bt("trigger"),{stores:[g,w.content,w.trigger],returned:([r,x,S])=>({role:"button","aria-haspopup":"dialog","aria-expanded":r?"true":"false","data-state":fl(r),"aria-controls":x,id:S}),action:r=>({destroy:pa(Ht(r,"click",()=>{D(r)}),Ht(r,"keydown",S=>{S.key!==Vt.ENTER&&S.key!==Vt.SPACE||(S.preventDefault(),D(r))}))})}),P=Lt(bt("overlay"),{stores:[g],returned:([r])=>({hidden:r?void 0:!0,tabindex:-1,style:va({display:r?void 0:"none"}),"aria-hidden":"true","data-state":fl(r)}),action:r=>{let x=Ut,S=Ut,h=Ut;if(c.get()){const O=Yl(r,{handler:()=>{L()}});O&&O.destroy&&(x=O.destroy)}return S=ma([y],([O])=>{if(h(),O===null)return;const G=ol(r,O);G!==null&&(h=Si(r,G).destroy)}),{destroy(){x(),S(),h()}}}}),F=Lt(bt("arrow"),{stores:l,returned:r=>({"data-arrow":!0,style:va({position:"absolute",width:`var(--arrow-size, ${r}px)`,height:`var(--arrow-size, ${r}px)`})})}),u=Lt(bt("close"),{returned:()=>({type:"button"}),action:r=>({destroy:pa(Ht(r,"click",S=>{S.defaultPrevented||L()}),Ht(r,"keydown",S=>{S.defaultPrevented||S.key!==Vt.ENTER&&S.key!==Vt.SPACE||(S.preventDefault(),D())}))})});return ma([s,v,d],([r,x,S])=>{if(!Za)return;const h=[];if(r){x||$a().then(()=>{const G=document.getElementById(w.trigger.get());ql(G)&&v.set(G)}),S&&h.push(Oi());const O=x??document.getElementById(w.trigger.get());rl({prop:f.get(),defaultEl:O})}return()=>{h.forEach(O=>O())}}),{ids:w,elements:{trigger:I,content:E,arrow:F,close:u,overlay:P},states:{open:s},options:t}}function fl(a){return a?"open":"closed"}function Pi(){return{NAME:"separator",PARTS:["root"]}}function Bi(a){const{NAME:e,PARTS:t}=Pi(),o=Tl(e,t),l={...gi(El(a)),getAttrs:o};return{...l,updateOption:Ll(l.options)}}const Ri=Y((a,e,t,o)=>{let l,i=xe(e,["orientation","decorative","asChild","el"]),d,c,{orientation:n="horizontal"}=e,{decorative:y=!0}=e,{asChild:C=!1}=e,{el:f=void 0}=e;const{elements:{root:A},updateOption:m,getAttrs:_}=Bi({orientation:n,decorative:y});c=H(A,v=>d=v);const s=_("root");return e.orientation===void 0&&t.orientation&&n!==void 0&&t.orientation(n),e.decorative===void 0&&t.decorative&&y!==void 0&&t.decorative(y),e.asChild===void 0&&t.asChild&&C!==void 0&&t.asChild(C),e.el===void 0&&t.el&&f!==void 0&&t.el(f),m("orientation",n),m("decorative",y),l=d,Object.assign(l,s),c(),`${C?`${o.default?o.default({builder:l}):""}`:`<div${Se([Q(l),Q(i)],{})}${ye("this",f,0)}></div>`}`});function Dl(){return{NAME:"popover",PARTS:["arrow","close","content","trigger"]}}function Gi(a){const{NAME:e,PARTS:t}=Dl(),o=Tl(e,t),l={...Ii({positioning:{placement:"bottom",gutter:0},...El(a),forceVisible:!0}),getAttrs:o};return Dt(e,l),{...l,updateOption:Ll(l.options)}}function ga(){const{NAME:a}=Dl();return Ft(a)}function Ni(a){const t={...{side:"bottom",align:"center"},...a},{options:{positioning:o}}=ga();Ti(o)(t)}const ji=Y((a,e,t,o)=>{let l,i,{disableFocusTrap:d=void 0}=e,{closeOnEscape:c=void 0}=e,{closeOnOutsideClick:n=void 0}=e,{preventScroll:y=void 0}=e,{portal:C=void 0}=e,{open:f=void 0}=e,{onOpenChange:A=void 0}=e,{openFocus:m=void 0}=e,{closeFocus:_=void 0}=e,{onOutsideClick:s=void 0}=e;const{updateOption:v,states:{open:w},ids:L}=Gi({disableFocusTrap:d,closeOnEscape:c,closeOnOutsideClick:n,preventScroll:y,portal:C,defaultOpen:f,openFocus:m,closeFocus:_,onOutsideClick:s,onOpenChange:({next:E})=>(f!==E&&(A?.(E),f=E),E),positioning:{gutter:0,offset:{mainAxis:1}}}),g=nt([L.content,L.trigger],([E,D])=>({content:E,trigger:D}));return i=H(g,E=>l=E),e.disableFocusTrap===void 0&&t.disableFocusTrap&&d!==void 0&&t.disableFocusTrap(d),e.closeOnEscape===void 0&&t.closeOnEscape&&c!==void 0&&t.closeOnEscape(c),e.closeOnOutsideClick===void 0&&t.closeOnOutsideClick&&n!==void 0&&t.closeOnOutsideClick(n),e.preventScroll===void 0&&t.preventScroll&&y!==void 0&&t.preventScroll(y),e.portal===void 0&&t.portal&&C!==void 0&&t.portal(C),e.open===void 0&&t.open&&f!==void 0&&t.open(f),e.onOpenChange===void 0&&t.onOpenChange&&A!==void 0&&t.onOpenChange(A),e.openFocus===void 0&&t.openFocus&&m!==void 0&&t.openFocus(m),e.closeFocus===void 0&&t.closeFocus&&_!==void 0&&t.closeFocus(_),e.onOutsideClick===void 0&&t.onOutsideClick&&s!==void 0&&t.onOutsideClick(s),f!==void 0&&w.set(f),v("disableFocusTrap",d),v("closeOnEscape",c),v("closeOnOutsideClick",n),v("preventScroll",y),v("portal",C),v("openFocus",m),v("closeFocus",_),v("onOutsideClick",s),i(),`${o.default?o.default({ids:l}):""}`}),zi=Y((a,e,t,o)=>{let l,i=xe(e,["transition","transitionConfig","inTransition","inTransitionConfig","outTransition","outTransitionConfig","asChild","id","side","align","sideOffset","alignOffset","collisionPadding","avoidCollisions","collisionBoundary","sameWidth","fitViewport","strategy","overlap","el"]),d,c,n,y,{transition:C=void 0}=e,{transitionConfig:f=void 0}=e,{inTransition:A=void 0}=e,{inTransitionConfig:m=void 0}=e,{outTransition:_=void 0}=e,{outTransitionConfig:s=void 0}=e,{asChild:v=!1}=e,{id:w=void 0}=e,{side:L="bottom"}=e,{align:g="center"}=e,{sideOffset:E=0}=e,{alignOffset:D=0}=e,{collisionPadding:T=8}=e,{avoidCollisions:I=!0}=e,{collisionBoundary:P=void 0}=e,{sameWidth:F=!1}=e,{fitViewport:u=!1}=e,{strategy:r="absolute"}=e,{overlap:x=!1}=e,{el:S=void 0}=e;const{elements:{content:h},states:{open:O},ids:G,getAttrs:z}=ga();y=H(h,N=>n=N),c=H(O,N=>d=N);const V=z("content");return e.transition===void 0&&t.transition&&C!==void 0&&t.transition(C),e.transitionConfig===void 0&&t.transitionConfig&&f!==void 0&&t.transitionConfig(f),e.inTransition===void 0&&t.inTransition&&A!==void 0&&t.inTransition(A),e.inTransitionConfig===void 0&&t.inTransitionConfig&&m!==void 0&&t.inTransitionConfig(m),e.outTransition===void 0&&t.outTransition&&_!==void 0&&t.outTransition(_),e.outTransitionConfig===void 0&&t.outTransitionConfig&&s!==void 0&&t.outTransitionConfig(s),e.asChild===void 0&&t.asChild&&v!==void 0&&t.asChild(v),e.id===void 0&&t.id&&w!==void 0&&t.id(w),e.side===void 0&&t.side&&L!==void 0&&t.side(L),e.align===void 0&&t.align&&g!==void 0&&t.align(g),e.sideOffset===void 0&&t.sideOffset&&E!==void 0&&t.sideOffset(E),e.alignOffset===void 0&&t.alignOffset&&D!==void 0&&t.alignOffset(D),e.collisionPadding===void 0&&t.collisionPadding&&T!==void 0&&t.collisionPadding(T),e.avoidCollisions===void 0&&t.avoidCollisions&&I!==void 0&&t.avoidCollisions(I),e.collisionBoundary===void 0&&t.collisionBoundary&&P!==void 0&&t.collisionBoundary(P),e.sameWidth===void 0&&t.sameWidth&&F!==void 0&&t.sameWidth(F),e.fitViewport===void 0&&t.fitViewport&&u!==void 0&&t.fitViewport(u),e.strategy===void 0&&t.strategy&&r!==void 0&&t.strategy(r),e.overlap===void 0&&t.overlap&&x!==void 0&&t.overlap(x),e.el===void 0&&t.el&&S!==void 0&&t.el(S),w&&G.content.set(w),l=n,Object.assign(l,V),d&&Ni({side:L,align:g,sideOffset:E,alignOffset:D,collisionPadding:T,avoidCollisions:I,collisionBoundary:P,sameWidth:F,fitViewport:u,strategy:r,overlap:x}),c(),y(),`${v&&d?`${o.default?o.default({builder:l}):""}`:`${C&&d?`<div${Se([Q(l),Q(i)],{})}${ye("this",S,0)}>${o.default?o.default({builder:l}):""}</div>`:`${A&&_&&d?`<div${Se([Q(l),Q(i)],{})}${ye("this",S,0)}>${o.default?o.default({builder:l}):""}</div>`:`${A&&d?`<div${Se([Q(l),Q(i)],{})}${ye("this",S,0)}>${o.default?o.default({builder:l}):""}</div>`:`${_&&d?`<div${Se([Q(l),Q(i)],{})}${ye("this",S,0)}>${o.default?o.default({builder:l}):""}</div>`:`${d?`<div${Se([Q(l),Q(i)],{})}${ye("this",S,0)}>${o.default?o.default({builder:l}):""}</div>`:""}`}`}`}`}`}`}),Hi=Y((a,e,t,o)=>{let l,i,d=xe(e,["asChild","id","el"]),c,n,y,C,{asChild:f=!1}=e,{id:A=void 0}=e,{el:m=void 0}=e;const{elements:{trigger:_},states:{open:s},ids:v,getAttrs:w}=ga();n=H(_,g=>c=g),C=H(s,g=>y=g),_i();const L=w("trigger");return e.asChild===void 0&&t.asChild&&f!==void 0&&t.asChild(f),e.id===void 0&&t.id&&A!==void 0&&t.id(A),e.el===void 0&&t.el&&m!==void 0&&t.el(m),A&&v.trigger.set(A),l={...L,"aria-controls":y?v.content:void 0},i=c,Object.assign(i,l),n(),C(),`${f?`${o.default?o.default({builder:i}):""}`:`<button${Se([Q(i),{type:"button"},Q(d)],{})}${ye("this",m,0)}>${o.default?o.default({builder:i}):""}</button>`}`}),wa=(a,e={serializeStrings:!0})=>a==null?"null":typeof a=="string"?e.serializeStrings!==!1?`'${a.replaceAll("'","''")}'`:a:typeof a=="number"||typeof a=="bigint"||typeof a=="boolean"?String(a):a instanceof Date?`'${a.toISOString()}'::TIMESTAMP_MS`:Array.isArray(a)?`[${a.map(t=>wa(t,e)).join(", ")}]`:JSON.stringify(a),Vi=Y((a,e,t,o)=>{let{enabled:l=!0}=e;return e.enabled===void 0&&t.enabled&&l!==void 0&&t.enabled(l),`<div class="${["contents",l?"print:hidden":""].join(" ").trim()}">${o.default?o.default({}):""}</div>`}),Fl=Symbol("EVIDENCE_DROPDOWN_CTX");let Ui=0;const Ml=Y((a,e,t,o)=>{let{value:l}=e,{valueLabel:i=l}=e,{idx:d=-1}=e,{__auto:c=!1}=e;c||(d=Ui++);const n=Ft(Fl);return yt(n.registerOption({value:l,label:i,idx:d,__auto:c})),e.value===void 0&&t.value&&l!==void 0&&t.value(l),e.valueLabel===void 0&&t.valueLabel&&i!==void 0&&t.valueLabel(i),e.idx===void 0&&t.idx&&d!==void 0&&t.idx(d),e.__auto===void 0&&t.__auto&&c!==void 0&&t.__auto(c),""});function Yi(a){return Object.keys(a).reduce((e,t)=>a[t]===void 0?e:e+`${t}:${a[t]};`,"")}const qi={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};function Zt(a,e,t,o){const l=Array.isArray(e)?e:[e];return l.forEach(i=>a.addEventListener(i,t,o)),()=>{l.forEach(i=>a.removeEventListener(i,t,o))}}function Il(...a){return(...e)=>{for(const t of a)typeof t=="function"&&t(...e)}}const Wi=Y((a,e,t,o)=>{let l,i=xe(e,["label","shouldFilter","filter","value","onValueChange","loop","onKeydown","state","ids","asChild"]),d,c,{label:n=void 0}=e,{shouldFilter:y=!0}=e,{filter:C=void 0}=e,{value:f=void 0}=e,{onValueChange:A=void 0}=e,{loop:m=void 0}=e,{onKeydown:_=void 0}=e,{state:s=void 0}=e,{ids:v=void 0}=e,{asChild:w=!1}=e;const{commandEl:L,handleRootKeydown:g,ids:E,state:D}=Wl({label:n,shouldFilter:y,filter:C,value:f,onValueChange:x=>{x!==f&&(f=x,A?.(x))},loop:m,state:s,ids:v});c=H(D,x=>d=x);function T(x){x&&x!==d.value&&Oa(D,d.value=x,d)}function I(x){return L.set(x),{destroy:Il(Zt(x,"keydown",u))}}const P={role:"application",id:E.root,"data-cmdk-root":""},F={"data-cmdk-label":"",for:E.input,id:E.label,style:Yi(qi)};function u(x){_?.(x),!x.defaultPrevented&&g(x)}const r={action:I,attrs:P};return e.label===void 0&&t.label&&n!==void 0&&t.label(n),e.shouldFilter===void 0&&t.shouldFilter&&y!==void 0&&t.shouldFilter(y),e.filter===void 0&&t.filter&&C!==void 0&&t.filter(C),e.value===void 0&&t.value&&f!==void 0&&t.value(f),e.onValueChange===void 0&&t.onValueChange&&A!==void 0&&t.onValueChange(A),e.loop===void 0&&t.loop&&m!==void 0&&t.loop(m),e.onKeydown===void 0&&t.onKeydown&&_!==void 0&&t.onKeydown(_),e.state===void 0&&t.state&&s!==void 0&&t.state(s),e.ids===void 0&&t.ids&&v!==void 0&&t.ids(v),e.asChild===void 0&&t.asChild&&w!==void 0&&t.asChild(w),T(f),l={root:r,label:{attrs:F},stateStore:D,state:d},c(),`${w?`${o.default?o.default({...l}):""}`:`<div${Se([Q(P),Q(i)],{})}> <label${Se([Q(F)],{})}>${p(n??"")}</label> ${o.default?o.default({...l}):""}</div>`}`}),Qi=Y((a,e,t,o)=>{xe(e,["asChild"]);let l,i,{asChild:d=!1}=e;const c=It();return i=H(c,n=>l=n),e.asChild===void 0&&t.asChild&&d!==void 0&&t.asChild(d),l.filtered.count,i(),""}),Xi=Y((a,e,t,o)=>{let l,i,d,c,n=xe(e,["heading","value","alwaysRender","asChild"]),y,C,{heading:f=void 0}=e,{value:A=""}=e,{alwaysRender:m=!1}=e,{asChild:_=!1}=e;const{id:s}=Ql(m),v=pt(),w=It(),L=Al(),g=nt(w,T=>m||v.filter()===!1||!T.search?!0:T.filtered.groups.has(s));C=H(g,T=>y=T);function E(T){if(A){v.value(s,A),T.setAttribute(Xt,A);return}f?A=f.trim().toLowerCase():T.textContent&&(A=T.textContent.trim().toLowerCase()),v.value(s,A),T.setAttribute(Xt,A)}const D={"data-cmdk-group-heading":"","aria-hidden":!0,id:L};return e.heading===void 0&&t.heading&&f!==void 0&&t.heading(f),e.value===void 0&&t.value&&A!==void 0&&t.value(A),e.alwaysRender===void 0&&t.alwaysRender&&m!==void 0&&t.alwaysRender(m),e.asChild===void 0&&t.asChild&&_!==void 0&&t.asChild(_),l={"data-cmdk-group":"",role:"presentation",hidden:y?void 0:!0,"data-value":A},i={"data-cmdk-group-items":"",role:"group","aria-labelledby":f?L:void 0},d={action:E,attrs:l},c={attrs:i},C(),`${_?`${o.default?o.default({container:d,group:c,heading:{attrs:D}}):""}`:`<div${Se([Q(l),Q(n)],{})}>${f?`<div${Se([Q(D)],{})}>${p(f)}</div>`:""} <div${Se([Q(i)],{})}>${o.default?o.default({container:d,group:c,heading:{attrs:D}}):""}</div></div>`}`});function Ki(a){return new Promise(e=>setTimeout(e,a))}const Ji=Y((a,e,t,o)=>{let l=xe(e,["autofocus","value","asChild","el"]),i,d,c,n;const{ids:y,commandEl:C}=pt(),f=It(),A=nt(f,T=>T.search);n=H(A,T=>c=T);const m=nt(f,T=>T.value);let{autofocus:_=void 0}=e,{value:s=c}=e,{asChild:v=!1}=e,{el:w=void 0}=e;const L=nt([m,C],([T,I])=>Xl?I?.querySelector(`${Kl}[${Xt}="${T}"]`)?.getAttribute("id"):void 0);d=H(L,T=>i=T);function g(T){f.updateState("search",T)}function E(T){return _&&Ki(10).then(()=>T.focus()),{destroy:Zt(T,"change",P=>{Jl(P.target)&&f.updateState("search",P.target.value)})}}let D;return e.autofocus===void 0&&t.autofocus&&_!==void 0&&t.autofocus(_),e.value===void 0&&t.value&&s!==void 0&&t.value(s),e.asChild===void 0&&t.asChild&&v!==void 0&&t.asChild(v),e.el===void 0&&t.el&&w!==void 0&&t.el(w),g(s),D={type:"text","data-cmdk-input":"",autocomplete:"off",autocorrect:"off",spellcheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":y.list,"aria-labelledby":y.label,"aria-activedescendant":i??void 0,id:y.input},d(),n(),`${v?`${o.default?o.default({action:E,attrs:D}):""}`:`<input${Se([Q(D),Q(l)],{})}${ye("this",w,0)}${ye("value",s,0)}>`}`}),Zi=Y((a,e,t,o)=>{let l,i=xe(e,["disabled","value","onSelect","alwaysRender","asChild","id"]),d,c,n,y,{disabled:C=!1}=e,{value:f=""}=e,{onSelect:A=void 0}=e,{alwaysRender:m=!1}=e,{asChild:_=!1}=e,{id:s=Al()}=e;const v=Zl(),w=pt(),L=It(),g=m??v?.alwaysRender,E=nt(L,u=>{if(g||w.filter()===!1||!u.search)return!0;const r=u.filtered.items.get(s);return pl(r)?!1:r>0});y=H(E,u=>n=u);let D=!0;const T=nt(L,u=>u.value===f);c=H(T,u=>d=u);function I(u){!f&&u.textContent&&(f=u.textContent.trim().toLowerCase()),w.value(s,f),u.setAttribute(Xt,f);const r=Il(Zt(u,"pointermove",()=>{C||F()}),Zt(u,"click",()=>{C||P()}));return{destroy(){r()}}}function P(){F(),A?.(f)}function F(){L.updateState("value",f,!0)}return e.disabled===void 0&&t.disabled&&C!==void 0&&t.disabled(C),e.value===void 0&&t.value&&f!==void 0&&t.value(f),e.onSelect===void 0&&t.onSelect&&A!==void 0&&t.onSelect(A),e.alwaysRender===void 0&&t.alwaysRender&&m!==void 0&&t.alwaysRender(m),e.asChild===void 0&&t.asChild&&_!==void 0&&t.asChild(_),e.id===void 0&&t.id&&s!==void 0&&t.id(s),l={"aria-disabled":C?!0:void 0,"aria-selected":d?!0:void 0,"data-disabled":C?!0:void 0,"data-selected":d?!0:void 0,"data-cmdk-item":"","data-value":f,role:"option",id:s},c(),y(),`${n||D?`${_?`${o.default?o.default({action:I,attrs:l}):""}`:`<div${Se([Q(l),Q(i)],{})}>${o.default?o.default({action:I,attrs:l}):""}</div>`}`:""}`}),pi=Y((a,e,t,o)=>{let l=xe(e,["el","asChild"]),i;const{ids:d}=pt(),c=It();i=H(c,s=>s);let{el:n=void 0}=e,{asChild:y=!1}=e;function C(s){let v;const w=s.closest("[data-cmdk-list]");if(!$l(w))return;const L=new ResizeObserver(()=>{v=requestAnimationFrame(()=>{const g=s.offsetHeight;w.style.setProperty("--cmdk-list-height",g.toFixed(1)+"px")})});return L.observe(s),{destroy(){cancelAnimationFrame(v),L.unobserve(s)}}}const f={"data-cmdk-list":"",role:"listbox","aria-label":"Suggestions",id:d.list,"aria-labelledby":d.input},A={"data-cmdk-list-sizer":""},m={attrs:f},_={attrs:A,action:C};return e.el===void 0&&t.el&&n!==void 0&&t.el(n),e.asChild===void 0&&t.asChild&&y!==void 0&&t.asChild(y),i(),`${y?`${o.default?o.default({list:m,sizer:_}):""}`:`<div${Se([Q(f),Q(l)],{})}${ye("this",n,0)}><div${Se([Q(A)],{})}>${o.default?o.default({}):""}</div></div>`}`}),$i=Y((a,e,t,o)=>{let l=xe(e,["value","class"]),{value:i=void 0}=e,{class:d=void 0}=e;e.value===void 0&&t.value&&i!==void 0&&t.value(i),e.class===void 0&&t.class&&d!==void 0&&t.class(d);let c,n,y=a.head;do c=!0,a.head=y,n=`${M(Wi,"CommandPrimitive.Root").$$render(a,Object.assign({},{class:Be("flex h-full w-full flex-col overflow-hidden rounded-md bg-base-100",d)},l,{value:i}),{value:C=>{i=C,c=!1}},{default:()=>`${o.default?o.default({}):""}`})}`;while(!c);return n}),eo=Y((a,e,t,o)=>{let l=xe(e,["class"]),{class:i=void 0}=e;return e.class===void 0&&t.class&&i!==void 0&&t.class(i),`${M(Qi,"CommandPrimitive.Empty").$$render(a,Object.assign({},{class:Be("py-6 text-center text-sm",i)},l),{},{default:()=>`${o.default?o.default({}):""}`})}`}),to=Y((a,e,t,o)=>{let l=xe(e,["class"]),{class:i=void 0}=e;return e.class===void 0&&t.class&&i!==void 0&&t.class(i),`${M(Xi,"CommandPrimitive.Group").$$render(a,Object.assign({},{class:Be("text-foreground overflow-hidden p-1 [&_[data-cmdk-group-heading]]:px-2 [&_[data-cmdk-group-heading]]:py-1.5 [&_[data-cmdk-group-heading]]:text-xs [&_[data-cmdk-group-heading]]:font-medium [&_[data-cmdk-group-heading]]:text-base-content-muted",i)},l),{},{default:()=>`${o.default?o.default({}):""}`})}`}),Sa=Y((a,e,t,o)=>{let l=xe(e,["class"]),{class:i=void 0}=e;return e.class===void 0&&t.class&&i!==void 0&&t.class(i),`${M(Zi,"CommandPrimitive.Item").$$render(a,Object.assign({},{class:Be("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none aria-selected:bg-base-200 data-[disabled]:pointer-events-none data-[disabled]:opacity-50",i)},l),{},{default:()=>`${o.default?o.default({}):""}`})}`}),ao=Y((a,e,t,o)=>{let l=xe(e,["class","value"]),{class:i=void 0}=e,{value:d=""}=e;e.class===void 0&&t.class&&i!==void 0&&t.class(i),e.value===void 0&&t.value&&d!==void 0&&t.value(d);let c,n,y=a.head;do c=!0,a.head=y,n=`<div class="flex items-center border-b border-base-300 px-3" data-cmdk-input-wrapper="">${M(Jt,"Icon").$$render(a,{src:hi,class:"mr-2 h-4 w-4 shrink-0 text-base-content-muted"},{},{})} ${M(Ji,"CommandPrimitive.Input").$$render(a,Object.assign({},{class:Be("flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-base-content-muted disabled:cursor-not-allowed disabled:opacity-50",i)},l,{value:d}),{value:C=>{d=C,c=!1}},{})}</div>`;while(!c);return n}),lo=Y((a,e,t,o)=>{let l=xe(e,["class"]),{class:i=void 0}=e;return e.class===void 0&&t.class&&i!==void 0&&t.class(i),`${M(pi,"CommandPrimitive.List").$$render(a,Object.assign({},{class:Be("max-h-[300px] overflow-y-auto overflow-x-hidden",i)},l),{},{default:()=>`${o.default?o.default({}):""}`})}`}),vl=Y((a,e,t,o)=>{let{value:l}=e,{valueLabel:i=l}=e,{active:d=!1}=e,{handleSelect:c}=e,{multiple:n}=e;return e.value===void 0&&t.value&&l!==void 0&&t.value(l),e.valueLabel===void 0&&t.valueLabel&&i!==void 0&&t.valueLabel(i),e.active===void 0&&t.active&&d!==void 0&&t.active(d),e.handleSelect===void 0&&t.handleSelect&&c!==void 0&&t.handleSelect(c),e.multiple===void 0&&t.multiple&&n!==void 0&&t.multiple(n),`${M(Sa,"Command.Item").$$render(a,{value:String(i),onSelect:()=>c({value:l,label:i})},{},{default:()=>`${n?`<div${ye("class",Be("mr-2 flex h-4 w-4 items-center justify-center rounded-sm border border-base-content",d?"bg-base-content text-base-100":"opacity-50 [&_svg]:invisible"),0)}>${M(Jt,"Icon").$$render(a,{src:ll,class:Be("h-4 w-4")},{},{})}</div>`:`<div class="mr-2 flex h-4 w-4 items-center justify-center">${M(Jt,"Icon").$$render(a,{src:ll,class:Be("h-4 w-4",d?"":"text-transparent")},{},{})}</div>`} <span class="line-clamp-4">${p(i)}</span>`})}`}),io=Y((a,e,t,o)=>{let l=xe(e,["class","transition","transitionConfig","align","sideOffset"]),{class:i=void 0}=e,{transition:d=vi}=e,{transitionConfig:c=void 0}=e,{align:n="center"}=e,{sideOffset:y=4}=e;return e.class===void 0&&t.class&&i!==void 0&&t.class(i),e.transition===void 0&&t.transition&&d!==void 0&&t.transition(d),e.transitionConfig===void 0&&t.transitionConfig&&c!==void 0&&t.transitionConfig(c),e.align===void 0&&t.align&&n!==void 0&&t.align(n),e.sideOffset===void 0&&t.sideOffset&&y!==void 0&&t.sideOffset(y),`${M(zi,"PopoverPrimitive.Content").$$render(a,Object.assign({},{transition:d},{transitionConfig:c},{align:n},{sideOffset:y},l,{class:Be("z-50 w-72 rounded-md border border-base-300 p-4 shadow-md outline-none bg-base-100",i)}),{},{default:()=>`${o.default?o.default({}):""}`})}`}),oo=ji,ro=Hi,ml=Y((a,e,t,o)=>{let l=xe(e,["class","orientation","decorative"]),{class:i=void 0}=e,{orientation:d="horizontal"}=e,{decorative:c=void 0}=e;return e.class===void 0&&t.class&&i!==void 0&&t.class(i),e.orientation===void 0&&t.orientation&&d!==void 0&&t.orientation(d),e.decorative===void 0&&t.decorative&&c!==void 0&&t.decorative(c),`${M(Ri,"SeparatorPrimitive.Root").$$render(a,Object.assign({},{class:Be("shrink-0 bg-base-300",d==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",i)},{orientation:d},{decorative:c},l),{},{})}`}),ya=Y((a,e,t,o)=>{let l=xe(e,["class","href","variant"]),{class:i=void 0}=e,{href:d=void 0}=e,{variant:c="default"}=e;return e.class===void 0&&t.class&&i!==void 0&&t.class(i),e.href===void 0&&t.href&&d!==void 0&&t.href(d),e.variant===void 0&&t.variant&&c!==void 0&&t.variant(c),`${(n=>n?`<${d?"a":"span"}${Se([{href:Ja(d)},{class:Ja(Be(ei({variant:c,className:i})))},Q(l)],{})}>${nl(n)?"":`${o.default?o.default({}):""}`}${nl(n)?"":`</${n}>`}`:"")(d?"a":"span")}`}),no={code:".viewport.svelte-851usv{position:relative;overflow-y:auto;-webkit-overflow-scrolling:touch;display:block}.contents.svelte-851usv,.row.svelte-851usv{display:block}.row.svelte-851usv{overflow:hidden}",map:`{"version":3,"file":"Virtual.svelte","sources":["Virtual.svelte"],"sourcesContent":["<script>\\n\\timport { onMount, tick } from 'svelte';\\n\\n\\t// props\\n\\texport let items;\\n\\texport let height = '100%';\\n\\texport let itemHeight = undefined;\\n\\n\\t// read-only, but visible to consumers via bind:start\\n\\texport let start = 0;\\n\\texport let end = 0;\\n\\n\\t// local state\\n\\tlet height_map = [];\\n\\tlet rows;\\n\\tlet viewport;\\n\\tlet contents;\\n\\tlet viewport_height = 0;\\n\\tlet visible;\\n\\tlet mounted;\\n\\n\\tlet top = 0;\\n\\tlet bottom = 0;\\n\\tlet average_height;\\n\\n\\t$: visible = items.slice(start, end).map((data, i) => {\\n\\t\\treturn { index: i + start, data };\\n\\t});\\n\\n\\t// whenever \`items\` changes, invalidate the current heightmap\\n\\t$: if (mounted) refresh(items, viewport_height, itemHeight);\\n\\n\\tasync function refresh(items, viewport_height, itemHeight) {\\n\\t\\tconst { scrollTop } = viewport;\\n\\n\\t\\tawait tick(); // wait until the DOM is up to date\\n\\t\\tif (!mounted) return;\\n\\n\\t\\tlet content_height = top - scrollTop;\\n\\t\\tlet i = start;\\n\\n\\t\\twhile (content_height < viewport_height && i < items.length) {\\n\\t\\t\\tlet row = rows[i - start];\\n\\n\\t\\t\\tif (!row) {\\n\\t\\t\\t\\tend = i + 1;\\n\\t\\t\\t\\tawait tick(); // render the newly visible row\\n\\t\\t\\t\\tif (!mounted) return;\\n\\t\\t\\t\\trow = rows[i - start];\\n\\t\\t\\t}\\n\\n\\t\\t\\tconst row_height = (height_map[i] =\\n\\t\\t\\t\\titemHeight || row?.offsetHeight || Number.MAX_SAFE_INTEGER);\\n\\t\\t\\tcontent_height += row_height;\\n\\t\\t\\ti += 1;\\n\\t\\t}\\n\\n\\t\\tend = i;\\n\\n\\t\\tconst remaining = items.length - end;\\n\\t\\taverage_height = (top + content_height) / end;\\n\\n\\t\\tbottom = remaining * average_height;\\n\\t\\theight_map.length = items.length;\\n\\t}\\n\\n\\tasync function handle_scroll() {\\n\\t\\tconst { scrollTop } = viewport;\\n\\n\\t\\tconst old_start = start;\\n\\n\\t\\tfor (let v = 0; v < rows.length; v += 1) {\\n\\t\\t\\theight_map[start + v] = itemHeight || rows[v]?.offsetHeight || Number.MAX_SAFE_INTEGER;\\n\\t\\t}\\n\\n\\t\\tlet i = 0;\\n\\t\\tlet y = 0;\\n\\n\\t\\twhile (i < items.length) {\\n\\t\\t\\tconst row_height = height_map[i] || average_height;\\n\\t\\t\\tif (y + row_height > scrollTop) {\\n\\t\\t\\t\\tstart = i;\\n\\t\\t\\t\\ttop = y;\\n\\n\\t\\t\\t\\tbreak;\\n\\t\\t\\t}\\n\\n\\t\\t\\ty += row_height;\\n\\t\\t\\ti += 1;\\n\\t\\t}\\n\\n\\t\\twhile (i < items.length) {\\n\\t\\t\\ty += height_map[i] || average_height;\\n\\t\\t\\ti += 1;\\n\\n\\t\\t\\tif (y > scrollTop + viewport_height) break;\\n\\t\\t}\\n\\n\\t\\tend = i;\\n\\n\\t\\tconst remaining = items.length - end;\\n\\t\\taverage_height = y / end;\\n\\n\\t\\twhile (i < items.length) height_map[i++] = average_height;\\n\\t\\tbottom = remaining * average_height;\\n\\n\\t\\t// prevent jumping if we scrolled up into unknown territory\\n\\t\\tif (start < old_start) {\\n\\t\\t\\tawait tick();\\n\\n\\t\\t\\tlet expected_height = 0;\\n\\t\\t\\tlet actual_height = 0;\\n\\n\\t\\t\\tfor (let i = start; i < old_start; i += 1) {\\n\\t\\t\\t\\tif (rows[i - start]) {\\n\\t\\t\\t\\t\\texpected_height += height_map[i];\\n\\t\\t\\t\\t\\tactual_height += itemHeight || rows[i - start]?.offsetHeight || Number.MAX_SAFE_INTEGER;\\n\\t\\t\\t\\t}\\n\\t\\t\\t}\\n\\n\\t\\t\\tconst d = actual_height - expected_height;\\n\\t\\t\\tviewport.scrollTo(0, scrollTop + d);\\n\\t\\t}\\n\\n\\t\\t// TODO if we overestimated the space these\\n\\t\\t// rows would occupy we may need to add some\\n\\t\\t// more. maybe we can just call handle_scroll again?\\n\\t}\\n\\n\\t// trigger initial refresh\\n\\tonMount(() => {\\n\\t\\trows = contents.getElementsByClassName('row');\\n\\t\\tmounted = true;\\n\\t\\treturn () => (mounted = false);\\n\\t});\\n<\/script>\\n\\n<div\\n\\tbind:this={viewport}\\n\\tbind:offsetHeight={viewport_height}\\n\\ton:scroll={handle_scroll}\\n\\tstyle=\\"height: {height};\\"\\n\\tclass=\\"viewport\\"\\n>\\n\\t<div\\n\\t\\tclass=\\"contents\\"\\n\\t\\tbind:this={contents}\\n\\t\\tstyle=\\"padding-top: {top}px; padding-bottom: {bottom}px;\\"\\n\\t>\\n\\t\\t{#each visible as row (row.index)}\\n\\t\\t\\t<div class=\\"row\\">\\n\\t\\t\\t\\t<slot item={row.data}>Missing template</slot>\\n\\t\\t\\t</div>\\n\\t\\t{/each}\\n\\t</div>\\n</div>\\n\\n<style>\\n\\t.viewport {\\n\\t\\tposition: relative;\\n\\t\\toverflow-y: auto;\\n\\t\\t-webkit-overflow-scrolling: touch;\\n\\t\\tdisplay: block;\\n\\t}\\n\\n\\t.contents,\\n\\t.row {\\n\\t\\tdisplay: block;\\n\\t}\\n\\n\\t.row {\\n\\t\\toverflow: hidden;\\n\\t}</style>\\n"],"names":[],"mappings":"AA8JC,uBAAU,CACT,QAAQ,CAAE,QAAQ,CAClB,UAAU,CAAE,IAAI,CAChB,0BAA0B,CAAE,KAAK,CACjC,OAAO,CAAE,KACV,CAEA,uBAAS,CACT,kBAAK,CACJ,OAAO,CAAE,KACV,CAEA,kBAAK,CACJ,QAAQ,CAAE,MACX"}`},so=Y((a,e,t,o)=>{let{items:l}=e,{height:i="100%"}=e,{itemHeight:d=void 0}=e,{start:c=0}=e,{end:n=0}=e,y,C,f,A=0,m=0;return e.items===void 0&&t.items&&l!==void 0&&t.items(l),e.height===void 0&&t.height&&i!==void 0&&t.height(i),e.itemHeight===void 0&&t.itemHeight&&d!==void 0&&t.itemHeight(d),e.start===void 0&&t.start&&c!==void 0&&t.start(c),e.end===void 0&&t.end&&n!==void 0&&t.end(n),a.css.add(no),f=l.slice(c,n).map((_,s)=>({index:s+c,data:_})),`<div style="${"height: "+p(i,!0)+";"}" class="viewport svelte-851usv"${ye("this",y,0)}><div class="contents svelte-851usv" style="${"padding-top: "+p(A,!0)+"px; padding-bottom: "+p(m,!0)+"px;"}"${ye("this",C,0)}>${Wt(f,_=>`<div class="row svelte-851usv">${o.default?o.default({item:_.data}):"Missing template"} </div>`)}</div> </div>`}),hl=5;function uo(a){return"similarity"in a?a.similarity*-1:a.ordinal??0}const co=Y((a,e,t,o)=>{let l,i,d=Pe,c=()=>(d(),d=H(K,b=>i=b),K),n,y,C,f,A,m,_,s,v,w=Pe,L=()=>(w(),w=H(l,b=>v=b),l),g,E;s=H(wl,b=>_=b);const D=ti();f=H(D,b=>C=b);let{title:T=void 0}=e,{name:I}=e,{multiple:P=!1}=e,{hideDuringPrint:F=!0}=e,{disableSelectAll:u=!1}=e,{defaultValue:r=[]}=e,{noDefault:x=!1}=e,{selectAllByDefault:S=!1}=e,{value:h="value",data:O,label:G=h,order:z=void 0,where:V=void 0}=e;const{results:N,update:te}=di({value:h,data:O,label:G,order:z,where:V},`Dropdown-${I}`,_?.data?.data[`Dropdown-${I}_data`]);m=H(N,b=>A=b);let ie=!!O;const we=I in C&&"rawValues"in C[I]&&Array.isArray(C[I].rawValues)?C[I].rawValues:[],k=ai({multiselect:P,defaultValues:Array.isArray(r)?r:[r],initialOptions:we,noDefault:x,selectAllByDefault:mi(S)}),{addOptions:se,removeOptions:Oe,options:ue,selectedOptions:ce,selectAll:fe,deselectAll:_e,toggleSelected:me,pauseSorting:X,resumeSorting:oe,forceSort:ae,destroy:J}=k;E=H(ue,b=>g=b),y=H(ce,b=>n=b),yt(J);const $=b=>{JSON.stringify(b)!==JSON.stringify(C[I])&&Oa(D,C[I]=b,C)};let U=[],le=n.length>0;yt(ce.subscribe(b=>{if(le||=b.length>0,b&&le){const j=b;P?$({label:j.map(W=>W.label).join(", "),value:j.length?`(${j.map(W=>wa(W.value))})`:"(select null where 0)",rawValues:j}):j.length?j.length&&$({label:j[0].label,value:wa(j[0].value,{serializeStrings:!1}),rawValues:j}):$({label:"",value:null,rawValues:[]})}})),Dt(Fl,{registerOption:b=>(se(b),()=>{Oe(b)})});let ee,Ae="",R=0,K;const Ce=li(()=>{if(R++,Ae&&ie){const b=R,j=l.search(Ae,"label");j.hash!==K?.hash&&oi(()=>{b===R&&(c(K=j),ae())},j.fetch())}else c(K=l??O)});e.title===void 0&&t.title&&T!==void 0&&t.title(T),e.name===void 0&&t.name&&I!==void 0&&t.name(I),e.multiple===void 0&&t.multiple&&P!==void 0&&t.multiple(P),e.hideDuringPrint===void 0&&t.hideDuringPrint&&F!==void 0&&t.hideDuringPrint(F),e.disableSelectAll===void 0&&t.disableSelectAll&&u!==void 0&&t.disableSelectAll(u),e.defaultValue===void 0&&t.defaultValue&&r!==void 0&&t.defaultValue(r),e.noDefault===void 0&&t.noDefault&&x!==void 0&&t.noDefault(x),e.selectAllByDefault===void 0&&t.selectAllByDefault&&S!==void 0&&t.selectAllByDefault(S),e.value===void 0&&t.value&&h!==void 0&&t.value(h),e.data===void 0&&t.data&&O!==void 0&&t.data(O),e.label===void 0&&t.label&&G!==void 0&&t.label(G),e.order===void 0&&t.order&&z!==void 0&&t.order(z),e.where===void 0&&t.where&&V!==void 0&&t.where(V);let he,re,ne=a.head;do he=!0,a.head=ne,te({value:h,data:O,label:G,order:z,where:V}),L({hasQuery:ie,query:l}=A),l&&l.fetch(),Ce(),ee?X():oe(),i?.dataLoaded&&(U=i),re=`${o.default?o.default({}):""} ${Wt(U,b=>`${M(Ml,"DropdownOption").$$render(a,{value:b[h]??b.value,valueLabel:b[G]??b.label,idx:uo(b),__auto:!0},{},{})}`)} ${M(Vi,"HiddenInPrint").$$render(a,{enabled:F},{},{default:()=>`<div class="mt-2 mb-4 ml-0 mr-2 inline-block">${ie&&v.error?`<span class="group inline-flex items-center relative cursor-help cursor-helpfont-sans px-1 border border-negative py-[1px] bg-negative/10 rounded"><span class="inline font-sans font-medium text-xs text-negative" data-svelte-h="svelte-1e4f3hi">error</span> <span class="hidden font-sans group-hover:inline absolute -top-1 left-[105%] text-sm z-10 px-2 py-1 bg-base-200 border border-base-300 leading-relaxed min-w-[150px] w-max max-w-[400px] rounded-md">${p(v.error)}</span></span>`:`${M(oo,"Popover.Root").$$render(a,{open:ee},{open:b=>{ee=b,he=!1}},{default:()=>`${M(ro,"Popover.Trigger").$$render(a,{asChild:!0},{},{default:({builder:b})=>`${M(Ei,"Button").$$render(a,{builders:[b],variant:"outline",role:"combobox",size:"sm",class:"min-w-5 h-8 border border-base-300","aria-label":T??je(I)},{},{default:()=>`${T&&!P?`${p(T)} ${n.length>0?`${M(ml,"Separator").$$render(a,{orientation:"vertical",class:"mx-2 h-4"},{},{})} ${p(n[0].label)}`:""}`:`${n.length>0&&!P?`${p(n[0].label)}`:`${p(T??je(I))}`}`} ${M(Jt,"Icon").$$render(a,{src:yi,class:"ml-2 h-4 w-4"},{},{})} ${n.length>0&&P?`${M(ml,"Separator").$$render(a,{orientation:"vertical",class:"mx-2 h-4"},{},{})} ${M(ya,"Badge").$$render(a,{variant:"default",class:"rounded-sm px-1 font-normal sm:hidden"},{},{default:()=>`${p(n.length)}`})} <div class="hidden space-x-1 sm:flex">${n.length>3?`${M(ya,"Badge").$$render(a,{variant:"default",class:"rounded-sm px-1 font-normal"},{},{default:()=>`${p(n.length)} Selected`})}`:`${Wt(n,j=>`${M(ya,"Badge").$$render(a,{variant:"default",class:"rounded-sm px-1 font-normal"},{},{default:()=>`${p(j.label)} `})}`)}`}</div>`:""}`})}`})} ${M(io,"Popover.Content").$$render(a,{class:"w-[200px] p-0",align:"start",side:"bottom"},{},{default:()=>`${M($i,"Command.Root").$$render(a,{shouldFilter:!1},{},{default:()=>`${M(ao,"Command.Input").$$render(a,{placeholder:T,value:Ae},{value:b=>{Ae=b,he=!1}},{})} ${M(lo,"Command.List").$$render(a,{},{},{default:()=>`${M(eo,"Command.Empty").$$render(a,{},{},{default:()=>"No results found."})} ${M(to,"Command.Group").$$render(a,{},{},{default:()=>`${g.length<=hl?`${Wt(g,(b,j)=>`${M(vl,"DropdownOptionDisplay").$$render(a,{id:j,value:b.value,valueLabel:b.label,handleSelect:({value:W,label:Ee})=>{me({value:W,label:Ee}),P||(ee=!1)},multiple:P,active:n.some(W=>W.value===b.value&&W.label===b.label)},{},{})}`)}`:`${M(so,"VirtualList").$$render(a,{height:`${hl*32}px`,items:g},{},{default:({item:b})=>`${M(vl,"DropdownOptionDisplay").$$render(a,{value:b?.value,valueLabel:b?.label,handleSelect:({value:j,label:W})=>{me({value:j,label:W}),P||(ee=!1)},multiple:P,active:n.some(j=>j.value===b.value&&j.label===b.label)},{},{})}`})}`}`})} ${P?`${u?"":`<div class="-mx-1 h-px bg-base-300"></div> ${M(Sa,"Command.Item").$$render(a,{class:"justify-center text-center",onSelect:fe},{},{default:()=>"Select all"})}`} <div class="-mx-1 h-px bg-base-300"></div> ${M(Sa,"Command.Item").$$render(a,{disabled:n.length===0,class:"justify-center text-center",onSelect:_e},{},{default:()=>"Clear selection"})}`:""}`})}`})}`})}`})}`}</div>`})}`;while(!he);return d(),y(),f(),m(),s(),w(),E(),re}),fo=Y((a,e,t,o)=>{let l,i,d,c,n,y=Pe,C=()=>(y(),y=H(l,u=>u),l);const{resolveColorsObject:f}=Ct();let{config:A=void 0}=e,{height:m="291px"}=e,{width:_="100%"}=e,{copying:s=!1}=e,{printing:v=!1}=e,{echartsOptions:w=void 0}=e,{seriesOptions:L=void 0}=e,{seriesColors:g=void 0}=e,{isMap:E=!1}=e,{extraHeight:D=void 0}=e,T=!1,I,P;const F=Ft("gridConfig");return F&&(T=!0,{cols:I,gapWidth:P}=F),e.config===void 0&&t.config&&A!==void 0&&t.config(A),e.height===void 0&&t.height&&m!==void 0&&t.height(m),e.width===void 0&&t.width&&_!==void 0&&t.width(_),e.copying===void 0&&t.copying&&s!==void 0&&t.copying(s),e.printing===void 0&&t.printing&&v!==void 0&&t.printing(v),e.echartsOptions===void 0&&t.echartsOptions&&w!==void 0&&t.echartsOptions(w),e.seriesOptions===void 0&&t.seriesOptions&&L!==void 0&&t.seriesOptions(L),e.seriesColors===void 0&&t.seriesColors&&g!==void 0&&t.seriesColors(g),e.isMap===void 0&&t.isMap&&E!==void 0&&t.isMap(E),e.extraHeight===void 0&&t.extraHeight&&D!==void 0&&t.extraHeight(D),C(l=f(g)),i=Math.min(Number(I),2),d=(650-Number(P)*(i-1))/i,c=Math.min(Number(I),3),n=(841-Number(P)*(c-1))/c,y(),`${s?`<div class="chart" style="${"height: "+p(m,!0)+"; width: "+p(_,!0)+"; margin-left: 0; margin-top: 15px; margin-bottom: 10px; overflow: visible; break-inside: avoid;"}"></div>`:`${v?`${T?`<div class="chart md:hidden" style="${"height: "+p(m,!0)+"; width: "+p(d,!0)+"px; margin-left: 0; margin-top: 15px; margin-bottom: 10px; overflow: visible; break-inside: avoid;"}"></div> <div class="chart hidden md:block" style="${"height: "+p(m,!0)+"; width: "+p(n,!0)+"px; margin-left: 0; margin-top: 15px; margin-bottom: 10px; overflow: visible; break-inside: avoid;"}"></div>`:`<div class="chart md:hidden" style="${"height: "+p(m,!0)+"; width: 650px; margin-left: 0; margin-top: 15px; margin-bottom: 10px; overflow: visible; break-inside: avoid;"}"></div> <div class="chart hidden md:block" style="${"height: "+p(m,!0)+"; width: 841px; margin-left: 0; margin-top: 15px; margin-bottom: 10px; overflow: visible; break-inside: avoid;"}"></div>`}`:""}`}`}),vo=Y((a,e,t,o)=>{let{height:l="231px"}=e;return e.height===void 0&&t.height&&l!==void 0&&t.height(l),`<div role="status" class="animate-pulse"><span class="sr-only" data-svelte-h="svelte-1wtojot">Loading...</span> <div class="bg-base-100 rounded-md max-w-[100%]" style="${"height:"+p(l,!0)+"; margin-top: 15px; margin-bottom: 31px;"}"></div></div>`}),mo={code:"@media print{.chart.svelte-19r8f8{-moz-column-break-inside:avoid;break-inside:avoid}.chart-container.svelte-19r8f8{padding:0}}.chart.svelte-19r8f8{-moz-user-select:none;-webkit-user-select:none;-o-user-select:none;user-select:none}.chart-footer.svelte-19r8f8{display:flex;justify-content:flex-end;align-items:center;margin:3px 12px;font-size:12px;height:9px}",map:`{"version":3,"file":"ECharts.svelte","sources":["ECharts.svelte"],"sourcesContent":["<script context=\\"module\\">\\n\\texport const evidenceInclude = true;\\n<\/script>\\n\\n<script>\\n\\timport { browser } from '$app/environment';\\n\\timport echarts from '@evidence-dev/component-utilities/echarts';\\n\\timport echartsCanvasDownload from '@evidence-dev/component-utilities/echartsCanvasDownload';\\n\\timport EChartsCopyTarget from './EChartsCopyTarget.svelte';\\n\\timport DownloadData from '../../ui/DownloadData.svelte';\\n\\timport CodeBlock from '../../ui/CodeBlock.svelte';\\n\\timport ChartLoading from '../../ui/ChartLoading.svelte';\\n\\timport { flush } from 'svelte/internal';\\n\\timport { createEventDispatcher } from 'svelte';\\n\\timport { getThemeStores } from '../../../themes/themes.js';\\n\\n\\tconst { activeAppearance, theme, resolveColorsObject } = getThemeStores();\\n\\n\\texport let config = undefined;\\n\\n\\texport let queryID = undefined;\\n\\texport let evidenceChartTitle = undefined;\\n\\n\\texport let height = '291px';\\n\\texport let width = '100%';\\n\\n\\texport let data;\\n\\n\\texport let renderer = undefined;\\n\\texport let downloadableData = undefined;\\n\\texport let downloadableImage = undefined;\\n\\texport let echartsOptions = undefined;\\n\\texport let seriesOptions = undefined;\\n\\texport let printEchartsConfig; // helper for custom chart development\\n\\n\\texport let seriesColors = undefined;\\n\\t$: seriesColorsStore = resolveColorsObject(seriesColors);\\n\\n\\texport let connectGroup = undefined;\\n\\n\\tconst dispatch = createEventDispatcher();\\n\\n\\tlet downloadChart = false;\\n\\tlet copying = false;\\n\\tlet printing = false;\\n\\tlet hovering = false;\\n<\/script>\\n\\n<svelte:window\\n\\ton:copy={() => {\\n\\t\\tcopying = true;\\n\\t\\tflush();\\n\\t\\tsetTimeout(() => {\\n\\t\\t\\tcopying = false;\\n\\t\\t}, 0);\\n\\t}}\\n\\ton:beforeprint={() => (printing = true)}\\n\\ton:afterprint={() => (printing = false)}\\n\\ton:export-beforeprint={() => (printing = true)}\\n\\ton:export-afterprint={() => (printing = false)}\\n/>\\n\\n<div\\n\\trole=\\"none\\"\\n\\tclass=\\"chart-container\\"\\n\\ton:mouseenter={() => (hovering = true)}\\n\\ton:mouseleave={() => (hovering = false)}\\n>\\n\\t{#if !printing}\\n\\t\\t{#if !browser}\\n\\t\\t\\t<ChartLoading {height} />\\n\\t\\t{:else}\\n\\t\\t\\t<div\\n\\t\\t\\t\\tclass=\\"chart\\"\\n\\t\\t\\t\\tstyle=\\"\\n\\t\\t\\t\\theight: {height};\\n\\t\\t\\t\\twidth: {width};\\n\\t\\t\\t\\tmargin-left: 0;\\n\\t\\t\\t\\tmargin-top: 15px;\\n\\t\\t\\t\\tmargin-bottom: 10px;\\n\\t\\t\\t\\toverflow: visible;\\n\\t\\t\\t\\tdisplay: {copying ? 'none' : 'inherit'}\\n\\t\\t\\t\\"\\n\\t\\t\\t\\tuse:echarts={{\\n\\t\\t\\t\\t\\tconfig,\\n\\t\\t\\t\\t\\t...$$restProps,\\n\\t\\t\\t\\t\\techartsOptions,\\n\\t\\t\\t\\t\\tseriesOptions,\\n\\t\\t\\t\\t\\tdispatch,\\n\\t\\t\\t\\t\\trenderer,\\n\\t\\t\\t\\t\\tconnectGroup,\\n\\t\\t\\t\\t\\tseriesColors: $seriesColorsStore,\\n\\t\\t\\t\\t\\ttheme: $activeAppearance\\n\\t\\t\\t\\t}}\\n\\t\\t\\t/>\\n\\t\\t{/if}\\n\\t{/if}\\n\\n\\t<EChartsCopyTarget\\n\\t\\t{config}\\n\\t\\t{height}\\n\\t\\t{width}\\n\\t\\t{copying}\\n\\t\\t{printing}\\n\\t\\t{echartsOptions}\\n\\t\\t{seriesOptions}\\n\\t\\tseriesColors={seriesColorsStore}\\n\\t/>\\n\\n\\t{#if downloadableData || downloadableImage}\\n\\t\\t<div class=\\"chart-footer\\">\\n\\t\\t\\t{#if downloadableImage}\\n\\t\\t\\t\\t<DownloadData\\n\\t\\t\\t\\t\\ttext=\\"Save Image\\"\\n\\t\\t\\t\\t\\tclass=\\"download-button\\"\\n\\t\\t\\t\\t\\tdownloadData={() => {\\n\\t\\t\\t\\t\\t\\tdownloadChart = true;\\n\\t\\t\\t\\t\\t\\tsetTimeout(() => {\\n\\t\\t\\t\\t\\t\\t\\tdownloadChart = false;\\n\\t\\t\\t\\t\\t\\t}, 0);\\n\\t\\t\\t\\t\\t}}\\n\\t\\t\\t\\t\\tdisplay={hovering}\\n\\t\\t\\t\\t\\t{queryID}\\n\\t\\t\\t\\t>\\n\\t\\t\\t\\t\\t<svg\\n\\t\\t\\t\\t\\t\\txmlns=\\"http://www.w3.org/2000/svg\\"\\n\\t\\t\\t\\t\\t\\twidth=\\"12\\"\\n\\t\\t\\t\\t\\t\\theight=\\"12\\"\\n\\t\\t\\t\\t\\t\\tviewBox=\\"0 0 24 24\\"\\n\\t\\t\\t\\t\\t\\tfill=\\"none\\"\\n\\t\\t\\t\\t\\t\\tstroke=\\"#000\\"\\n\\t\\t\\t\\t\\t\\tstroke-width=\\"2\\"\\n\\t\\t\\t\\t\\t\\tstroke-linecap=\\"round\\"\\n\\t\\t\\t\\t\\t\\tstroke-linejoin=\\"round\\"\\n\\t\\t\\t\\t\\t>\\n\\t\\t\\t\\t\\t\\t<rect x=\\"3\\" y=\\"3\\" width=\\"18\\" height=\\"18\\" rx=\\"2\\" />\\n\\t\\t\\t\\t\\t\\t<circle cx=\\"8.5\\" cy=\\"8.5\\" r=\\"1.5\\" />\\n\\t\\t\\t\\t\\t\\t<path d=\\"M20.4 14.5L16 10 4 20\\" />\\n\\t\\t\\t\\t\\t</svg>\\n\\t\\t\\t\\t</DownloadData>\\n\\t\\t\\t{/if}\\n\\t\\t\\t{#if data && downloadableData}\\n\\t\\t\\t\\t<DownloadData\\n\\t\\t\\t\\t\\ttext=\\"Download Data\\"\\n\\t\\t\\t\\t\\t{data}\\n\\t\\t\\t\\t\\t{queryID}\\n\\t\\t\\t\\t\\tclass=\\"download-button\\"\\n\\t\\t\\t\\t\\tdisplay={hovering}\\n\\t\\t\\t\\t/>\\n\\t\\t\\t{/if}\\n\\t\\t</div>\\n\\t{/if}\\n\\n\\t{#if printEchartsConfig && !printing}\\n\\t\\t<CodeBlock source={JSON.stringify(config, undefined, 3)} copyToClipboard={true}>\\n\\t\\t\\t{JSON.stringify(config, undefined, 3)}\\n\\t\\t</CodeBlock>\\n\\t{/if}\\n</div>\\n\\n{#if downloadChart}\\n\\t<div\\n\\t\\tclass=\\"chart\\"\\n\\t\\tstyle=\\"\\n        display: none;\\n        visibility: visible;\\n        height: {height};\\n        width: 666px;\\n        margin-left: 0;\\n        margin-top: 15px;\\n        margin-bottom: 15px;\\n        overflow: visible;\\n    \\"\\n\\t\\tuse:echartsCanvasDownload={{\\n\\t\\t\\tconfig,\\n\\t\\t\\t...$$restProps,\\n\\t\\t\\techartsOptions,\\n\\t\\t\\tseriesOptions,\\n\\t\\t\\tseriesColors: $seriesColorsStore,\\n\\t\\t\\tqueryID,\\n\\t\\t\\tevidenceChartTitle,\\n\\t\\t\\ttheme: $activeAppearance,\\n\\t\\t\\tbackgroundColor: $theme.colors['base-100']\\n\\t\\t}}\\n\\t/>\\n{/if}\\n\\n<style>\\n\\t@media print {\\n\\t\\t.chart {\\n\\t\\t\\t-moz-column-break-inside: avoid;\\n\\t\\t\\tbreak-inside: avoid;\\n\\t\\t}\\n\\n\\t\\t.chart-container {\\n\\t\\t\\tpadding: 0;\\n\\t\\t}\\n\\t}\\n\\n\\t.chart {\\n\\t\\t-moz-user-select: none;\\n\\t\\t-webkit-user-select: none;\\n\\t\\t-o-user-select: none;\\n\\t\\tuser-select: none;\\n\\t}\\n\\n\\t.chart-footer {\\n\\t\\tdisplay: flex;\\n\\t\\tjustify-content: flex-end;\\n\\t\\talign-items: center;\\n\\t\\tmargin: 3px 12px;\\n\\t\\tfont-size: 12px;\\n\\t\\theight: 9px;\\n\\t}</style>\\n"],"names":[],"mappings":"AA4LC,OAAO,KAAM,CACZ,oBAAO,CACN,wBAAwB,CAAE,KAAK,CAC/B,YAAY,CAAE,KACf,CAEA,8BAAiB,CAChB,OAAO,CAAE,CACV,CACD,CAEA,oBAAO,CACN,gBAAgB,CAAE,IAAI,CACtB,mBAAmB,CAAE,IAAI,CACzB,cAAc,CAAE,IAAI,CACpB,WAAW,CAAE,IACd,CAEA,2BAAc,CACb,OAAO,CAAE,IAAI,CACb,eAAe,CAAE,QAAQ,CACzB,WAAW,CAAE,MAAM,CACnB,MAAM,CAAE,GAAG,CAAC,IAAI,CAChB,SAAS,CAAE,IAAI,CACf,MAAM,CAAE,GACT"}`},Pl=Y((a,e,t,o)=>{let l;xe(e,["config","queryID","evidenceChartTitle","height","width","data","renderer","downloadableData","downloadableImage","echartsOptions","seriesOptions","printEchartsConfig","seriesColors","connectGroup"]);let i=Pe,d=()=>(i(),i=H(l,h=>h),l),c,n;const{activeAppearance:y,theme:C,resolveColorsObject:f}=Ct();c=H(y,h=>h),n=H(C,h=>h);let{config:A=void 0}=e,{queryID:m=void 0}=e,{evidenceChartTitle:_=void 0}=e,{height:s="291px"}=e,{width:v="100%"}=e,{data:w}=e,{renderer:L=void 0}=e,{downloadableData:g=void 0}=e,{downloadableImage:E=void 0}=e,{echartsOptions:D=void 0}=e,{seriesOptions:T=void 0}=e,{printEchartsConfig:I}=e,{seriesColors:P=void 0}=e,{connectGroup:F=void 0}=e;Gl();let u=!1,r=!1,x=!1,S=!1;return e.config===void 0&&t.config&&A!==void 0&&t.config(A),e.queryID===void 0&&t.queryID&&m!==void 0&&t.queryID(m),e.evidenceChartTitle===void 0&&t.evidenceChartTitle&&_!==void 0&&t.evidenceChartTitle(_),e.height===void 0&&t.height&&s!==void 0&&t.height(s),e.width===void 0&&t.width&&v!==void 0&&t.width(v),e.data===void 0&&t.data&&w!==void 0&&t.data(w),e.renderer===void 0&&t.renderer&&L!==void 0&&t.renderer(L),e.downloadableData===void 0&&t.downloadableData&&g!==void 0&&t.downloadableData(g),e.downloadableImage===void 0&&t.downloadableImage&&E!==void 0&&t.downloadableImage(E),e.echartsOptions===void 0&&t.echartsOptions&&D!==void 0&&t.echartsOptions(D),e.seriesOptions===void 0&&t.seriesOptions&&T!==void 0&&t.seriesOptions(T),e.printEchartsConfig===void 0&&t.printEchartsConfig&&I!==void 0&&t.printEchartsConfig(I),e.seriesColors===void 0&&t.seriesColors&&P!==void 0&&t.seriesColors(P),e.connectGroup===void 0&&t.connectGroup&&F!==void 0&&t.connectGroup(F),a.css.add(mo),d(l=f(P)),i(),c(),n(),` <div role="none" class="chart-container svelte-19r8f8">${`${`${M(vo,"ChartLoading").$$render(a,{height:s},{},{})}`}`} ${M(fo,"EChartsCopyTarget").$$render(a,{config:A,height:s,width:v,copying:r,printing:x,echartsOptions:D,seriesOptions:T,seriesColors:l},{},{})} ${g||E?`<div class="chart-footer svelte-19r8f8">${E?`${M(al,"DownloadData").$$render(a,{text:"Save Image",class:"download-button",downloadData:()=>{u=!0,setTimeout(()=>{u=!1},0)},display:S,queryID:m},{},{default:()=>'<svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="#000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="18" height="18" rx="2"></rect><circle cx="8.5" cy="8.5" r="1.5"></circle><path d="M20.4 14.5L16 10 4 20"></path></svg>'})}`:""} ${w&&g?`${M(al,"DownloadData").$$render(a,{text:"Download Data",data:w,queryID:m,class:"download-button",display:S},{},{})}`:""}</div>`:""} ${I&&!x?`${M(Di,"CodeBlock").$$render(a,{source:JSON.stringify(A,void 0,3),copyToClipboard:!0},{},{default:()=>`${p(JSON.stringify(A,void 0,3))}`})}`:""}</div> ${u?`<div class="chart svelte-19r8f8" style="${"display: none; visibility: visible; height: "+p(s,!0)+"; width: 666px; margin-left: 0; margin-top: 15px; margin-bottom: 15px; overflow: visible;"}"></div>`:""}`});function Mt(a,e){const t=new Set(a.map(o=>o[e]));return Array.from(t)}function ho(a,e){return rt(a,Li({count:bi(e)}))[0].count}function yo(a,e,t){let o;if(typeof t!="object")o=rt(a,_a(e,dl({xTotal:Aa(t)})),ha({percentOfX:sl(t,"xTotal")}),ul({percentOfX:t+"_pct"}));else{o=rt(a,ha({valueSum:0}));for(let l=0;l<o.length;l++){o[l].valueSum=0;for(let i=0;i<t.length;i++)o[l].valueSum=o[l].valueSum+o[l][t[i]]}o=rt(o,_a(e,dl({xTotal:Aa("valueSum")})));for(let l=0;l<t.length;l++)o=rt(o,ha({percentOfX:sl(t[l],"xTotal")}),ul({percentOfX:t[l]+"_pct"}))}return o}function kt(a,e,t){return[...a].sort((o,l)=>(o[e]<l[e]?-1:1)*(t?1:-1))}function Bl(a,e,t){const o=e+t;return a%o<e?0:1}const Co=Y((a,e,t,o)=>{let l,i,d,c,n,y=Pe,C=()=>(y(),y=H(d,Te=>n=Te),d),f,A,m,_=Pe,s=()=>(_(),_=H(i,Te=>m=Te),i),v,w=Pe,L=()=>(w(),w=H(l,Te=>v=Te),l),g,E,D=Kt({}),T=Kt({});E=H(T,Te=>g=Te);const{theme:I,resolveColor:P,resolveColorsObject:F,resolveColorPalette:u}=Ct();A=H(I,Te=>f=Te);let{data:r=void 0}=e,{queryID:x=void 0}=e,{x:S=void 0}=e,{y:h=void 0}=e,{y2:O=void 0}=e,{series:G=void 0}=e,{size:z=void 0}=e,{tooltipTitle:V=void 0}=e,{showAllXAxisLabels:N=!1}=e,{printEchartsConfig:te=!1}=e,ie=!!h,we=!!S,{swapXY:k=!1}=e,{title:se=void 0}=e,{subtitle:Oe=void 0}=e,{chartType:ue="Chart"}=e,{bubble:ce=!1}=e,{hist:fe=!1}=e,{boxplot:_e=!1}=e,me,{xType:X=void 0}=e,{xAxisTitle:oe="false"}=e,{xBaseline:ae=!0}=e,{xTickMarks:J=!1}=e,{xGridlines:$=!1}=e,{xAxisLabels:U=!0}=e,{sort:le=!0}=e,{xFmt:ee=void 0}=e,{xMin:Ae=void 0}=e,{xMax:R=void 0}=e,{yLog:K=!1}=e,{yType:Ce=K===!0?"log":"value"}=e,{yLogBase:he=10}=e,{yAxisTitle:re="false"}=e,{yBaseline:ne=!1}=e,{yTickMarks:b=!1}=e,{yGridlines:j=!0}=e,{yAxisLabels:W=!0}=e,{yMin:Ee=void 0}=e,{yMax:Fe=void 0}=e,{yScale:Le=!1}=e,{yFmt:Re=void 0}=e,{yAxisColor:He="true"}=e,{y2AxisTitle:ge="false"}=e,{y2Baseline:q=!1}=e,{y2TickMarks:ve=!1}=e,{y2Gridlines:be=!0}=e,{y2AxisLabels:Me=!0}=e,{y2Min:We=void 0}=e,{y2Max:pe=void 0}=e,{y2Scale:Ge=!1}=e,{y2Fmt:Ve=void 0}=e,{y2AxisColor:$e="true"}=e,{sizeFmt:Qe=void 0}=e,{colorPalette:et="default"}=e,{legend:ke=void 0}=e,{echartsOptions:tt=void 0}=e,{seriesOptions:at=void 0}=e,{seriesColors:lt=void 0}=e,{stackType:it=void 0}=e,{stacked100:xt=!1}=e,{chartAreaHeight:Ne}=e,{renderer:ea=void 0}=e,{downloadableData:dt=!0}=e,{downloadableImage:st=!0}=e,{connectGroup:ta=void 0}=e,Z,aa,la=[],_t=[],Ta,Pt,Ue,Ea,Ye,De,Xe,ia,La,Bt,oa,ba,ra,At,ka,Da,Rt,wt,Fa,Ma,Ia,Pa,Ba,Ra,Ga,Na,ja,za,Ha,St,Gt,Nt,na,da,Va,Ua,Ot,Ya,qa,sa,Wa,ua,ut=[],gt=!0,Ke=[],jt=[],Je,Tt,Qa,ct;e.data===void 0&&t.data&&r!==void 0&&t.data(r),e.queryID===void 0&&t.queryID&&x!==void 0&&t.queryID(x),e.x===void 0&&t.x&&S!==void 0&&t.x(S),e.y===void 0&&t.y&&h!==void 0&&t.y(h),e.y2===void 0&&t.y2&&O!==void 0&&t.y2(O),e.series===void 0&&t.series&&G!==void 0&&t.series(G),e.size===void 0&&t.size&&z!==void 0&&t.size(z),e.tooltipTitle===void 0&&t.tooltipTitle&&V!==void 0&&t.tooltipTitle(V),e.showAllXAxisLabels===void 0&&t.showAllXAxisLabels&&N!==void 0&&t.showAllXAxisLabels(N),e.printEchartsConfig===void 0&&t.printEchartsConfig&&te!==void 0&&t.printEchartsConfig(te),e.swapXY===void 0&&t.swapXY&&k!==void 0&&t.swapXY(k),e.title===void 0&&t.title&&se!==void 0&&t.title(se),e.subtitle===void 0&&t.subtitle&&Oe!==void 0&&t.subtitle(Oe),e.chartType===void 0&&t.chartType&&ue!==void 0&&t.chartType(ue),e.bubble===void 0&&t.bubble&&ce!==void 0&&t.bubble(ce),e.hist===void 0&&t.hist&&fe!==void 0&&t.hist(fe),e.boxplot===void 0&&t.boxplot&&_e!==void 0&&t.boxplot(_e),e.xType===void 0&&t.xType&&X!==void 0&&t.xType(X),e.xAxisTitle===void 0&&t.xAxisTitle&&oe!==void 0&&t.xAxisTitle(oe),e.xBaseline===void 0&&t.xBaseline&&ae!==void 0&&t.xBaseline(ae),e.xTickMarks===void 0&&t.xTickMarks&&J!==void 0&&t.xTickMarks(J),e.xGridlines===void 0&&t.xGridlines&&$!==void 0&&t.xGridlines($),e.xAxisLabels===void 0&&t.xAxisLabels&&U!==void 0&&t.xAxisLabels(U),e.sort===void 0&&t.sort&&le!==void 0&&t.sort(le),e.xFmt===void 0&&t.xFmt&&ee!==void 0&&t.xFmt(ee),e.xMin===void 0&&t.xMin&&Ae!==void 0&&t.xMin(Ae),e.xMax===void 0&&t.xMax&&R!==void 0&&t.xMax(R),e.yLog===void 0&&t.yLog&&K!==void 0&&t.yLog(K),e.yType===void 0&&t.yType&&Ce!==void 0&&t.yType(Ce),e.yLogBase===void 0&&t.yLogBase&&he!==void 0&&t.yLogBase(he),e.yAxisTitle===void 0&&t.yAxisTitle&&re!==void 0&&t.yAxisTitle(re),e.yBaseline===void 0&&t.yBaseline&&ne!==void 0&&t.yBaseline(ne),e.yTickMarks===void 0&&t.yTickMarks&&b!==void 0&&t.yTickMarks(b),e.yGridlines===void 0&&t.yGridlines&&j!==void 0&&t.yGridlines(j),e.yAxisLabels===void 0&&t.yAxisLabels&&W!==void 0&&t.yAxisLabels(W),e.yMin===void 0&&t.yMin&&Ee!==void 0&&t.yMin(Ee),e.yMax===void 0&&t.yMax&&Fe!==void 0&&t.yMax(Fe),e.yScale===void 0&&t.yScale&&Le!==void 0&&t.yScale(Le),e.yFmt===void 0&&t.yFmt&&Re!==void 0&&t.yFmt(Re),e.yAxisColor===void 0&&t.yAxisColor&&He!==void 0&&t.yAxisColor(He),e.y2AxisTitle===void 0&&t.y2AxisTitle&&ge!==void 0&&t.y2AxisTitle(ge),e.y2Baseline===void 0&&t.y2Baseline&&q!==void 0&&t.y2Baseline(q),e.y2TickMarks===void 0&&t.y2TickMarks&&ve!==void 0&&t.y2TickMarks(ve),e.y2Gridlines===void 0&&t.y2Gridlines&&be!==void 0&&t.y2Gridlines(be),e.y2AxisLabels===void 0&&t.y2AxisLabels&&Me!==void 0&&t.y2AxisLabels(Me),e.y2Min===void 0&&t.y2Min&&We!==void 0&&t.y2Min(We),e.y2Max===void 0&&t.y2Max&&pe!==void 0&&t.y2Max(pe),e.y2Scale===void 0&&t.y2Scale&&Ge!==void 0&&t.y2Scale(Ge),e.y2Fmt===void 0&&t.y2Fmt&&Ve!==void 0&&t.y2Fmt(Ve),e.y2AxisColor===void 0&&t.y2AxisColor&&$e!==void 0&&t.y2AxisColor($e),e.sizeFmt===void 0&&t.sizeFmt&&Qe!==void 0&&t.sizeFmt(Qe),e.colorPalette===void 0&&t.colorPalette&&et!==void 0&&t.colorPalette(et),e.legend===void 0&&t.legend&&ke!==void 0&&t.legend(ke),e.echartsOptions===void 0&&t.echartsOptions&&tt!==void 0&&t.echartsOptions(tt),e.seriesOptions===void 0&&t.seriesOptions&&at!==void 0&&t.seriesOptions(at),e.seriesColors===void 0&&t.seriesColors&&lt!==void 0&&t.seriesColors(lt),e.stackType===void 0&&t.stackType&&it!==void 0&&t.stackType(it),e.stacked100===void 0&&t.stacked100&&xt!==void 0&&t.stacked100(xt),e.chartAreaHeight===void 0&&t.chartAreaHeight&&Ne!==void 0&&t.chartAreaHeight(Ne),e.renderer===void 0&&t.renderer&&ea!==void 0&&t.renderer(ea),e.downloadableData===void 0&&t.downloadableData&&dt!==void 0&&t.downloadableData(dt),e.downloadableImage===void 0&&t.downloadableImage&&st!==void 0&&t.downloadableImage(st),e.connectGroup===void 0&&t.connectGroup&&ta!==void 0&&t.connectGroup(ta),Dt(bl,D),Dt(kl,T),te=te==="true"||te===!0,k==="true"||k===!0?k=!0:k=!1,ae=ae==="true"||ae===!0,J=J==="true"||J===!0,$=$==="true"||$===!0,U=U==="true"||U===!0,le=le==="true"||le===!0,K=K==="true"||K===!0,ne=ne==="true"||ne===!0,b=b==="true"||b===!0,j=j==="true"||j===!0,W=W==="true"||W===!0,Le=Le==="true"||Le===!0,L(l=P(He)),q=q==="true"||q===!0,ve=ve==="true"||ve===!0,be=be==="true"||be===!0,Me=Me==="true"||Me===!0,Ge=Ge==="true"||Ge===!0,s(i=P($e)),C(d=u(et)),c=F(lt),dt=dt==="true"||dt===!0,st=st==="true"||st===!0;try{if(Tt=void 0,ut=[],_t=[],Ke=[],jt=[],Pt=[],ie=!!h,we=!!S,xa(r),Z=Qt(r),aa=Object.keys(Z),we||(S=aa[0]),!ie){la=aa.filter(function(B){return![S,G,z].includes(B)});for(let B=0;B<la.length;B++)Pt=la[B],Ta=Z[Pt].type,Ta==="number"&&_t.push(Pt);h=_t.length>1?_t:_t[0]}ce?me={x:S,y:h,size:z}:fe?me={x:S}:_e?me={}:me={x:S,y:h};for(let B in me)me[B]==null&&ut.push(B);if(ut.length===1)throw Error(new Intl.ListFormat().format(ut)+" is required");if(ut.length>1)throw Error(new Intl.ListFormat().format(ut)+" are required");if(xt===!0&&h.includes("_pct")&&gt===!1)if(typeof h=="object"){for(let B=0;B<h.length;B++)h[B]=h[B].replace("_pct","");gt=!1}else h=h.replace("_pct",""),gt=!1;if(S&&Ke.push(S),h)if(typeof h=="object")for(Je=0;Je<h.length;Je++)Ke.push(h[Je]);else Ke.push(h);if(O)if(typeof O=="object")for(Je=0;Je<O.length;Je++)Ke.push(O[Je]);else Ke.push(O);if(z&&Ke.push(z),G&&jt.push(G),V&&jt.push(V),xa(r,Ke,jt),xt===!0){if(r=yo(r,S,h),typeof h=="object"){for(let B=0;B<h.length;B++)h[B]=h[B]+"_pct";gt=!1}else h=h+"_pct",gt=!1;Z=Qt(r)}switch(Ue=Z[S].type,Ue){case"number":Ue="value";break;case"string":Ue="category";break;case"date":Ue="time";break;default:break}if(X=X==="category"?"category":Ue,k&&X!=="category")throw Error("Horizontal charts do not support a value or time-based x-axis. You can either change your SQL query to output string values or set swapXY=false.");if(k&&O)throw Error("Horizontal charts do not support a secondary y-axis. You can either set swapXY=false or remove the y2 prop from your chart.");if(k&&(X="category"),Ea=Ue==="value"&&X==="category",r=le?Ue==="category"?kt(r,h,!1):kt(r,S,!0):r,Ue==="time"&&(r=kt(r,S,!0)),Qa=Qt(r,"array"),ct=Qa.filter(B=>B.type==="date"),ct=ct.map(B=>B.id),ct.length>0)for(let B=0;B<ct.length;B++)r=si(r,ct[B]);ee?Ye=ze(ee,Z[S].format?.valueType):Ye=Z[S].format,h?Re?typeof h=="object"?De=ze(Re,Z[h[0]].format?.valueType):De=ze(Re,Z[h].format?.valueType):typeof h=="object"?De=Z[h[0]].format:De=Z[h].format:De="str",O&&(Ve?typeof O=="object"?Xe=ze(Ve,Z[O[0]].format?.valueType):Xe=ze(Ve,Z[O].format?.valueType):typeof O=="object"?Xe=Z[O[0]].format:Xe=Z[O].format),z&&(Qe?ia=ze(Qe,Z[z].format?.valueType):ia=Z[z].format),La=Z[S].columnUnitSummary,h&&(typeof h=="object"?Bt=Z[h[0]].columnUnitSummary:Bt=Z[h].columnUnitSummary),O&&(typeof O=="object"?oa=Z[O[0]].columnUnitSummary:oa=Z[O].columnUnitSummary),oe=oe==="true"?je(S,Ye):oe==="false"?"":oe,re=re==="true"?typeof h=="object"?"":je(h,De):re==="false"?"":re,ge=ge==="true"?typeof O=="object"?"":je(O,Xe):ge==="false"?"":ge;let Te=typeof h=="object"?h.length:1,Xa=G?ho(r,G):1,Et=Te*Xa,ca=typeof O=="object"?O.length:O?1:0,fa=Et+ca;if(ke!==void 0&&(ke=ke==="true"||ke===!0),ke=ke??fa>1,xt===!0&&K===!0)throw Error("Log axis cannot be used in a 100% stacked chart");if(it==="stacked"&&fa>1&&K===!0)throw Error("Log axis cannot be used in a stacked chart");let ft;if(typeof h=="object"){ft=Z[h[0]].columnUnitSummary.min;for(let B=0;B<h.length;B++)Z[h[B]].columnUnitSummary.min<ft&&(ft=Z[h[B]].columnUnitSummary.min)}else h&&(ft=Z[h].columnUnitSummary.min);if(K===!0&&ft<=0&&ft!==null)throw Error("Log axis cannot display values less than or equal to zero");D.update(B=>({...B,data:r,x:S,y:h,y2:O,series:G,swapXY:k,sort:le,xType:X,xFormat:Ye,yFormat:De,y2Format:Xe,sizeFormat:ia,xMismatch:Ea,size:z,yMin:Ee,y2Min:We,columnSummary:Z,xAxisTitle:oe,yAxisTitle:re,y2AxisTitle:ge,tooltipTitle:V,chartAreaHeight:Ne,chartType:ue,yCount:Te,y2Count:ca})),ba=Mt(r,S);let Ka;if(k?ra={type:Ce,logBase:he,position:"top",axisLabel:{show:W,hideOverlap:!0,showMaxLabel:!0,formatter(B){return Yt(B,De,Bt)},margin:4},min:Ee,max:Fe,scale:Le,splitLine:{show:j},axisLine:{show:ne,onZero:!1},axisTick:{show:b},boundaryGap:!1,z:2}:ra={type:X,min:Ae,max:R,splitLine:{show:$},axisLine:{show:ae},axisTick:{show:J},axisLabel:{show:U,hideOverlap:!0,showMaxLabel:X==="category"||X==="value",formatter:X==="time"||X==="category"?!1:function(B){return Yt(B,Ye,La)},margin:6},scale:!0,z:2},k?At={type:X,inverse:"true",splitLine:{show:$},axisLine:{show:ae},axisTick:{show:J},axisLabel:{show:U,hideOverlap:!0},scale:!0,min:Ae,max:R,z:2}:(At={type:Ce,logBase:he,splitLine:{show:j},axisLine:{show:ne,onZero:!1},axisTick:{show:b},axisLabel:{show:W,hideOverlap:!0,margin:4,formatter(B){return Yt(B,De,Bt)},color:O?v==="true"?n[0]:v!=="false"?v:void 0:void 0},name:re,nameLocation:"end",nameTextStyle:{align:"left",verticalAlign:"top",padding:[0,5,0,0],color:O?v==="true"?n[0]:v!=="false"?v:void 0:void 0},nameGap:6,min:Ee,max:Fe,scale:Le,boundaryGap:["0%","1%"],z:2},Ka={type:"value",show:!1,alignTicks:!0,splitLine:{show:be},axisLine:{show:q,onZero:!1},axisTick:{show:ve},axisLabel:{show:Me,hideOverlap:!0,margin:4,formatter(B){return Yt(B,Xe,oa)},color:m==="true"?n[Et]:m!=="false"?m:void 0},name:ge,nameLocation:"end",nameTextStyle:{align:"right",verticalAlign:"top",padding:[0,0,0,5],color:m==="true"?n[Et]:m!=="false"?m:void 0},nameGap:6,min:We,max:pe,scale:Ge,boundaryGap:["0%","1%"],z:2},At=[At,Ka]),Ne){if(Ne=Number(Ne),isNaN(Ne))throw Error("chartAreaHeight must be a number");if(Ne<=0)throw Error("chartAreaHeight must be a positive number")}else Ne=180;Rt=!!se,wt=!!Oe,Fa=ke*(G!==null||typeof h=="object"&&h.length>1),Ma=re!==""&&k,Ia=oe!==""&&!k,Pa=15,Ba=13,Ra=6*wt,Ga=Rt*Pa+wt*Ba+Ra*Math.max(Rt,wt),Na=10,ja=8,za=14,Ha=14,St=15,St=St*Fa,Gt=7,Gt=Gt*Math.max(Rt,wt),Nt=Ga+Gt,na=Nt+St+Ha*Ma+Na,da=Ia*za+ja,Ya=8,sa=1,k&&(qa=ba.length,sa=Math.max(1,qa/Ya)),Va=Ne*sa+na+da,Ua=Nt+St+7,Wa=Va+"px",ua="100%",Ot=k?re:oe,Ot!==""&&(Ot=Ot+" →"),ka={id:"horiz-axis-title",type:"text",style:{text:Ot,textAlign:"right",fill:f.colors["base-content-muted"]},cursor:"auto",right:k?"2%":"3%",top:k?Ua:null,bottom:k?null:"2%"},Da={title:{text:se,subtext:Oe,subtextStyle:{width:ua}},tooltip:{trigger:"axis",formatter(B){let vt,mt,ht,zt;if(fa>1){mt=B[0].value[k?1:0],vt=`<span id="tooltip" style='font-weight: 600;'>${Ie(mt,Ye)}</span>`;for(let ot=B.length-1;ot>=0;ot--)B[ot].seriesName!=="stackTotal"&&(ht=B[ot].value[k?0:1],vt=vt+`<br> <span style='font-size: 11px;'>${B[ot].marker} ${B[ot].seriesName}<span/><span style='float:right; margin-left: 10px; font-size: 12px;'>${Ie(ht,Bl(B[ot].componentIndex,Te,ca)===0?De:Xe)}</span>`)}else X==="value"?(mt=B[0].value[k?1:0],ht=B[0].value[k?0:1],zt=B[0].seriesName,vt=`<span id="tooltip" style='font-weight: 600;'>${je(S,Ye)}: </span><span style='float:right; margin-left: 10px;'>${Ie(mt,Ye)}</span><br/><span style='font-weight: 600;'>${je(zt,De)}: </span><span style='float:right; margin-left: 10px;'>${Ie(ht,De)}</span>`):(mt=B[0].value[k?1:0],ht=B[0].value[k?0:1],zt=B[0].seriesName,vt=`<span id="tooltip" style='font-weight: 600;'>${Ie(mt,Ye)}</span><br/><span>${je(zt,De)}: </span><span style='float:right; margin-left: 10px;'>${Ie(ht,De)}</span>`);return vt},confine:!0,axisPointer:{type:"shadow"},extraCssText:'box-shadow: 0 3px 6px rgba(0,0,0,.15); box-shadow: 0 2px 4px rgba(0,0,0,.12); z-index: 1; font-feature-settings: "cv02", "tnum";',order:"valueDesc"},legend:{show:ke,type:"scroll",top:Nt,padding:[0,0,0,0],data:[]},grid:{left:"0.5%",right:k?"4%":"3%",bottom:da,top:na,containLabel:!0},xAxis:ra,yAxis:At,series:[],animation:!0,graphic:ka,color:n},T.update(()=>Da)}catch(Te){Tt=Te.message,console.error("\x1B[31m%s\x1B[0m",`Error in ${ue}: ${Te.message}`),D.update(Et=>({...Et,error:Tt}))}return y(),A(),_(),w(),E(),`${Tt?`${M($t,"ErrorChart").$$render(a,{error:Tt,title:ue},{},{})}`:`${o.default?o.default({}):""} ${M(Pl,"ECharts").$$render(a,{config:g,height:Wa,width:ua,data:r,queryID:x,evidenceChartTitle:se,showAllXAxisLabels:N,swapXY:k,echartsOptions:tt,seriesOptions:at,printEchartsConfig:te,renderer:ea,downloadableData:dt,downloadableImage:st,connectGroup:ta,seriesColors:c},{},{})}`}`}),{Object:xo}=gl,_o=Y((a,e,t,o)=>{let l,{data:i}=e;const d=qe.isQuery(i)?i.hash:void 0;let c=i?.hash===d,{emptySet:n=void 0}=e,{emptyMessage:y=void 0}=e,C=i?.id;return e.data===void 0&&t.data&&i!==void 0&&t.data(i),e.emptySet===void 0&&t.emptySet&&n!==void 0&&t.emptySet(n),e.emptyMessage===void 0&&t.emptyMessage&&y!==void 0&&t.emptyMessage(y),c=i?.hash===d,l={...Object.fromEntries(Object.entries(e).filter(([,f])=>f!==void 0))},` ${M(Sl,"QueryLoad").$$render(a,{data:i},{},{error:({loaded:f})=>`${M($t,"ErrorChart").$$render(a,{slot:"error",title:l.chartType,error:f.error.message},{},{})}`,empty:()=>`${M(Ol,"EmptyChart").$$render(a,{slot:"empty",emptyMessage:y,emptySet:n,chartType:l.chartType,isInitial:c},{},{})}`,default:({loaded:f})=>`${M(Co,"Chart").$$render(a,xo.assign({},l,{data:qe.isQuery(f)?Array.from(f):f},{queryID:C}),{},{default:()=>`${o.default?o.default({}):""}`})}`})}`});function Ao(a,e,t,o,l,i,d,c,n,y,C=void 0,f=void 0,A=void 0,m=void 0){function _(u,r,x,S){let h={name:r,data:u,yAxisIndex:x};return h={...S,...h},h}let s,v,w,L=[],g,E,D,T,I;function P(u,r){const x=[];function S(O){return typeof O>"u"}function h(O,G){S(O)||(Array.isArray(O)?O.forEach(z=>x.push([z,G])):x.push([O,G]))}return h(u,0),h(r,1),x}let F=P(t,A);if(o!=null&&F.length===1)for(T=Mt(a,o),s=0;s<T.length;s++){if(E=a.filter(u=>u[o]===T[s]),l?g=E.map(u=>[u[F[0][0]],c?u[e].toString():u[e]]):g=E.map(u=>[c?u[e].toString():u[e],u[F[0][0]]]),C){let u=E.map(r=>r[C]);g.forEach((r,x)=>r.push(u[x]))}if(f){let u=E.map(r=>r[f]);g.forEach((r,x)=>r.push(u[x]))}D=T[s]??"null",I=F[0][1],w=_(g,D,I,i),L.push(w)}if(o!=null&&F.length>1)for(T=Mt(a,o),s=0;s<T.length;s++)for(E=a.filter(u=>u[o]===T[s]),v=0;v<F.length;v++){if(l?g=E.map(u=>[u[F[v][0]],c?u[e].toString():u[e]]):g=E.map(u=>[c?u[e].toString():u[e],u[F[v][0]]]),C){let u=E.map(r=>r[C]);g.forEach((r,x)=>r.push(u[x]))}if(f){let u=E.map(r=>r[f]);g.forEach((r,x)=>r.push(u[x]))}D=(T[s]??"null")+" - "+n[F[v][0]].title,I=F[v][1],w=_(g,D,I,i),L.push(w)}if(o==null&&F.length>1)for(s=0;s<F.length;s++){if(l?g=a.map(u=>[u[F[s][0]],c?u[e].toString():u[e]]):g=a.map(u=>[c?u[e].toString():u[e],u[F[s][0]]]),C){let u=a.map(r=>r[C]);g.forEach((r,x)=>r.push(u[x]))}if(f){let u=a.map(r=>r[f]);g.forEach((r,x)=>r.push(u[x]))}D=n[F[s][0]].title,I=F[s][1],w=_(g,D,I,i),L.push(w)}if(o==null&&F.length===1){if(l?g=a.map(u=>[u[F[0][0]],c?u[e].toString():u[e]]):g=a.map(u=>[c?u[e].toString():u[e],u[F[0][0]]]),C){let u=a.map(r=>r[C]);g.forEach((r,x)=>r.push(u[x]))}if(f){let u=a.map(r=>r[f]);g.forEach((r,x)=>r.push(u[x]))}D=n[F[0][0]].title,I=F[0][1],w=_(g,D,I,i),L.push(w)}return y&&L.sort((u,r)=>y.indexOf(u.name)-y.indexOf(r.name)),m&&L.forEach(u=>{u.name=ui(u.name,m)}),L}function wo(a){let e=[];for(let t=1;t<a.length;t++)e.push(a[t]-a[t-1]);return e}function Rl(a,e){return(typeof a!="number"||isNaN(a))&&(a=0),(typeof e!="number"||isNaN(e))&&(e=0),a=Math.abs(a),e=Math.abs(e),e<=.01?a:Rl(e,a%e)}function So(a,e){if(!Array.isArray(a))throw new TypeError("Cannot calculate extent of non-array value.");let t,o;for(const l of a)typeof l=="number"&&(t===void 0?l>=l&&(t=o=l):(t>l&&(t=l),o<l&&(o=l)));return[t,o]}function Oo(a,e){let[t,o]=So(a);const l=[];let i=t;for(;i<=o;)l.push(Math.round((i+Number.EPSILON)*1e8)/1e8),i+=e;return l}function go(a){if(a.length<=1)return;a.sort(function(t,o){return t-o}),a=a.map(function(t){return t*1e8}),a=wo(a);let e=a.reduce((t,o)=>Rl(t,o))/1e8;return e=Math.round((e+Number.EPSILON)*1e8)/1e8,e}function Ca(a,e,t,o,l=!1,i=!1){let d=!1;const c=a.map(m=>Object.assign({},m,{[e]:m[e]instanceof Date?(d=!0,m[e].toISOString()):m[e]})).filter(m=>m[e]!==void 0&&m[e]!==null),n=Array.from(c).reduce((m,_)=>(_[e]instanceof Date&&(_[e]=_[e].toISOString(),d=!0),o?(m[_[o]??"null"]||(m[_[o]??"null"]=[]),m[_[o]??"null"].push(_)):(m.default||(m.default=[]),m.default.push(_)),m),{}),y={};let C;const f=c.find(m=>m&&m[e]!==null&&m[e]!==void 0)?.[e]??null;switch(typeof f){case"object":throw f===null?new Error(`Column '${e}' is entirely null. Column must contain at least one non-null value.`):new Error("Unexpected object property, expected string, date, or number");case"number":if(C=Mt(c,e),i){const m=go(C);y[e]=Oo(C,m)}break;case"string":C=Mt(c,e),y[e]=C;break}const A=[];for(const m of Object.values(n)){const _=o?{[o]:null}:{};if(l)if(t instanceof Array)for(let v=0;v<t.length;v++)_[t[v]]=0;else _[t]=0;else if(t instanceof Array)for(let v=0;v<t.length;v++)_[t[v]]=null;else _[t]=null;o&&(y[o]=o);const s=[];Object.keys(y).length===0?s.push(cl([e],_)):s.push(cl(y,_)),A.push(rt(m,...s))}return d?A.flat().map(m=>({...m,[e]:new Date(m[e])})):A.flat()}function yl(a,e,t){let o=rt(a,_a(e,[ki(t,Aa)]));if(typeof t=="object")for(let l=0;l<o.length;l++){o[l].stackTotal=0;for(let i=0;i<t.length;i++)o[l].stackTotal=o[l].stackTotal+o[l][t[i]]}return o}let To=60;const Eo=Y((a,e,t,o)=>{let l,i,d,c,n,y,C,f,A,m,_,s,v,w,L,g,E,D,T,I=Pe,P=()=>(I(),I=H(c,q=>T=q),c),F,u=Pe,r=()=>(u(),u=H(d,q=>F=q),d),x,S=Pe,h=()=>(S(),S=H(n,q=>x=q),n),O,G=Pe,z=()=>(G(),G=H(l,q=>O=q),l);const{resolveColor:V}=Ct();let{y:N=void 0}=e;const te=!!N;let{y2:ie=void 0}=e;const we=!!ie;let{series:k=void 0}=e;const se=!!k;let{options:Oe=void 0}=e,{name:ue=void 0}=e,{type:ce="stacked"}=e,{stackName:fe=void 0}=e,{fillColor:_e=void 0}=e,{fillOpacity:me=void 0}=e,{outlineColor:X=void 0}=e,{outlineWidth:oe=void 0}=e,{labels:ae=!1}=e,{seriesLabels:J=!0}=e,{labelSize:$=11}=e,{labelPosition:U=void 0}=e,{labelColor:le=void 0}=e,{labelFmt:ee=void 0}=e,Ae;ee&&(Ae=ze(ee));let{yLabelFmt:R=void 0}=e,K;R&&(K=ze(R));let{y2LabelFmt:Ce=void 0}=e,he;Ce&&(he=ze(Ce));let{y2SeriesType:re="bar"}=e,{stackTotalLabel:ne=!0}=e,{showAllLabels:b=!1}=e,{seriesOrder:j=void 0}=e,W,Ee,Fe,Le;const Re={outside:"top",inside:"inside"},He={outside:"right",inside:"inside"};let{seriesLabelFmt:ge=void 0}=e;return e.y===void 0&&t.y&&N!==void 0&&t.y(N),e.y2===void 0&&t.y2&&ie!==void 0&&t.y2(ie),e.series===void 0&&t.series&&k!==void 0&&t.series(k),e.options===void 0&&t.options&&Oe!==void 0&&t.options(Oe),e.name===void 0&&t.name&&ue!==void 0&&t.name(ue),e.type===void 0&&t.type&&ce!==void 0&&t.type(ce),e.stackName===void 0&&t.stackName&&fe!==void 0&&t.stackName(fe),e.fillColor===void 0&&t.fillColor&&_e!==void 0&&t.fillColor(_e),e.fillOpacity===void 0&&t.fillOpacity&&me!==void 0&&t.fillOpacity(me),e.outlineColor===void 0&&t.outlineColor&&X!==void 0&&t.outlineColor(X),e.outlineWidth===void 0&&t.outlineWidth&&oe!==void 0&&t.outlineWidth(oe),e.labels===void 0&&t.labels&&ae!==void 0&&t.labels(ae),e.seriesLabels===void 0&&t.seriesLabels&&J!==void 0&&t.seriesLabels(J),e.labelSize===void 0&&t.labelSize&&$!==void 0&&t.labelSize($),e.labelPosition===void 0&&t.labelPosition&&U!==void 0&&t.labelPosition(U),e.labelColor===void 0&&t.labelColor&&le!==void 0&&t.labelColor(le),e.labelFmt===void 0&&t.labelFmt&&ee!==void 0&&t.labelFmt(ee),e.yLabelFmt===void 0&&t.yLabelFmt&&R!==void 0&&t.yLabelFmt(R),e.y2LabelFmt===void 0&&t.y2LabelFmt&&Ce!==void 0&&t.y2LabelFmt(Ce),e.y2SeriesType===void 0&&t.y2SeriesType&&re!==void 0&&t.y2SeriesType(re),e.stackTotalLabel===void 0&&t.stackTotalLabel&&ne!==void 0&&t.stackTotalLabel(ne),e.showAllLabels===void 0&&t.showAllLabels&&b!==void 0&&t.showAllLabels(b),e.seriesOrder===void 0&&t.seriesOrder&&j!==void 0&&t.seriesOrder(j),e.seriesLabelFmt===void 0&&t.seriesLabelFmt&&ge!==void 0&&t.seriesLabelFmt(ge),z(l=Ft(bl)),i=Ft(kl),r(d=V(_e)),P(c=V(X)),ae=ae==="true"||ae===!0,J=J==="true"||J===!0,h(n=V(le)),ne=ne==="true"||ne===!0,y=O.data,C=O.x,N=te?N:O.y,ie=we?ie:O.y2,f=O.yFormat,A=O.y2Format,m=O.yCount,_=O.y2Count,s=O.swapXY,v=O.xType,w=O.xMismatch,L=O.columnSummary,g=O.sort,k=se?k:O.series,!k&&typeof N!="object"?(ue=ue??je(N,L[N].title),s&&v!=="category"&&(y=Ca(y,C,N,k,!0,v!=="time"),v="category"),fe="stack1",Fe=s?"right":"top"):(g===!0&&v==="category"&&(W=yl(y,C,N),typeof N=="object"?W=kt(W,"stackTotal",!1):W=kt(W,N,!1),Ee=W.map(q=>q[C]),y=[...y].sort(function(q,ve){return Ee.indexOf(q[C])-Ee.indexOf(ve[C])})),s||(v==="value"||v==="category")&&ce.includes("stacked")?(y=Ca(y,C,N,k,!0,v==="value"),v="category"):v==="time"&&ce.includes("stacked")&&(y=Ca(y,C,N,k,!0,!0)),ce.includes("stacked")?(fe=fe??"stack1",Fe="inside"):(fe=void 0,Fe=s?"right":"top")),ce==="stacked"&&(Le=yl(y,C,N)),U=(s?He[U]:Re[U])??Fe,E={type:"bar",stack:fe,label:{show:ae&&J,formatter(q){return q.value[s?0:1]===0?"":Ie(q.value[s?0:1],[K??Ae??f,he??Ae??A][Bl(q.componentIndex,m,_)])},position:U,fontSize:$,color:x},labelLayout:{hideOverlap:!b},emphasis:{focus:"series"},barMaxWidth:To,itemStyle:{color:F,opacity:me,borderColor:T,borderWidth:oe}},D=Ao(y,C,N,k,s,E,ue,w,L,j,void 0,void 0,ie,ge),i.update(q=>(q.series.push(...D),q.legend.data.push(...D.map(ve=>ve.name.toString())),ae===!0&&ce==="stacked"&&typeof N=="object"|k!==void 0&&ne===!0&&k!==C&&(q.series.push({type:"bar",stack:fe,name:"stackTotal",color:"none",data:Le.map(ve=>[s?0:w?ve[C].toString():ve[C],s?w?ve[C].toString():ve[C]:0]),label:{show:!0,position:s?"right":"top",formatter(ve){let be=0;return D.forEach(Me=>{be+=Me.data[ve.dataIndex][s?0:1]}),be===0?"":Ie(be,Ae??f)},fontWeight:"bold",fontSize:$,padding:s?[0,0,0,5]:void 0}}),q.legend.selectedMode=!1),q)),I(),u(),S(),G(),""}),Cl=Y((a,e,t,o)=>{let l,i,d,c,n,y,C;const{resolveColor:f,resolveColorsObject:A,resolveColorPalette:m}=Ct();let{data:_=void 0}=e,{x:s=void 0}=e,{y:v=void 0}=e,{y2:w=void 0}=e,{series:L=void 0}=e,{xType:g=void 0}=e,{yLog:E=void 0}=e,{yLogBase:D=void 0}=e,{y2SeriesType:T=void 0}=e,{yFmt:I=void 0}=e,{y2Fmt:P=void 0}=e,{xFmt:F=void 0}=e,{title:u=void 0}=e,{subtitle:r=void 0}=e,{legend:x=void 0}=e,{xAxisTitle:S=void 0}=e,{yAxisTitle:h=w?"true":void 0}=e,{y2AxisTitle:O=w?"true":void 0}=e,{xGridlines:G=void 0}=e,{yGridlines:z=void 0}=e,{y2Gridlines:V=void 0}=e,{xAxisLabels:N=void 0}=e,{yAxisLabels:te=void 0}=e,{y2AxisLabels:ie=void 0}=e,{xBaseline:we=void 0}=e,{yBaseline:k=void 0}=e,{y2Baseline:se=void 0}=e,{xTickMarks:Oe=void 0}=e,{yTickMarks:ue=void 0}=e,{y2TickMarks:ce=void 0}=e,{yMin:fe=void 0}=e,{yMax:_e=void 0}=e,{yScale:me=void 0}=e,{y2Min:X=void 0}=e,{y2Max:oe=void 0}=e,{y2Scale:ae=void 0}=e,{swapXY:J=!1}=e,$,{showAllXAxisLabels:U}=e;const le=typeof U<"u";let{type:ee="stacked"}=e,Ae=ee==="stacked100",{fillColor:R=void 0}=e,{fillOpacity:K=void 0}=e,{outlineColor:Ce=void 0}=e,{outlineWidth:he=void 0}=e,{chartAreaHeight:re=void 0}=e,{sort:ne=void 0}=e,{colorPalette:b="default"}=e,{labels:j=void 0}=e,{labelSize:W=void 0}=e,{labelPosition:Ee=void 0}=e,{labelColor:Fe=void 0}=e,{labelFmt:Le=void 0}=e,{yLabelFmt:Re=void 0}=e,{y2LabelFmt:He=void 0}=e,{stackTotalLabel:ge=void 0}=e,{seriesLabels:q=void 0}=e,{showAllLabels:ve=void 0}=e,{yAxisColor:be=void 0}=e,{y2AxisColor:Me=void 0}=e,{echartsOptions:We=void 0}=e,{seriesOptions:pe=void 0}=e,{printEchartsConfig:Ge=!1}=e,{emptySet:Ve=void 0}=e,{emptyMessage:$e=void 0}=e,{renderer:Qe=void 0}=e,{downloadableData:et=void 0}=e,{downloadableImage:ke=void 0}=e,{seriesColors:tt=void 0}=e,{seriesOrder:at=void 0}=e,{connectGroup:lt=void 0}=e,{seriesLabelFmt:it=void 0}=e;return e.data===void 0&&t.data&&_!==void 0&&t.data(_),e.x===void 0&&t.x&&s!==void 0&&t.x(s),e.y===void 0&&t.y&&v!==void 0&&t.y(v),e.y2===void 0&&t.y2&&w!==void 0&&t.y2(w),e.series===void 0&&t.series&&L!==void 0&&t.series(L),e.xType===void 0&&t.xType&&g!==void 0&&t.xType(g),e.yLog===void 0&&t.yLog&&E!==void 0&&t.yLog(E),e.yLogBase===void 0&&t.yLogBase&&D!==void 0&&t.yLogBase(D),e.y2SeriesType===void 0&&t.y2SeriesType&&T!==void 0&&t.y2SeriesType(T),e.yFmt===void 0&&t.yFmt&&I!==void 0&&t.yFmt(I),e.y2Fmt===void 0&&t.y2Fmt&&P!==void 0&&t.y2Fmt(P),e.xFmt===void 0&&t.xFmt&&F!==void 0&&t.xFmt(F),e.title===void 0&&t.title&&u!==void 0&&t.title(u),e.subtitle===void 0&&t.subtitle&&r!==void 0&&t.subtitle(r),e.legend===void 0&&t.legend&&x!==void 0&&t.legend(x),e.xAxisTitle===void 0&&t.xAxisTitle&&S!==void 0&&t.xAxisTitle(S),e.yAxisTitle===void 0&&t.yAxisTitle&&h!==void 0&&t.yAxisTitle(h),e.y2AxisTitle===void 0&&t.y2AxisTitle&&O!==void 0&&t.y2AxisTitle(O),e.xGridlines===void 0&&t.xGridlines&&G!==void 0&&t.xGridlines(G),e.yGridlines===void 0&&t.yGridlines&&z!==void 0&&t.yGridlines(z),e.y2Gridlines===void 0&&t.y2Gridlines&&V!==void 0&&t.y2Gridlines(V),e.xAxisLabels===void 0&&t.xAxisLabels&&N!==void 0&&t.xAxisLabels(N),e.yAxisLabels===void 0&&t.yAxisLabels&&te!==void 0&&t.yAxisLabels(te),e.y2AxisLabels===void 0&&t.y2AxisLabels&&ie!==void 0&&t.y2AxisLabels(ie),e.xBaseline===void 0&&t.xBaseline&&we!==void 0&&t.xBaseline(we),e.yBaseline===void 0&&t.yBaseline&&k!==void 0&&t.yBaseline(k),e.y2Baseline===void 0&&t.y2Baseline&&se!==void 0&&t.y2Baseline(se),e.xTickMarks===void 0&&t.xTickMarks&&Oe!==void 0&&t.xTickMarks(Oe),e.yTickMarks===void 0&&t.yTickMarks&&ue!==void 0&&t.yTickMarks(ue),e.y2TickMarks===void 0&&t.y2TickMarks&&ce!==void 0&&t.y2TickMarks(ce),e.yMin===void 0&&t.yMin&&fe!==void 0&&t.yMin(fe),e.yMax===void 0&&t.yMax&&_e!==void 0&&t.yMax(_e),e.yScale===void 0&&t.yScale&&me!==void 0&&t.yScale(me),e.y2Min===void 0&&t.y2Min&&X!==void 0&&t.y2Min(X),e.y2Max===void 0&&t.y2Max&&oe!==void 0&&t.y2Max(oe),e.y2Scale===void 0&&t.y2Scale&&ae!==void 0&&t.y2Scale(ae),e.swapXY===void 0&&t.swapXY&&J!==void 0&&t.swapXY(J),e.showAllXAxisLabels===void 0&&t.showAllXAxisLabels&&U!==void 0&&t.showAllXAxisLabels(U),e.type===void 0&&t.type&&ee!==void 0&&t.type(ee),e.fillColor===void 0&&t.fillColor&&R!==void 0&&t.fillColor(R),e.fillOpacity===void 0&&t.fillOpacity&&K!==void 0&&t.fillOpacity(K),e.outlineColor===void 0&&t.outlineColor&&Ce!==void 0&&t.outlineColor(Ce),e.outlineWidth===void 0&&t.outlineWidth&&he!==void 0&&t.outlineWidth(he),e.chartAreaHeight===void 0&&t.chartAreaHeight&&re!==void 0&&t.chartAreaHeight(re),e.sort===void 0&&t.sort&&ne!==void 0&&t.sort(ne),e.colorPalette===void 0&&t.colorPalette&&b!==void 0&&t.colorPalette(b),e.labels===void 0&&t.labels&&j!==void 0&&t.labels(j),e.labelSize===void 0&&t.labelSize&&W!==void 0&&t.labelSize(W),e.labelPosition===void 0&&t.labelPosition&&Ee!==void 0&&t.labelPosition(Ee),e.labelColor===void 0&&t.labelColor&&Fe!==void 0&&t.labelColor(Fe),e.labelFmt===void 0&&t.labelFmt&&Le!==void 0&&t.labelFmt(Le),e.yLabelFmt===void 0&&t.yLabelFmt&&Re!==void 0&&t.yLabelFmt(Re),e.y2LabelFmt===void 0&&t.y2LabelFmt&&He!==void 0&&t.y2LabelFmt(He),e.stackTotalLabel===void 0&&t.stackTotalLabel&&ge!==void 0&&t.stackTotalLabel(ge),e.seriesLabels===void 0&&t.seriesLabels&&q!==void 0&&t.seriesLabels(q),e.showAllLabels===void 0&&t.showAllLabels&&ve!==void 0&&t.showAllLabels(ve),e.yAxisColor===void 0&&t.yAxisColor&&be!==void 0&&t.yAxisColor(be),e.y2AxisColor===void 0&&t.y2AxisColor&&Me!==void 0&&t.y2AxisColor(Me),e.echartsOptions===void 0&&t.echartsOptions&&We!==void 0&&t.echartsOptions(We),e.seriesOptions===void 0&&t.seriesOptions&&pe!==void 0&&t.seriesOptions(pe),e.printEchartsConfig===void 0&&t.printEchartsConfig&&Ge!==void 0&&t.printEchartsConfig(Ge),e.emptySet===void 0&&t.emptySet&&Ve!==void 0&&t.emptySet(Ve),e.emptyMessage===void 0&&t.emptyMessage&&$e!==void 0&&t.emptyMessage($e),e.renderer===void 0&&t.renderer&&Qe!==void 0&&t.renderer(Qe),e.downloadableData===void 0&&t.downloadableData&&et!==void 0&&t.downloadableData(et),e.downloadableImage===void 0&&t.downloadableImage&&ke!==void 0&&t.downloadableImage(ke),e.seriesColors===void 0&&t.seriesColors&&tt!==void 0&&t.seriesColors(tt),e.seriesOrder===void 0&&t.seriesOrder&&at!==void 0&&t.seriesOrder(at),e.connectGroup===void 0&&t.connectGroup&&lt!==void 0&&t.connectGroup(lt),e.seriesLabelFmt===void 0&&t.seriesLabelFmt&&it!==void 0&&t.seriesLabelFmt(it),le||(U=g==="category"||$==="string"),typeof U=="string"&&(U=U?.toLowerCase()==="true"),J==="true"||J===!0?J=!0:J=!1,l=f(R),i=f(Ce),d=m(b),c=f(Fe),n=f(be),y=f(Me),C=A(tt),`${M(_o,"Chart").$$render(a,{data:_,x:s,y:v,y2:w,xFmt:F,yFmt:I,y2Fmt:P,series:L,xType:g,yLog:E,yLogBase:D,legend:x,xAxisTitle:S,yAxisTitle:h,y2AxisTitle:O,xGridlines:G,yGridlines:z,y2Gridlines:V,xAxisLabels:N,yAxisLabels:te,y2AxisLabels:ie,xBaseline:we,yBaseline:k,y2Baseline:se,xTickMarks:Oe,yTickMarks:ue,y2TickMarks:ce,yAxisColor:n,y2AxisColor:y,yMin:fe,yMax:_e,yScale:me,y2Min:X,y2Max:oe,y2Scale:ae,swapXY:J,title:u,subtitle:r,chartType:"Bar Chart",stackType:ee,sort:ne,stacked100:Ae,chartAreaHeight:re,showAllXAxisLabels:U,colorPalette:d,echartsOptions:We,seriesOptions:pe,printEchartsConfig:Ge,emptySet:Ve,emptyMessage:$e,renderer:Qe,downloadableData:et,downloadableImage:ke,connectGroup:lt,seriesColors:C},{},{default:()=>`${M(Eo,"Bar").$$render(a,{type:ee,fillColor:l,fillOpacity:K,outlineColor:i,outlineWidth:he,labels:j,labelSize:W,labelPosition:Ee,labelColor:c,labelFmt:Le,yLabelFmt:Re,y2LabelFmt:He,stackTotalLabel:ge,seriesLabels:q,showAllLabels:ve,y2SeriesType:T,seriesOrder:at,seriesLabelFmt:it},{},{})} ${o.default?o.default({}):""}`})}`});function xl(a,e,t){return a.map(o=>[new Date(o[e]).toISOString().split("T")[0],o[t]])}const Lo=Y((a,e,t,o)=>{let l,i,d,c,n=Pe,y=()=>(n(),n=H(l,le=>c=le),l);const{theme:C,resolveColorScale:f}=Ct();d=H(C,le=>i=le);let{data:A}=e,{queryID:m}=e,{date:_}=e,{value:s}=e,{valueFmt:v=void 0}=e,{yearLabel:w=!0}=e,{monthLabel:L=!0}=e,{dayLabel:g=!0}=e,{chartAreaHeight:E=void 0}=e,{title:D=void 0}=e,{subtitle:T=void 0}=e,I=D!==void 0,P=T!==void 0,{legend:F=!0}=e,{filter:u=!1}=e,r="400px",x,{colorPalette:S=void 0}=e,{colorScale:h=void 0}=e,{echartsOptions:O=void 0}=e,{seriesOptions:G=void 0}=e,{printEchartsConfig:z=!1}=e,{renderer:V=void 0}=e,{downloadableData:N=void 0}=e,{downloadableImage:te=void 0}=e,{connectGroup:ie=void 0}=e,we,k,se,Oe,ue,ce,fe,_e,me,X,oe=[],ae=[],J,{min:$=void 0}=e,{max:U=void 0}=e;e.data===void 0&&t.data&&A!==void 0&&t.data(A),e.queryID===void 0&&t.queryID&&m!==void 0&&t.queryID(m),e.date===void 0&&t.date&&_!==void 0&&t.date(_),e.value===void 0&&t.value&&s!==void 0&&t.value(s),e.valueFmt===void 0&&t.valueFmt&&v!==void 0&&t.valueFmt(v),e.yearLabel===void 0&&t.yearLabel&&w!==void 0&&t.yearLabel(w),e.monthLabel===void 0&&t.monthLabel&&L!==void 0&&t.monthLabel(L),e.dayLabel===void 0&&t.dayLabel&&g!==void 0&&t.dayLabel(g),e.chartAreaHeight===void 0&&t.chartAreaHeight&&E!==void 0&&t.chartAreaHeight(E),e.title===void 0&&t.title&&D!==void 0&&t.title(D),e.subtitle===void 0&&t.subtitle&&T!==void 0&&t.subtitle(T),e.legend===void 0&&t.legend&&F!==void 0&&t.legend(F),e.filter===void 0&&t.filter&&u!==void 0&&t.filter(u),e.colorPalette===void 0&&t.colorPalette&&S!==void 0&&t.colorPalette(S),e.colorScale===void 0&&t.colorScale&&h!==void 0&&t.colorScale(h),e.echartsOptions===void 0&&t.echartsOptions&&O!==void 0&&t.echartsOptions(O),e.seriesOptions===void 0&&t.seriesOptions&&G!==void 0&&t.seriesOptions(G),e.printEchartsConfig===void 0&&t.printEchartsConfig&&z!==void 0&&t.printEchartsConfig(z),e.renderer===void 0&&t.renderer&&V!==void 0&&t.renderer(V),e.downloadableData===void 0&&t.downloadableData&&N!==void 0&&t.downloadableData(N),e.downloadableImage===void 0&&t.downloadableImage&&te!==void 0&&t.downloadableImage(te),e.connectGroup===void 0&&t.connectGroup&&ie!==void 0&&t.connectGroup(ie),e.min===void 0&&t.min&&$!==void 0&&t.min($),e.max===void 0&&t.max&&U!==void 0&&t.max(U),w=w==="true"||w===!0,L=L==="true"||L===!0,g=g==="true"||g===!0,F=F==="true"||F===!0,u=u==="true"||u===!0,y(l=f(h??S??"default")),z=z==="true"||z===!0;try{xa(A,[_,s]);const le=A.map(R=>({...R,year:new Date(R[_]).getUTCFullYear()})),ee=[...new Set(le.map(R=>R.year))],Ae=ee.length;if(we=xl(A,_,s),$&&($=Number($),isNaN($)))throw Error("min must be a number");if(U&&(U=Number(U),isNaN(U)))throw Error("max must be a number");if(ce=$??Math.min(...A.map(R=>R[s])),fe=U??Math.max(...A.map(R=>R[s])),Oe=Qt(A),k=Oe[s].format,se=v?ze(v):k,E){if(E=Number(E),isNaN(E))throw Error("chartAreaHeight must be a number");if(E<=0)throw Error("chartAreaHeight must be a positive number")}x=E??Math.max(100,ee.length*135),r=`${0+F*35+I*18+P*18+x}px`,me={type:"heatmap",coordinateSystem:"calendar",data:we,emphasis:{itemStyle:{shadowBlur:2,shadowColor:"rgba(0, 0, 0, 0.5)"}}},X={left:w?40:20,right:5,cellSize:["auto",13],itemStyle:{color:i.colors["base-100"],borderWidth:.5,borderColor:i.colors["base-300"]},splitLine:{show:!0,lineStyle:{color:i.colors["base-content"]}},monthLabel:{show:L,color:i.colors["base-content-muted"]},dayLabel:{show:g,color:i.colors["base-content-muted"]},yearLabel:{show:w,color:i.colors["base-300"],fontSize:16,fontWeight:600,margin:25}};for(let R=0;R<Ae;R++){R===0&&(ae=[],oe=[]);const K=xl(le.filter(b=>b.year===ee[R]),_,s),Ce={...me};Ce.data=K,Ce.calendarIndex=R;const he={...X};let re=K[0][0],ne=K[0][0];K.forEach(b=>{const j=b[0];j<re&&(re=j),j>ne&&(ne=j)}),he.range=ee[R],he.top=I*20+P*20+25+R*135,ae.push(Ce),oe.push(he)}_e={title:{text:D,subtext:T},animation:!1,grid:{height:x},tooltip:{trigger:"item",showDelay:0,transitionDuration:.2,confine:!0,axisPointer:{type:"shadow"},formatter(R){return`
					<span id="tooltip" style='font-weight: 600;'>${R.value[0]}</span>
						<br/>
						<span>${je(s,se)}: </span>
							<span style='float:right; margin-left: 10px;'>${Ie(Number.isNaN(R.value[1])?0:R.value[1],se)}</span>`},padding:6,borderRadius:4,borderWidth:1,borderColor:i.colors["base-300"],backgroundColor:i.colors["base-100"],extraCssText:"box-shadow: 0 3px 6px rgba(0,0,0,.15); box-shadow: 0 2px 4px rgba(0,0,0,.12); z-index: 1;",textStyle:{color:i.colors["base-content"],fontSize:12,fontWeight:400},order:"valueDesc"},calendar:oe,visualMap:{show:F,itemWidth:10,min:ce,max:fe,calculable:u,orient:"horizontal",left:"center",bottom:10,handleStyle:{borderColor:i.colors["base-100"]},textStyle:{color:i.colors["base-content-muted"]},inRange:{color:c},text:u?void 0:[Ie(fe,se),Ie(ce,se)],formatter(R){return Ie(R,se)}},series:ae,media:[{query:{maxWidth:400},option:{calendar:[]}}]},J={left:w?40:20,right:5,cellSize:["auto",12],itemStyle:{borderWidth:.5,borderColor:i.colors["base-300"]},splitLine:{show:!0,lineStyle:{color:i.colors["base-content-muted"]}},monthLabel:{show:L,color:i.colors["base-content-muted"],fontSize:10,formatter(R){return R.nameMap.substring(0,1)}},dayLabel:{show:g,color:i.colors["base-content-muted"],fontSize:10,margin:7},yearLabel:{show:w,color:i.colors["base-300"],fontWeight:600,margin:25,fontSize:14}};for(let R=0;R<_e.calendar.length;R++)_e.media[0].option.calendar.push(J)}catch(le){ue=le.message,console.error("Error in Calendar Heatmap: "+ue)}return d(),n(),`${ue?`${M($t,"ErrorChart").$$render(a,{title:"Calendar Heatmap",error:ue},{},{})}`:`${M(Pl,"ECharts").$$render(a,{height:r,data:A,queryID:m,config:_e,printEchartsConfig:z,renderer:V,downloadableData:N,downloadableImage:te,connectGroup:ie,echartsOptions:O,seriesOptions:G},{},{})}`}`}),{Object:bo}=gl;let _l="Calendar Heatmap";const ko=Y((a,e,t,o)=>{let l,{data:i}=e;const d=qe.isQuery(i)?i.hash:void 0;let c=i?.hash===d,{emptySet:n=void 0}=e,{emptyMessage:y=void 0}=e,C=i?.id;return e.data===void 0&&t.data&&i!==void 0&&t.data(i),e.emptySet===void 0&&t.emptySet&&n!==void 0&&t.emptySet(n),e.emptyMessage===void 0&&t.emptyMessage&&y!==void 0&&t.emptyMessage(y),c=i?.hash===d,l=Object.fromEntries(Object.entries(e).filter(([,f])=>f!==void 0)),` ${M(Sl,"QueryLoad").$$render(a,{data:i},{},{error:({loaded:f})=>`${M($t,"ErrorChart").$$render(a,{slot:"error",title:_l,error:f.error.message},{},{})}`,empty:()=>`${M(Ol,"EmptyChart").$$render(a,{slot:"empty",emptyMessage:y,emptySet:n,chartType:_l,isInitial:c},{},{})}`,default:({loaded:f})=>`${M(Lo,"CalendarHeatmap").$$render(a,bo.assign({},l,{data:qe.isQuery(f)?Array.from(f):f},{queryID:C}),{},{default:()=>`${o.default?o.default({}):""}`})}`})}`}),de={title:"Hello World!"},ur=Y((a,e,t,o)=>{let l,i,d,c;i=H(wl,k=>l=k),c=H(el,k=>d=k);let{data:n}=e,{data:y={},customFormattingSettings:C,__db:f,inputs:A}=n;Oa(el,d="6666cd76f96956469e7be39d750cc7d9",d);let m=ii(Kt(A));yt(m.subscribe(k=>A=k)),Dt(fi,{getCustomFormats:()=>C.customFormats||[]}),yt(()=>qe.emptyCache());const _=(k,se)=>ni(f.query,k,{query_name:se});ci(_),l.params;let s={initialData:void 0,initialError:void 0},v=Ze`select distinct
      sport_type
  from strava_source.activities_by_day
  where sport_type is not null`,w=`select distinct
      sport_type
  from strava_source.activities_by_day
  where sport_type is not null`,L,g=!1;const E=qe.createReactive({callback:k=>{L=k},execFn:_},{id:"sport_types",...s});E(w,{noResolve:v,...s}),globalThis[Symbol.for("sport_types")]={get value(){return L}};let D={initialData:void 0,initialError:void 0},T=Ze`SELECT
    *
  FROM strava_source.activities_by_day
  GROUP BY ALL`,I=`SELECT
    *
  FROM strava_source.activities_by_day
  GROUP BY ALL`,P,F=!1;const u=qe.createReactive({callback:k=>{P=k},execFn:_},{id:"all_activities_by_day",...D});u(I,{noResolve:T,...D}),globalThis[Symbol.for("all_activities_by_day")]={get value(){return P}};let r={initialData:void 0,initialError:void 0},x=Ze`SELECT 
      activity_month
      , activity_year
      , sport_type
      , sum(activities_cnt)    AS activities_cnt
      , sum(total_distance)    AS total_distance_month
      , sum(total_moving_time) AS total_moving_time
      , sum(total_distance_month) over (partition by activity_year, sport_type) AS total_distance_year
    FROM (SELECT
    *
  FROM strava_source.activities_by_day
  GROUP BY ALL)
    GROUP BY 1, 2, 3
    ORDER BY activity_month DESC`,S=`SELECT 
      activity_month
      , activity_year
      , sport_type
      , sum(activities_cnt)    AS activities_cnt
      , sum(total_distance)    AS total_distance_month
      , sum(total_moving_time) AS total_moving_time
      , sum(total_distance_month) over (partition by activity_year, sport_type) AS total_distance_year
    FROM (SELECT
    *
  FROM strava_source.activities_by_day
  GROUP BY ALL)
    GROUP BY 1, 2, 3
    ORDER BY activity_month DESC`,h,O=!1;const G=qe.createReactive({callback:k=>{h=k},execFn:_},{id:"all_activities_by_month",...r});G(S,{noResolve:x,...r}),globalThis[Symbol.for("all_activities_by_month")]={get value(){return h}};let z={initialData:void 0,initialError:void 0},V=Ze`SELECT 
      activity_year
      , sport_type
      , sum(activities_cnt)    AS activities_cnt
      , sum(total_distance)    AS total_distance
      , sum(total_moving_time) AS total_moving_time
    FROM (SELECT
    *
  FROM strava_source.activities_by_day
  GROUP BY ALL)
    GROUP BY 1, 2
    ORDER BY activity_year DESC`,N=`SELECT 
      activity_year
      , sport_type
      , sum(activities_cnt)    AS activities_cnt
      , sum(total_distance)    AS total_distance
      , sum(total_moving_time) AS total_moving_time
    FROM (SELECT
    *
  FROM strava_source.activities_by_day
  GROUP BY ALL)
    GROUP BY 1, 2
    ORDER BY activity_year DESC`,te,ie=!1;const we=qe.createReactive({callback:k=>{te=k},execFn:_},{id:"all_activities_by_year",...z});return we(N,{noResolve:V,...z}),globalThis[Symbol.for("all_activities_by_year")]={get value(){return te}},yt(m.subscribe(k=>{})),e.data===void 0&&t.data&&n!==void 0&&t.data(n),{data:y={},customFormattingSettings:C,__db:f}=n,ri.set(Object.keys(y).length>0),l.params,v=Ze`select distinct
      sport_type
  from strava_source.activities_by_day
  where sport_type is not null`,w=`select distinct
      sport_type
  from strava_source.activities_by_day
  where sport_type is not null`,v||!g?v||(E(w,{noResolve:v,...s}),g=!0):E(w,{noResolve:v}),T=Ze`SELECT
    *
  FROM strava_source.activities_by_day
  GROUP BY ALL`,I=`SELECT
    *
  FROM strava_source.activities_by_day
  GROUP BY ALL`,T||!F?T||(u(I,{noResolve:T,...D}),F=!0):u(I,{noResolve:T}),x=Ze`SELECT 
      activity_month
      , activity_year
      , sport_type
      , sum(activities_cnt)    AS activities_cnt
      , sum(total_distance)    AS total_distance_month
      , sum(total_moving_time) AS total_moving_time
      , sum(total_distance_month) over (partition by activity_year, sport_type) AS total_distance_year
    FROM (SELECT
    *
  FROM strava_source.activities_by_day
  GROUP BY ALL)
    GROUP BY 1, 2, 3
    ORDER BY activity_month DESC`,S=`SELECT 
      activity_month
      , activity_year
      , sport_type
      , sum(activities_cnt)    AS activities_cnt
      , sum(total_distance)    AS total_distance_month
      , sum(total_moving_time) AS total_moving_time
      , sum(total_distance_month) over (partition by activity_year, sport_type) AS total_distance_year
    FROM (SELECT
    *
  FROM strava_source.activities_by_day
  GROUP BY ALL)
    GROUP BY 1, 2, 3
    ORDER BY activity_month DESC`,x||!O?x||(G(S,{noResolve:x,...r}),O=!0):G(S,{noResolve:x}),V=Ze`SELECT 
      activity_year
      , sport_type
      , sum(activities_cnt)    AS activities_cnt
      , sum(total_distance)    AS total_distance
      , sum(total_moving_time) AS total_moving_time
    FROM (SELECT
    *
  FROM strava_source.activities_by_day
  GROUP BY ALL)
    GROUP BY 1, 2
    ORDER BY activity_year DESC`,N=`SELECT 
      activity_year
      , sport_type
      , sum(activities_cnt)    AS activities_cnt
      , sum(total_distance)    AS total_distance
      , sum(total_moving_time) AS total_moving_time
    FROM (SELECT
    *
  FROM strava_source.activities_by_day
  GROUP BY ALL)
    GROUP BY 1, 2
    ORDER BY activity_year DESC`,V||!ie?V||(we(N,{noResolve:V,...z}),ie=!0):we(N,{noResolve:V}),i(),c(),`  ${typeof de<"u"&&de.title&&de.hide_title!==!0?`<h1 class="title">${p(de.title)}</h1>`:""} ${a.head+=`<!-- HEAD_svelte-6lktun_START -->${typeof de<"u"&&de.title?`${a.title=`<title>${p(de.title)}</title>`,""} <meta property="og:title"${ye("content",de.og?.title??de.title,0)}> <meta name="twitter:title"${ye("content",de.og?.title??de.title,0)}>`:` ${a.title="<title>Evidence</title>",""}`}<meta name="twitter:card" content="summary"><meta name="twitter:site" content="@evidence_dev">${typeof de=="object"?`${de.description||de.og?.description?`<meta name="description"${ye("content",de.description??de.og?.description,0)}> <meta property="og:description"${ye("content",de.og?.description??de.description,0)}> <meta name="twitter:description"${ye("content",de.og?.description??de.description,0)}>`:""} ${de.og?.image?`<meta property="og:image"${ye("content",tl(de.og?.image),0)}> <meta name="twitter:image"${ye("content",tl(de.og?.image),0)}>`:""}`:""}<!-- HEAD_svelte-6lktun_END -->`,""}   ${L?`${M(qt,"QueryViewer").$$render(a,{queryID:"sport_types",queryResult:L},{},{})}`:""} ${P?`${M(qt,"QueryViewer").$$render(a,{queryID:"all_activities_by_day",queryResult:P},{},{})}`:""} ${h?`${M(qt,"QueryViewer").$$render(a,{queryID:"all_activities_by_month",queryResult:h},{},{})}`:""} ${te?`${M(qt,"QueryViewer").$$render(a,{queryID:"all_activities_by_year",queryResult:te},{},{})}`:""} ${M(co,"Dropdown").$$render(a,{name:"sport_types",value:"sport_type",data:L,defaultValue:"%"},{},{default:()=>`${M(Ml,"DropdownOption").$$render(a,{value:"%",valueLabel:"All"},{},{})}`})} ${M(Cl,"BarChart").$$render(a,{data:h.where(`sport_type like '${A.sport_types.value}'`),title:"Activities by Month, "+A.sport_types.value,x:"activity_month",y:"activities_cnt",series:"sport_type"},{},{})} ${M(ko,"CalendarHeatmap").$$render(a,{data:P.where(`sport_type like '${A.sport_types.value}'`),date:"activity_day",value:"total_moving_time",title:"Activity Calendar Heatmap",subtitle:"Gradient by total moving time (minutes)"},{},{})} <p class="markdown" data-svelte-h="svelte-1bghkkn">How far did I go? Distance by activity</p> ${M(Cl,"BarChart").$$render(a,{data:h.where("sport_type = 'Run'"),title:"Running distance",x:"activity_month",y:"total_distance_month",series:"sport_type"},{},{})}`});export{ur as default};
