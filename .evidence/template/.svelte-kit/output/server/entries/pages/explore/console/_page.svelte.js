import{c as U,d as O,h as C,v as c,i as tt,j as At,f as Ze,g as Je,o as $e,s as tn}from"../../../../chunks/ssr.js";import"dequal";import{l as ae,L as en}from"../../../../chunks/VennDiagram.svelte_svelte_type_style_lang.js";import"clsx";import{Q as Ae,t as nn}from"../../../../chunks/stores.js";import"@uwdata/mosaic-sql";import{query as on}from"@evidence-dev/universal-sql/client-duckdb";import"ssf";import"@tidyjs/tidy";import"deep-object-diff";import ie from"chroma-js";import{c as an,s as R,b as $,d as rn}from"../../../../chunks/utils.js";import{I as ot}from"../../../../chunks/Icon.js";import{a as at,e as Nt,c as ln,g as An,l as sn,Q as Ke,S as cn,D as ke,E as Pe,i as je,h as dn,m as Me}from"../../../../chunks/DownloadData.js";import{w as un}from"../../../../chunks/index2.js";import{p as Le,C as Cn}from"../../../../chunks/CodeBlock.js";import{X as mn,c as pn,C as We,d as vn,e as fn,f as hn,g as gn,h as wn,E as bn,i as yn,P as xn}from"../../../../chunks/index6.js";import{b as Bn}from"../../../../chunks/environment.js";import{a as he}from"../../../../chunks/index5.js";import{D as se,S as ve}from"../../../../chunks/_Sparkline.js";import{E as In}from"../../../../chunks/index7.js";import"yaml";import"@astronautlabs/jsonpath";import"tua-body-scroll-lock";import"lodash/merge.js";import"export-to-csv";import"echarts";import"prismjs";import"debounce";import"downloadjs";import"echarts-stat";const En={code:"button.variant-primary.svelte-1c08hho{--bg:hsl(var(--twc-primary) / var(--twc-primary-opacity, 1));--text:hsl(var(--twc-primary-content) / var(--twc-primary-content-opacity, 1))}button.variant-primary.outlined.svelte-1c08hho{--border:hsl(var(--twc-primary) / var(--twc-primary-opacity, 1));--text:hsl(var(--twc-primary) / var(--twc-primary-opacity, 1));--hover-bg:hsl(var(--twc-primary) / 0.1)}button.variant-secondary.svelte-1c08hho{--bg:hsl(var(--twc-base-300) / var(--twc-base-300-opacity, 1));--text:hsl(var(--twc-base-content) / var(--twc-base-content-opacity, 1))}button.variant-secondary.outlined.svelte-1c08hho{--border:hsl(var(--twc-base-300) / var(--twc-base-300-opacity, 1));--text:hsl(var(--twc-base-300) / var(--twc-base-300-opacity, 1));--hover-bg:hsl(var(--twc-base-300) / 0.1)}button.variant-accent.svelte-1c08hho{--bg:hsl(var(--twc-accent) / var(--twc-accent-opacity, 1));--text:hsl(var(--twc-accent-content) / var(--twc-accent-content-opacity, 1))}button.variant-accent.outlined.svelte-1c08hho{--border:hsl(var(--twc-accent) / var(--twc-accent-opacity, 1));--text:hsl(var(--twc-accent) / var(--twc-accent-opacity, 1));--hover-bg:hsl(var(--twc-accent) / 0.1)}button.variant-info.svelte-1c08hho{--bg:hsl(var(--twc-info) / var(--twc-info-opacity, 1));--text:hsl(var(--twc-info-content) / var(--twc-info-content-opacity, 1))}button.variant-info.outlined.svelte-1c08hho{--border:hsl(var(--twc-info) / var(--twc-info-opacity, 1));--text:hsl(var(--twc-info) / var(--twc-info-opacity, 1));--hover-bg:hsl(var(--twc-info) / 0.1)}button.variant-positive.svelte-1c08hho{--bg:hsl(var(--twc-positive) / var(--twc-positive-opacity, 1));--text:hsl(var(--twc-positive-content) / var(--twc-positive-content-opacity, 1))}button.variant-positive.outlined.svelte-1c08hho{--border:hsl(var(--twc-positive) / var(--twc-positive-opacity, 1));--text:hsl(var(--twc-positive) / var(--twc-positive-opacity, 1));--hover-bg:hsl(var(--twc-positive) / 0.1)}button.variant-warning.svelte-1c08hho{--bg:hsl(var(--twc-warning) / var(--twc-warning-opacity, 1));--text:hsl(var(--twc-warning-content) / var(--twc-warning-content-opacity, 1))}button.variant-warning.outlined.svelte-1c08hho{--border:hsl(var(--twc-warning) / var(--twc-warning-opacity, 1));--text:hsl(var(--twc-warning) / var(--twc-warning-opacity, 1));--hover-bg:hsl(var(--twc-warning) / 0.1)}button.variant-negative.svelte-1c08hho{--bg:hsl(var(--twc-negative) / var(--twc-negative-opacity, 1));--text:hsl(var(--twc-negative-content) / var(--twc-negative-content-opacity, 1))}button.variant-negative.outlined.svelte-1c08hho{--border:hsl(var(--twc-negative) / var(--twc-negative-opacity, 1));--text:hsl(var(--twc-negative) / var(--twc-negative-opacity, 1));--hover-bg:hsl(var(--twc-negative) / 0.1)}button.svelte-1c08hho{border-color:var(--border);background-color:var(--bg);color:var(--text)}button.outlined.svelte-1c08hho{border-width:1px;background-color:transparent}button.outlined.svelte-1c08hho:not(:disabled):hover{background-color:var(--hover-bg)}button.svelte-1c08hho:disabled{cursor:not-allowed;opacity:0.5;--tw-saturate:saturate(.5);filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}button.svelte-1c08hho:not(:disabled){transition-property:all;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}button.svelte-1c08hho:not(:disabled):hover{--tw-brightness:brightness(1.05);filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}button.svelte-1c08hho:not(:disabled):active{--tw-brightness:brightness(.95);filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}",map:`{"version":3,"file":"Button.svelte","sources":["Button.svelte"],"sourcesContent":["<script context=\\"module\\">\\n\\texport const evidenceInclude = true;\\n\\n\\t/** @typedef {\\"sm\\" | \\"md\\" | \\"base\\" | \\"lg\\"} ButtonSize */\\n\\t/** @typedef {\\"primary\\" | \\"secondary\\" | \\"accent\\" | \\"info\\" | \\"positive\\" | \\"warning\\" | \\"negative\\"} ButtonVariant */\\n\\t/** @typedef {\\"left\\" | \\"right\\"} ButtonIconPosition */\\n\\t/** @typedef {boolean} ButtonOutline */\\n\\n\\t/** @type {Record<ButtonSize, string>}*/\\n\\tconst sizes = {\\n\\t\\tbase: 'px-2 py-1 mx-1 gap-2',\\n\\t\\tmd: 'px-2 py-1 mx-1 gap-2 text-xs',\\n\\t\\tsm: 'px-1 py-0.5 mx-0.5 gap-1 text-xs',\\n\\t\\tlg: 'px-4 py-2 mx-2 gap-4'\\n\\t};\\n\\n\\t/** @type {Record<ButtonSize, string>}*/\\n\\tconst iconSizes = {\\n\\t\\tbase: 'w-4',\\n\\t\\tmd: 'w-4',\\n\\t\\tsm: 'w-3',\\n\\t\\tlg: 'w-5'\\n\\t};\\n\\n\\tconst DEPRECATED_VARIANTS_MAP = /** @type {const} */ ({\\n\\t\\tsuccess: 'positive',\\n\\t\\twarn: 'warning',\\n\\t\\terror: 'negative'\\n\\t});\\n\\n\\tconst isDeprecatedVariant = (variant) => DEPRECATED_VARIANTS_MAP[variant] !== undefined;\\n\\n\\tconst checkDeprecatedVariant = (variant) => {\\n\\t\\tif (isDeprecatedVariant(variant)) {\\n\\t\\t\\tconsole.warn(\\n\\t\\t\\t\\t\`The variant \\"\${variant}\\" is deprecated. Please use \\"\${DEPRECATED_VARIANTS_MAP[variant]}\\" instead.\`\\n\\t\\t\\t);\\n\\t\\t\\treturn DEPRECATED_VARIANTS_MAP[variant];\\n\\t\\t}\\n\\t\\treturn variant;\\n\\t};\\n<\/script>\\n\\n<script>\\n\\timport { Icon } from '@steeze-ui/svelte-icon';\\n\\t/** @type {import(\\"@steeze-ui/svelte-icon\\").IconSource | undefined} */\\n\\texport let icon = undefined;\\n\\n\\t/** @type {ButtonIconPosition} */\\n\\texport let iconPosition = 'right';\\n\\n\\t/** @type {ButtonSize} */\\n\\texport let size = 'base';\\n\\n\\t/** @type {ButtonSize} */\\n\\texport let iconSize = size;\\n\\n\\t/** @type {ButtonVariant} */\\n\\texport let variant = 'info';\\n\\t$: variant = checkDeprecatedVariant(variant);\\n\\n\\t/** @type {boolean} */\\n\\texport let outline = false;\\n\\n\\t/** @type {boolean} */\\n\\texport let disabled = false;\\n\\n\\t/** @type {string | undefined} */\\n\\texport let formaction = undefined;\\n\\n\\t/** @type {HTMLButtonAttributes[\\"type\\"]} */\\n\\tlet _type = 'button';\\n\\texport { _type as type };\\n\\n\\t$: if (formaction) _type = 'submit';\\n<\/script>\\n\\n<button\\n\\ttype={_type}\\n\\t{disabled}\\n\\t{formaction}\\n\\ton:click|stopPropagation\\n\\tclass:outlined={outline}\\n\\tclass=\\"flex items-center transition-colors rounded variant-{variant} {sizes[size]}\\"\\n>\\n\\t{#if iconPosition === 'left' && icon}\\n\\t\\t<Icon src={icon} class={iconSizes[iconSize]} />\\n\\t{/if}\\n\\t<slot />\\n\\t{#if iconPosition === 'right' && icon}\\n\\t\\t<Icon src={icon} class={iconSizes[iconSize]} />\\n\\t{/if}\\n</button>\\n\\n<style>\\n\\tbutton.variant-primary {\\n\\t\\t\\t--bg: hsl(var(--twc-primary) / var(--twc-primary-opacity, 1));\\n\\t\\t\\t--text: hsl(var(--twc-primary-content) / var(--twc-primary-content-opacity, 1));\\n\\t\\t}\\n\\t\\t\\tbutton.variant-primary.outlined {\\n\\t\\t\\t\\t--border: hsl(var(--twc-primary) / var(--twc-primary-opacity, 1));\\n\\t\\t\\t\\t--text: hsl(var(--twc-primary) / var(--twc-primary-opacity, 1));\\n\\t\\t\\t\\t--hover-bg: hsl(var(--twc-primary) / 0.1);\\n\\t\\t\\t}\\n\\t\\tbutton.variant-secondary {\\n\\t\\t\\t--bg: hsl(var(--twc-base-300) / var(--twc-base-300-opacity, 1));\\n\\t\\t\\t--text: hsl(var(--twc-base-content) / var(--twc-base-content-opacity, 1));\\n\\t\\t}\\n\\t\\tbutton.variant-secondary.outlined {\\n\\t\\t\\t\\t--border: hsl(var(--twc-base-300) / var(--twc-base-300-opacity, 1));\\n\\t\\t\\t\\t--text: hsl(var(--twc-base-300) / var(--twc-base-300-opacity, 1));\\n\\t\\t\\t\\t--hover-bg: hsl(var(--twc-base-300) / 0.1);\\n\\t\\t\\t}\\n\\t\\tbutton.variant-accent {\\n\\t\\t\\t--bg: hsl(var(--twc-accent) / var(--twc-accent-opacity, 1));\\n\\t\\t\\t--text: hsl(var(--twc-accent-content) / var(--twc-accent-content-opacity, 1));\\n\\t\\t}\\n\\t\\tbutton.variant-accent.outlined {\\n\\t\\t\\t\\t--border: hsl(var(--twc-accent) / var(--twc-accent-opacity, 1));\\n\\t\\t\\t\\t--text: hsl(var(--twc-accent) / var(--twc-accent-opacity, 1));\\n\\t\\t\\t\\t--hover-bg: hsl(var(--twc-accent) / 0.1);\\n\\t\\t\\t}\\n\\t\\tbutton.variant-info {\\n\\t\\t\\t--bg: hsl(var(--twc-info) / var(--twc-info-opacity, 1));\\n\\t\\t\\t--text: hsl(var(--twc-info-content) / var(--twc-info-content-opacity, 1));\\n\\t\\t}\\n\\t\\tbutton.variant-info.outlined {\\n\\t\\t\\t\\t--border: hsl(var(--twc-info) / var(--twc-info-opacity, 1));\\n\\t\\t\\t\\t--text: hsl(var(--twc-info) / var(--twc-info-opacity, 1));\\n\\t\\t\\t\\t--hover-bg: hsl(var(--twc-info) / 0.1);\\n\\t\\t\\t}\\n\\t\\tbutton.variant-positive {\\n\\t\\t\\t--bg: hsl(var(--twc-positive) / var(--twc-positive-opacity, 1));\\n\\t\\t\\t--text: hsl(var(--twc-positive-content) / var(--twc-positive-content-opacity, 1));\\n\\t\\t}\\n\\t\\tbutton.variant-positive.outlined {\\n\\t\\t\\t\\t--border: hsl(var(--twc-positive) / var(--twc-positive-opacity, 1));\\n\\t\\t\\t\\t--text: hsl(var(--twc-positive) / var(--twc-positive-opacity, 1));\\n\\t\\t\\t\\t--hover-bg: hsl(var(--twc-positive) / 0.1);\\n\\t\\t\\t}\\n\\t\\tbutton.variant-warning {\\n\\t\\t\\t--bg: hsl(var(--twc-warning) / var(--twc-warning-opacity, 1));\\n\\t\\t\\t--text: hsl(var(--twc-warning-content) / var(--twc-warning-content-opacity, 1));\\n\\t\\t}\\n\\t\\tbutton.variant-warning.outlined {\\n\\t\\t\\t\\t--border: hsl(var(--twc-warning) / var(--twc-warning-opacity, 1));\\n\\t\\t\\t\\t--text: hsl(var(--twc-warning) / var(--twc-warning-opacity, 1));\\n\\t\\t\\t\\t--hover-bg: hsl(var(--twc-warning) / 0.1);\\n\\t\\t\\t}\\n\\t\\tbutton.variant-negative {\\n\\t\\t\\t--bg: hsl(var(--twc-negative) / var(--twc-negative-opacity, 1));\\n\\t\\t\\t--text: hsl(var(--twc-negative-content) / var(--twc-negative-content-opacity, 1));\\n\\t\\t}\\n\\t\\tbutton.variant-negative.outlined {\\n\\t\\t\\t\\t--border: hsl(var(--twc-negative) / var(--twc-negative-opacity, 1));\\n\\t\\t\\t\\t--text: hsl(var(--twc-negative) / var(--twc-negative-opacity, 1));\\n\\t\\t\\t\\t--hover-bg: hsl(var(--twc-negative) / 0.1);\\n\\t\\t\\t}\\n\\t\\tbutton {\\n\\t\\t\\tborder-color: var(--border);\\n\\t\\t\\tbackground-color: var(--bg);\\n\\t\\t\\tcolor: var(--text);\\n}\\n\\t\\tbutton.outlined {\\n\\t\\t\\tborder-width: 1px;\\n\\t\\t\\tbackground-color: transparent;\\n}\\n\\t\\tbutton.outlined:not(:disabled):hover {\\n\\t\\t\\tbackground-color: var(--hover-bg);\\n}\\n\\t\\tbutton:disabled {\\n\\t\\t\\tcursor: not-allowed;\\n\\t\\t\\topacity: 0.5;\\n\\t\\t\\t--tw-saturate: saturate(.5);\\n\\t\\t\\tfilter: var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow);\\n}\\n\\t\\tbutton:not(:disabled) {\\n\\t\\t\\ttransition-property: all;\\n\\t\\t\\ttransition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);\\n\\t\\t\\ttransition-duration: 150ms;\\n}\\n\\t\\tbutton:not(:disabled):hover {\\n\\t\\t\\t--tw-brightness: brightness(1.05);\\n\\t\\t\\tfilter: var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow);\\n}\\n\\t\\tbutton:not(:disabled):active {\\n\\t\\t\\t--tw-brightness: brightness(.95);\\n\\t\\t\\tfilter: var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow);\\n}</style>\\n"],"names":[],"mappings":"AA+FC,MAAM,+BAAiB,CACrB,IAAI,CAAE,uDAAuD,CAC7D,MAAM,CAAE,uEACT,CACC,MAAM,gBAAgB,wBAAU,CAC/B,QAAQ,CAAE,uDAAuD,CACjE,MAAM,CAAE,uDAAuD,CAC/D,UAAU,CAAE,6BACb,CACD,MAAM,iCAAmB,CACxB,IAAI,CAAE,yDAAyD,CAC/D,MAAM,CAAE,iEACT,CACA,MAAM,kBAAkB,wBAAU,CAChC,QAAQ,CAAE,yDAAyD,CACnE,MAAM,CAAE,yDAAyD,CACjE,UAAU,CAAE,8BACb,CACD,MAAM,8BAAgB,CACrB,IAAI,CAAE,qDAAqD,CAC3D,MAAM,CAAE,qEACT,CACA,MAAM,eAAe,wBAAU,CAC7B,QAAQ,CAAE,qDAAqD,CAC/D,MAAM,CAAE,qDAAqD,CAC7D,UAAU,CAAE,4BACb,CACD,MAAM,4BAAc,CACnB,IAAI,CAAE,iDAAiD,CACvD,MAAM,CAAE,iEACT,CACA,MAAM,aAAa,wBAAU,CAC3B,QAAQ,CAAE,iDAAiD,CAC3D,MAAM,CAAE,iDAAiD,CACzD,UAAU,CAAE,0BACb,CACD,MAAM,gCAAkB,CACvB,IAAI,CAAE,yDAAyD,CAC/D,MAAM,CAAE,yEACT,CACA,MAAM,iBAAiB,wBAAU,CAC/B,QAAQ,CAAE,yDAAyD,CACnE,MAAM,CAAE,yDAAyD,CACjE,UAAU,CAAE,8BACb,CACD,MAAM,+BAAiB,CACtB,IAAI,CAAE,uDAAuD,CAC7D,MAAM,CAAE,uEACT,CACA,MAAM,gBAAgB,wBAAU,CAC9B,QAAQ,CAAE,uDAAuD,CACjE,MAAM,CAAE,uDAAuD,CAC/D,UAAU,CAAE,6BACb,CACD,MAAM,gCAAkB,CACvB,IAAI,CAAE,yDAAyD,CAC/D,MAAM,CAAE,yEACT,CACA,MAAM,iBAAiB,wBAAU,CAC/B,QAAQ,CAAE,yDAAyD,CACnE,MAAM,CAAE,yDAAyD,CACjE,UAAU,CAAE,8BACb,CACD,qBAAO,CACN,YAAY,CAAE,IAAI,QAAQ,CAAC,CAC3B,gBAAgB,CAAE,IAAI,IAAI,CAAC,CAC3B,KAAK,CAAE,IAAI,MAAM,CACpB,CACE,MAAM,wBAAU,CACf,YAAY,CAAE,GAAG,CACjB,gBAAgB,CAAE,WACrB,CACE,MAAM,wBAAS,KAAK,SAAS,CAAC,MAAO,CACpC,gBAAgB,CAAE,IAAI,UAAU,CACnC,CACE,qBAAM,SAAU,CACf,MAAM,CAAE,WAAW,CACnB,OAAO,CAAE,GAAG,CACZ,aAAa,CAAE,YAAY,CAC3B,MAAM,CAAE,IAAI,SAAS,CAAC,CAAC,IAAI,eAAe,CAAC,CAAC,IAAI,aAAa,CAAC,CAAC,IAAI,cAAc,CAAC,CAAC,IAAI,eAAe,CAAC,CAAC,IAAI,WAAW,CAAC,CAAC,IAAI,aAAa,CAAC,CAAC,IAAI,UAAU,CAAC,CAAC,IAAI,gBAAgB,CACnL,CACE,qBAAM,KAAK,SAAS,CAAE,CACrB,mBAAmB,CAAE,GAAG,CACxB,0BAA0B,CAAE,aAAa,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CACxD,mBAAmB,CAAE,KACxB,CACE,qBAAM,KAAK,SAAS,CAAC,MAAO,CAC3B,eAAe,CAAE,gBAAgB,CACjC,MAAM,CAAE,IAAI,SAAS,CAAC,CAAC,IAAI,eAAe,CAAC,CAAC,IAAI,aAAa,CAAC,CAAC,IAAI,cAAc,CAAC,CAAC,IAAI,eAAe,CAAC,CAAC,IAAI,WAAW,CAAC,CAAC,IAAI,aAAa,CAAC,CAAC,IAAI,UAAU,CAAC,CAAC,IAAI,gBAAgB,CACnL,CACE,qBAAM,KAAK,SAAS,CAAC,OAAQ,CAC5B,eAAe,CAAE,eAAe,CAChC,MAAM,CAAE,IAAI,SAAS,CAAC,CAAC,IAAI,eAAe,CAAC,CAAC,IAAI,aAAa,CAAC,CAAC,IAAI,cAAc,CAAC,CAAC,IAAI,eAAe,CAAC,CAAC,IAAI,WAAW,CAAC,CAAC,IAAI,aAAa,CAAC,CAAC,IAAI,UAAU,CAAC,CAAC,IAAI,gBAAgB,CACnL"}`},Sn={base:"px-2 py-1 mx-1 gap-2",md:"px-2 py-1 mx-1 gap-2 text-xs",sm:"px-1 py-0.5 mx-0.5 gap-1 text-xs",lg:"px-4 py-2 mx-2 gap-4"},Te={base:"w-4",md:"w-4",sm:"w-3",lg:"w-5"},ge={success:"positive",warn:"warning",error:"negative"},kn=n=>ge[n]!==void 0,Mn=n=>kn(n)?(console.warn(`The variant "${n}" is deprecated. Please use "${ge[n]}" instead.`),ge[n]):n,De=U((n,e,t,h)=>{let{icon:r=void 0}=e,{iconPosition:A="right"}=e,{size:l="base"}=e,{iconSize:d=l}=e,{variant:u="info"}=e,{outline:m=!1}=e,{disabled:p=!1}=e,{formaction:g=void 0}=e,{type:s="button"}=e;return e.icon===void 0&&t.icon&&r!==void 0&&t.icon(r),e.iconPosition===void 0&&t.iconPosition&&A!==void 0&&t.iconPosition(A),e.size===void 0&&t.size&&l!==void 0&&t.size(l),e.iconSize===void 0&&t.iconSize&&d!==void 0&&t.iconSize(d),e.variant===void 0&&t.variant&&u!==void 0&&t.variant(u),e.outline===void 0&&t.outline&&m!==void 0&&t.outline(m),e.disabled===void 0&&t.disabled&&p!==void 0&&t.disabled(p),e.formaction===void 0&&t.formaction&&g!==void 0&&t.formaction(g),e.type===void 0&&t.type&&s!==void 0&&t.type(s),n.css.add(En),u=Mn(u),g&&(s="submit"),`<button${O("type",s,0)} ${p?"disabled":""}${O("formaction",g,0)} class="${["flex items-center transition-colors rounded variant-"+C(u,!0)+" "+C(Sn[l],!0)+" svelte-1c08hho",m?"outlined":""].join(" ").trim()}">${A==="left"&&r?`${c(ot,"Icon").$$render(n,{src:r,class:Te[d]},{},{})}`:""} ${h.default?h.default({}):""} ${A==="right"&&r?`${c(ot,"Icon").$$render(n,{src:r,class:Te[d]},{},{})}`:""} </button>`}),Tn={code:"dialog.svelte-t161xa::backdrop{background-color:hsl(var(--twc-base-100) / 0.8);--tw-backdrop-blur:blur(4px);-webkit-backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia);backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia)}.slideOut.svelte-t161xa::backdrop{all:unset}@keyframes svelte-t161xa-slideInFromBottom{0%{transform:translateY(70%);opacity:0}90%{opacity:0.3}100%{transform:translateY(0%);opacity:0.95}}.slideIn.svelte-t161xa{animation:svelte-t161xa-slideInFromBottom 0.3s ease-in-out}@keyframes svelte-t161xa-slideOutToBottom{0%{transform:translateY(0%);opacity:1}100%{transform:translateY(40%);opacity:0}}.slideOut.svelte-t161xa{animation:svelte-t161xa-slideOutToBottom 0.3s ease-in-out}",map:`{"version":3,"file":"Fullscreen.svelte","sources":["Fullscreen.svelte"],"sourcesContent":["<script context=\\"module\\">\\n\\texport const evidenceInclude = true;\\n<\/script>\\n\\n<script>\\n\\timport { X } from '@steeze-ui/tabler-icons';\\n\\timport { Icon } from '@steeze-ui/svelte-icon';\\n\\n\\texport let open = false;\\n\\texport let search = false;\\n\\n\\t/** @type {import(\\"svelte/action\\").Action<HTMLDialogElement, boolean>}*/\\n\\tfunction popup(node, isOpen) {\\n\\t\\tif (isOpen) {\\n\\t\\t\\tnode.showModal();\\n\\t\\t} else {\\n\\t\\t\\tnode.close();\\n\\t\\t}\\n\\n\\t\\t/** @type {HTMLDialogElement[\\"onclick\\"]} */\\n\\t\\tfunction handleDialogClick(e) {\\n\\t\\t\\tif (e.target === node) {\\n\\t\\t\\t\\topen = false;\\n\\t\\t\\t}\\n\\t\\t}\\n\\n\\t\\t/** @type {HTMLDialogElement[\\"onclick\\"]} */\\n\\t\\tfunction handleCloseClick() {\\n\\t\\t\\topen = false;\\n\\t\\t}\\n\\n\\t\\t/** @type {HTMLDialogElement[\\"onkeydown\\"]} */\\n\\t\\tfunction handleKeyDown(event) {\\n\\t\\t\\tif (event.key === 'Escape') {\\n\\t\\t\\t\\topen = false;\\n\\t\\t\\t}\\n\\t\\t}\\n\\n\\t\\tnode.addEventListener('keydown', handleKeyDown);\\n\\t\\tnode.addEventListener('click', handleDialogClick);\\n\\t\\tconst closeButton = node.firstElementChild;\\n\\t\\tcloseButton.addEventListener('click', handleCloseClick);\\n\\n\\t\\treturn {\\n\\t\\t\\tupdate(isOpen) {\\n\\t\\t\\t\\tif (isOpen) {\\n\\t\\t\\t\\t\\tnode.showModal();\\n\\t\\t\\t\\t\\tdocument.body.style.overflow = 'hidden';\\n\\t\\t\\t\\t} else {\\n\\t\\t\\t\\t\\tnode.addEventListener('animationend', () => {\\n\\t\\t\\t\\t\\t\\tif (!open) {\\n\\t\\t\\t\\t\\t\\t\\tnode.close();\\n\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t});\\n\\t\\t\\t\\t\\tdocument.body.style.overflow = '';\\n\\t\\t\\t\\t}\\n\\t\\t\\t},\\n\\t\\t\\tdestroy() {\\n\\t\\t\\t\\tnode.removeEventListener('keydown', handleKeyDown);\\n\\t\\t\\t\\tnode.removeEventListener('click', handleDialogClick);\\n\\t\\t\\t\\tcloseButton.removeEventListener('click', handleCloseClick);\\n\\t\\t\\t}\\n\\t\\t};\\n\\t}\\n<\/script>\\n\\n<dialog\\n\\tuse:popup={open}\\n\\tclass=\\"w-[90vw] rounded-lg fixed border border-base-300 text-base-content shadow-lg bg-base-100 {open\\n\\t\\t? 'slideIn'\\n\\t\\t: 'slideOut'}\\"\\n>\\n\\t<button\\n\\t\\tclass=\\"absolute top-4 right-[18.5px] hover:bg-base-200 rounded-lg p-1 focus:outline-none focus:ring-1 focus:ring-base-300\\"\\n\\t\\t><Icon class=\\"w-6 h-6 \\" src={X} /></button\\n\\t>\\n\\t<div class=\\"py-2 px-6 {!search ? 'pt-6' : ''}\\">\\n\\t\\t<slot />\\n\\t</div>\\n</dialog>\\n\\n<style>\\n\\t/* your styles go here */\\n\\tdialog::backdrop {\\n\\t\\tbackground-color: hsl(var(--twc-base-100) / 0.8);\\n\\t\\t--tw-backdrop-blur: blur(4px);\\n\\t\\t-webkit-backdrop-filter: var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia);\\n\\t\\tbackdrop-filter: var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia);\\n}\\n\\n\\t.slideOut::backdrop {\\n\\t\\tall: unset;\\n\\t}\\n\\n\\t@keyframes slideInFromBottom {\\n\\t\\t0% {\\n\\t\\t\\ttransform: translateY(70%);\\n\\t\\t\\topacity: 0;\\n\\t\\t}\\n\\t\\t90% {\\n\\t\\t\\topacity: 0.3;\\n\\t\\t}\\n\\t\\t100% {\\n\\t\\t\\ttransform: translateY(0%);\\n\\t\\t\\topacity: 0.95;\\n\\t\\t}\\n\\t}\\n\\n\\t.slideIn {\\n\\t\\tanimation: slideInFromBottom 0.3s ease-in-out;\\n\\t}\\n\\n\\t@keyframes slideOutToBottom {\\n\\t\\t0% {\\n\\t\\t\\ttransform: translateY(0%);\\n\\t\\t\\topacity: 1;\\n\\t\\t}\\n\\t\\t100% {\\n\\t\\t\\ttransform: translateY(40%);\\n\\t\\t\\topacity: 0;\\n\\t\\t}\\n\\t}\\n\\n\\t.slideOut {\\n\\t\\tanimation: slideOutToBottom 0.3s ease-in-out;\\n\\t}</style>\\n"],"names":[],"mappings":"AAmFC,oBAAM,UAAW,CAChB,gBAAgB,CAAE,IAAI,IAAI,cAAc,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAChD,kBAAkB,CAAE,SAAS,CAC7B,uBAAuB,CAAE,IAAI,kBAAkB,CAAC,CAAC,IAAI,wBAAwB,CAAC,CAAC,IAAI,sBAAsB,CAAC,CAAC,IAAI,uBAAuB,CAAC,CAAC,IAAI,wBAAwB,CAAC,CAAC,IAAI,oBAAoB,CAAC,CAAC,IAAI,qBAAqB,CAAC,CAAC,IAAI,sBAAsB,CAAC,CAAC,IAAI,mBAAmB,CAAC,CAC/Q,eAAe,CAAE,IAAI,kBAAkB,CAAC,CAAC,IAAI,wBAAwB,CAAC,CAAC,IAAI,sBAAsB,CAAC,CAAC,IAAI,uBAAuB,CAAC,CAAC,IAAI,wBAAwB,CAAC,CAAC,IAAI,oBAAoB,CAAC,CAAC,IAAI,qBAAqB,CAAC,CAAC,IAAI,sBAAsB,CAAC,CAAC,IAAI,mBAAmB,CACxQ,CAEC,uBAAS,UAAW,CACnB,GAAG,CAAE,KACN,CAEA,WAAW,+BAAkB,CAC5B,EAAG,CACF,SAAS,CAAE,WAAW,GAAG,CAAC,CAC1B,OAAO,CAAE,CACV,CACA,GAAI,CACH,OAAO,CAAE,GACV,CACA,IAAK,CACJ,SAAS,CAAE,WAAW,EAAE,CAAC,CACzB,OAAO,CAAE,IACV,CACD,CAEA,sBAAS,CACR,SAAS,CAAE,+BAAiB,CAAC,IAAI,CAAC,WACnC,CAEA,WAAW,8BAAiB,CAC3B,EAAG,CACF,SAAS,CAAE,WAAW,EAAE,CAAC,CACzB,OAAO,CAAE,CACV,CACA,IAAK,CACJ,SAAS,CAAE,WAAW,GAAG,CAAC,CAC1B,OAAO,CAAE,CACV,CACD,CAEA,uBAAU,CACT,SAAS,CAAE,8BAAgB,CAAC,IAAI,CAAC,WAClC"}`},Dn=U((n,e,t,h)=>{let{open:r=!1}=e,{search:A=!1}=e;return e.open===void 0&&t.open&&r!==void 0&&t.open(r),e.search===void 0&&t.search&&A!==void 0&&t.search(A),n.css.add(Tn),`<dialog class="${"w-[90vw] rounded-lg fixed border border-base-300 text-base-content shadow-lg bg-base-100 "+C(r?"slideIn":"slideOut",!0)+" svelte-t161xa"}"><button class="absolute top-4 right-[18.5px] hover:bg-base-200 rounded-lg p-1 focus:outline-none focus:ring-1 focus:ring-base-300">${c(ot,"Icon").$$render(n,{class:"w-6 h-6 ",src:mn},{},{})}</button> <div class="${"py-2 px-6 "+C(A?"":"pt-6",!0)}">${h.default?h.default({}):""}</div> </dialog>`}),zn={code:".search-container.svelte-116nqgn{border-width:1px;--tw-border-opacity:1;border-color:hsl(var(--twc-base-300) / var(--twc-base-300-opacity, var(--tw-border-opacity)));--tw-bg-opacity:1;background-color:hsl(var(--twc-base-100) / var(--twc-base-100-opacity, var(--tw-bg-opacity)));width:30%;display:block;align-items:center;border-radius:4px;height:22px;position:relative;margin:25px 3px 10px 0px;box-sizing:content-box}.search-icon.svelte-116nqgn{height:16px;width:16px;padding-left:3px;margin:0;position:absolute;top:50%;transform:translateY(-50%);-ms-transform:translateY(-50%);box-sizing:content-box}.search-bar.svelte-116nqgn{--tw-bg-opacity:1;background-color:hsl(var(--twc-base-100) / var(--twc-base-100-opacity, var(--tw-bg-opacity)));margin:0;position:absolute;top:50%;transform:translateY(-50%);-ms-transform:translateY(-50%);border:none;padding-left:23px;font-size:9pt;width:calc(100% - 10px);font-family:Arial;line-height:normal}input.search-bar.svelte-116nqgn::-moz-placeholder{--tw-text-opacity:1;color:hsl(var(--twc-base-content-muted) / var(--twc-base-content-muted-opacity, var(--tw-text-opacity)))}input.search-bar.svelte-116nqgn::placeholder{--tw-text-opacity:1;color:hsl(var(--twc-base-content-muted) / var(--twc-base-content-muted-opacity, var(--tw-text-opacity)))}.svelte-116nqgn:focus{outline:none}@media(max-width: 600px){.search-container.svelte-116nqgn{width:98%;height:28px}.search-bar.svelte-116nqgn{font-size:16px;width:calc(100% - 20px)}}@media print{.search-container.svelte-116nqgn{display:none}}",map:`{"version":3,"file":"SearchBar.svelte","sources":["SearchBar.svelte"],"sourcesContent":["<script context=\\"module\\">\\n\\texport const evidenceInclude = true;\\n<\/script>\\n\\n<script>\\n\\timport { Icon } from '@steeze-ui/svelte-icon';\\n\\timport { Search } from '@steeze-ui/tabler-icons';\\n\\n\\texport let placeholder = 'Search';\\n\\texport let value;\\n\\texport let searchFunction;\\n<\/script>\\n\\n<div class=\\"search-container\\">\\n\\t<input\\n\\t\\tclass=\\"search-bar\\"\\n\\t\\ttype=\\"text\\"\\n\\t\\t{placeholder}\\n\\t\\tbind:value\\n\\t\\ton:keyup={() => searchFunction(value)}\\n\\t/>\\n\\t<div class=\\"search-icon\\">\\n\\t\\t<Icon src={Search} class=\\"pl-0.5\\" />\\n\\t</div>\\n</div>\\n\\n<style>\\n\\t.search-container {\\n\\t\\tborder-width: 1px;\\n\\t\\t--tw-border-opacity: 1;\\n\\t\\tborder-color: hsl(var(--twc-base-300) / var(--twc-base-300-opacity, var(--tw-border-opacity)));\\n\\t\\t--tw-bg-opacity: 1;\\n\\t\\tbackground-color: hsl(var(--twc-base-100) / var(--twc-base-100-opacity, var(--tw-bg-opacity)));\\n\\t\\twidth: 30%;\\n\\t\\tdisplay: block;\\n\\t\\talign-items: center;\\n\\t\\tborder-radius: 4px;\\n\\t\\theight: 22px;\\n\\t\\tposition: relative;\\n\\t\\tmargin: 25px 3px 10px 0px;\\n\\t\\tbox-sizing: content-box;\\n}\\n\\n\\t.search-icon {\\n\\t\\theight: 16px;\\n\\t\\twidth: 16px;\\n\\t\\tpadding-left: 3px;\\n\\t\\tmargin: 0;\\n\\t\\tposition: absolute;\\n\\t\\ttop: 50%;\\n\\t\\ttransform: translateY(-50%);\\n\\t\\t-ms-transform: translateY(-50%);\\n\\t\\tbox-sizing: content-box;\\n\\t}\\n\\n\\t.search-bar {\\n\\t\\t--tw-bg-opacity: 1;\\n\\t\\tbackground-color: hsl(var(--twc-base-100) / var(--twc-base-100-opacity, var(--tw-bg-opacity)));\\n\\t\\tmargin: 0;\\n\\t\\tposition: absolute;\\n\\t\\ttop: 50%;\\n\\t\\ttransform: translateY(-50%);\\n\\t\\t-ms-transform: translateY(-50%);\\n\\n\\t\\tborder: none;\\n\\t\\tpadding-left: 23px;\\n\\n\\t\\tfont-size: 9pt;\\n\\n\\t\\twidth: calc(100% - 10px);\\n\\n\\t\\tfont-family: Arial;\\n\\t\\tline-height: normal;\\n}\\n\\n\\tinput.search-bar::-moz-placeholder {\\n\\t\\t--tw-text-opacity: 1;\\n\\t\\tcolor: hsl(var(--twc-base-content-muted) / var(--twc-base-content-muted-opacity, var(--tw-text-opacity)));\\n}\\n\\n\\tinput.search-bar::placeholder {\\n\\t\\t--tw-text-opacity: 1;\\n\\t\\tcolor: hsl(var(--twc-base-content-muted) / var(--twc-base-content-muted-opacity, var(--tw-text-opacity)));\\n}\\n\\n\\t*:focus {\\n\\t\\toutline: none;\\n\\t}\\n\\n\\t@media (max-width: 600px) {\\n\\t\\t.search-container {\\n\\t\\t\\twidth: 98%;\\n\\t\\t\\theight: 28px;\\n\\t\\t}\\n\\n\\t\\t.search-bar {\\n\\t\\t\\tfont-size: 16px;\\n\\t\\t\\twidth: calc(100% - 20px);\\n\\t\\t}\\n\\t}\\n\\n\\t@media print {\\n\\t\\t.search-container {\\n\\t\\t\\tdisplay: none;\\n\\t\\t}\\n\\t}</style>\\n"],"names":[],"mappings":"AA2BC,gCAAkB,CACjB,YAAY,CAAE,GAAG,CACjB,mBAAmB,CAAE,CAAC,CACtB,YAAY,CAAE,IAAI,IAAI,cAAc,CAAC,CAAC,CAAC,CAAC,IAAI,sBAAsB,CAAC,yBAAyB,CAAC,CAAC,CAC9F,eAAe,CAAE,CAAC,CAClB,gBAAgB,CAAE,IAAI,IAAI,cAAc,CAAC,CAAC,CAAC,CAAC,IAAI,sBAAsB,CAAC,qBAAqB,CAAC,CAAC,CAC9F,KAAK,CAAE,GAAG,CACV,OAAO,CAAE,KAAK,CACd,WAAW,CAAE,MAAM,CACnB,aAAa,CAAE,GAAG,CAClB,MAAM,CAAE,IAAI,CACZ,QAAQ,CAAE,QAAQ,CAClB,MAAM,CAAE,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,GAAG,CACzB,UAAU,CAAE,WACd,CAEC,2BAAa,CACZ,MAAM,CAAE,IAAI,CACZ,KAAK,CAAE,IAAI,CACX,YAAY,CAAE,GAAG,CACjB,MAAM,CAAE,CAAC,CACT,QAAQ,CAAE,QAAQ,CAClB,GAAG,CAAE,GAAG,CACR,SAAS,CAAE,WAAW,IAAI,CAAC,CAC3B,aAAa,CAAE,WAAW,IAAI,CAAC,CAC/B,UAAU,CAAE,WACb,CAEA,0BAAY,CACX,eAAe,CAAE,CAAC,CAClB,gBAAgB,CAAE,IAAI,IAAI,cAAc,CAAC,CAAC,CAAC,CAAC,IAAI,sBAAsB,CAAC,qBAAqB,CAAC,CAAC,CAC9F,MAAM,CAAE,CAAC,CACT,QAAQ,CAAE,QAAQ,CAClB,GAAG,CAAE,GAAG,CACR,SAAS,CAAE,WAAW,IAAI,CAAC,CAC3B,aAAa,CAAE,WAAW,IAAI,CAAC,CAE/B,MAAM,CAAE,IAAI,CACZ,YAAY,CAAE,IAAI,CAElB,SAAS,CAAE,GAAG,CAEd,KAAK,CAAE,KAAK,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,CAExB,WAAW,CAAE,KAAK,CAClB,WAAW,CAAE,MACf,CAEC,KAAK,0BAAW,kBAAmB,CAClC,iBAAiB,CAAE,CAAC,CACpB,KAAK,CAAE,IAAI,IAAI,wBAAwB,CAAC,CAAC,CAAC,CAAC,IAAI,gCAAgC,CAAC,uBAAuB,CAAC,CAC1G,CAEC,KAAK,0BAAW,aAAc,CAC7B,iBAAiB,CAAE,CAAC,CACpB,KAAK,CAAE,IAAI,IAAI,wBAAwB,CAAC,CAAC,CAAC,CAAC,IAAI,gCAAgC,CAAC,uBAAuB,CAAC,CAC1G,CAEC,eAAC,MAAO,CACP,OAAO,CAAE,IACV,CAEA,MAAO,YAAY,KAAK,CAAE,CACzB,gCAAkB,CACjB,KAAK,CAAE,GAAG,CACV,MAAM,CAAE,IACT,CAEA,0BAAY,CACX,SAAS,CAAE,IAAI,CACf,KAAK,CAAE,KAAK,IAAI,CAAC,CAAC,CAAC,IAAI,CACxB,CACD,CAEA,OAAO,KAAM,CACZ,gCAAkB,CACjB,OAAO,CAAE,IACV,CACD"}`},On=U((n,e,t,h)=>{let{placeholder:r="Search"}=e,{value:A}=e,{searchFunction:l}=e;return e.placeholder===void 0&&t.placeholder&&r!==void 0&&t.placeholder(r),e.value===void 0&&t.value&&A!==void 0&&t.value(A),e.searchFunction===void 0&&t.searchFunction&&l!==void 0&&t.searchFunction(l),n.css.add(zn),`<div class="search-container svelte-116nqgn"><input class="search-bar svelte-116nqgn" type="text"${O("placeholder",r,0)}${O("value",A,0)}> <div class="search-icon svelte-116nqgn">${c(ot,"Icon").$$render(n,{src:pn,class:"pl-0.5"},{},{})}</div> </div>`}),ze=U((n,e,t,h)=>{let{data:r}=e,{link:A}=e;return e.data===void 0&&t.data&&r!==void 0&&t.data(r),e.link===void 0&&t.link&&A!==void 0&&t.link(A),` ${Bn?`${tt(Array.from(new Set(r.map(l=>l[A]))),l=>`<a${O("href",he(l),0)} class="hidden" aria-hidden="true">${C("")}</a>`)}`:""}`});function xt(n,e){const t=e.filter(h=>h.id===n.id);if(t===void 0||t.length!==1){const h=n.id===void 0?new Error('please add an "id" property to all the <Column ... />'):new Error(`column with id: "${n.id}" not found`);return console.warn(h.message),""}return t[0]}function Oe(n,e,t){if(!t||!n.length)return null;let h=0,r=0;return n.forEach(A=>{const l=Number(A[e]??0),d=Number(A[t]??0);h+=l*d,r+=d}),r>0?h/r:0}function oe(n,e,t,h,r=null){if(!t&&h==="number"&&(t="sum"),!n||!n.length)return null;if(h!=="number"&&["sum","min","max","mean","weightedMean","median",void 0].includes(t))return"-";const A=n.map(l=>l[e]).filter(l=>l!==void 0);switch(t){case"sum":return A.reduce((l,d)=>l+Number(d),0);case"min":return Math.min(...A);case"max":return Math.max(...A);case"mean":return A.length?A.reduce((l,d)=>l+Number(d),0)/A.length:"-";case"count":return n.length;case"countDistinct":return new Set(A).size;case"weightedMean":{if(!r)return"Weight column name required for weightedMean";let l=0,d=n.reduce((u,m)=>{const p=m[r]||0;return l+=p,u+(Number(m[e])||0)*p},0);return l>0?d/l:null}case"median":{const l=A.sort((u,m)=>u-m),d=Math.floor(l.length/2);return l.length%2!==0?l[d]:(l[d-1]+l[d])/2}default:return`${t}`}}function Gn(n,e){const t=n.filter(h=>!e.includes(h));return[...e,...t]}const _n={code:".string.svelte-1hwgyu4{text-align:left}.date.svelte-1hwgyu4{text-align:left}.number.svelte-1hwgyu4{text-align:right}.boolean.svelte-1hwgyu4{text-align:left}.index.svelte-1hwgyu4{--tw-text-opacity:1;color:hsl(var(--twc-base-content-muted) / var(--twc-base-content-muted-opacity, var(--tw-text-opacity)));text-align:left;max-width:-moz-min-content;max-width:min-content}.svelte-1hwgyu4:focus{outline:none}",map:`{"version":3,"file":"TableCell.svelte","sources":["TableCell.svelte"],"sourcesContent":["<script>\\n\\texport let dataType = undefined;\\n\\texport let align = undefined;\\n\\texport let height = undefined;\\n\\texport let width = undefined;\\n\\texport let wrap = undefined;\\n\\n\\texport let verticalAlign = 'middle';\\n\\texport let rowSpan = 1;\\n\\texport let colSpan = 1;\\n\\texport let show = true;\\n\\texport let cellColor = undefined;\\n\\texport let fontColor = undefined;\\n\\n\\texport let topBorder = undefined;\\n\\texport let paddingLeft = undefined;\\n\\texport let borderBottom = undefined;\\n\\n\\texport let compact = false;\\n<\/script>\\n\\n<td\\n\\trole=\\"cell\\"\\n\\tclass=\\"{$$restProps.class ||\\n\\t\\t''} {dataType} {topBorder} whitespace-nowrap overflow-hidden first:pl-[3px]\\n\\t{compact ? 'text-xs py-[1px] pr-[16.5px]' : 'py-[2px] pl-[6px] pr-[13px]'}\\n\\t\\"\\n\\tstyle:text-align={align}\\n\\tstyle:height\\n\\tstyle:width\\n\\tstyle:white-space={wrap ? 'normal' : 'nowrap'}\\n\\tstyle:vertical-align={verticalAlign}\\n\\tstyle:display={show ? undefined : 'none'}\\n\\trowspan={rowSpan}\\n\\tcolspan={colSpan}\\n\\tstyle:background-color={cellColor}\\n\\tstyle:color={fontColor}\\n\\tstyle:padding-left={paddingLeft}\\n\\tstyle:border-bottom={borderBottom}\\n>\\n\\t<slot />\\n</td>\\n\\n<style>\\n\\t.string {\\n\\t\\ttext-align: left;\\n\\t}\\n\\n\\t.date {\\n\\t\\ttext-align: left;\\n\\t}\\n\\n\\t.number {\\n\\t\\ttext-align: right;\\n\\t}\\n\\n\\t.boolean {\\n\\t\\ttext-align: left;\\n\\t}\\n\\n\\t.index {\\n\\t\\t--tw-text-opacity: 1;\\n\\t\\tcolor: hsl(var(--twc-base-content-muted) / var(--twc-base-content-muted-opacity, var(--tw-text-opacity)));\\n\\t\\ttext-align: left;\\n\\t\\tmax-width: -moz-min-content;\\n\\t\\tmax-width: min-content;\\n}\\n\\n\\t*:focus {\\n\\t\\toutline: none;\\n\\t}</style>\\n"],"names":[],"mappings":"AA4CC,sBAAQ,CACP,UAAU,CAAE,IACb,CAEA,oBAAM,CACL,UAAU,CAAE,IACb,CAEA,sBAAQ,CACP,UAAU,CAAE,KACb,CAEA,uBAAS,CACR,UAAU,CAAE,IACb,CAEA,qBAAO,CACN,iBAAiB,CAAE,CAAC,CACpB,KAAK,CAAE,IAAI,IAAI,wBAAwB,CAAC,CAAC,CAAC,CAAC,IAAI,gCAAgC,CAAC,uBAAuB,CAAC,CAAC,CACzG,UAAU,CAAE,IAAI,CAChB,SAAS,CAAE,gBAAgB,CAC3B,SAAS,CAAE,WACb,CAEC,eAAC,MAAO,CACP,OAAO,CAAE,IACV"}`},Bt=U((n,e,t,h)=>{let r=an(e,["dataType","align","height","width","wrap","verticalAlign","rowSpan","colSpan","show","cellColor","fontColor","topBorder","paddingLeft","borderBottom","compact"]),{dataType:A=void 0}=e,{align:l=void 0}=e,{height:d=void 0}=e,{width:u=void 0}=e,{wrap:m=void 0}=e,{verticalAlign:p="middle"}=e,{rowSpan:g=1}=e,{colSpan:s=1}=e,{show:a=!0}=e,{cellColor:w=void 0}=e,{fontColor:b=void 0}=e,{topBorder:S=void 0}=e,{paddingLeft:y=void 0}=e,{borderBottom:x=void 0}=e,{compact:I=!1}=e;return e.dataType===void 0&&t.dataType&&A!==void 0&&t.dataType(A),e.align===void 0&&t.align&&l!==void 0&&t.align(l),e.height===void 0&&t.height&&d!==void 0&&t.height(d),e.width===void 0&&t.width&&u!==void 0&&t.width(u),e.wrap===void 0&&t.wrap&&m!==void 0&&t.wrap(m),e.verticalAlign===void 0&&t.verticalAlign&&p!==void 0&&t.verticalAlign(p),e.rowSpan===void 0&&t.rowSpan&&g!==void 0&&t.rowSpan(g),e.colSpan===void 0&&t.colSpan&&s!==void 0&&t.colSpan(s),e.show===void 0&&t.show&&a!==void 0&&t.show(a),e.cellColor===void 0&&t.cellColor&&w!==void 0&&t.cellColor(w),e.fontColor===void 0&&t.fontColor&&b!==void 0&&t.fontColor(b),e.topBorder===void 0&&t.topBorder&&S!==void 0&&t.topBorder(S),e.paddingLeft===void 0&&t.paddingLeft&&y!==void 0&&t.paddingLeft(y),e.borderBottom===void 0&&t.borderBottom&&x!==void 0&&t.borderBottom(x),e.compact===void 0&&t.compact&&I!==void 0&&t.compact(I),n.css.add(_n),`<td role="cell" class="${C(r.class||"",!0)+" "+C(A,!0)+" "+C(S,!0)+" whitespace-nowrap overflow-hidden first:pl-[3px] "+C(I?"text-xs py-[1px] pr-[16.5px]":"py-[2px] pl-[6px] pr-[13px]",!0)+" svelte-1hwgyu4"}"${O("rowspan",g,0)}${O("colspan",s,0)}${At({"text-align":l,height:d,width:u,"white-space":m?"normal":"nowrap","vertical-align":p,display:a?void 0:"none","background-color":w,color:b,"padding-left":y,"border-bottom":x})}>${h.default?h.default({}):""} </td>`}),Fn={code:".row-lines.svelte-174z7k0{border-bottom-width:1px;--tw-border-opacity:1;border-color:hsl(var(--twc-base-300) / var(--twc-base-300-opacity, var(--tw-border-opacity)))}.shaded-row.svelte-174z7k0{--tw-bg-opacity:1;background-color:hsl(var(--twc-base-200) / var(--twc-base-200-opacity, var(--tw-bg-opacity)))}.svelte-174z7k0:focus{outline:none}.row-link.svelte-174z7k0{cursor:pointer}.row-link.svelte-174z7k0:hover{--tw-bg-opacity:1;background-color:hsl(var(--twc-base-200) / var(--twc-base-200-opacity, var(--tw-bg-opacity)))}",map:`{"version":3,"file":"TableRow.svelte","sources":["TableRow.svelte"],"sourcesContent":["<script>\\n\\timport { goto, preloadData } from '$app/navigation';\\n\\timport { safeExtractColumn } from './datatable.js';\\n\\timport Delta from '../core/Delta.svelte';\\n\\timport {\\n\\t\\tformatValue,\\n\\t\\tgetFormatObjectFromString\\n\\t} from '@evidence-dev/component-utilities/formatting';\\n\\timport TableCell from './TableCell.svelte';\\n\\timport chroma from 'chroma-js';\\n\\timport { Icon } from '@steeze-ui/svelte-icon';\\n\\timport { ChevronRight } from '@steeze-ui/tabler-icons';\\n\\timport Sparkline from '../core/_Sparkline.svelte';\\n\\timport { addBasePath } from '@evidence-dev/sdk/utils/svelte';\\n\\timport { getThemeStores } from '../../../themes/themes.js';\\n\\n\\texport let displayedData = undefined;\\n\\texport let rowShading = undefined;\\n\\texport let link = undefined;\\n\\texport let rowNumbers = undefined;\\n\\texport let rowLines = undefined;\\n\\texport let index = undefined;\\n\\texport let columnSummary = undefined;\\n\\texport let grouped = false; // if part of a group - styling will be adjusted\\n\\texport let groupType = undefined;\\n\\texport let groupColumn = undefined;\\n\\texport let rowSpan = undefined;\\n\\texport let groupNamePosition = 'middle'; // middle (default) | top | bottom\\n\\texport let orderedColumns = undefined;\\n\\texport let compact = undefined;\\n\\n\\tconst isUrlExternal = (url) =>\\n\\t\\tnew URL(url, window.location.origin).origin !== window.location.origin;\\n\\n\\tconst preloadLink = async (row) => {\\n\\t\\tif (!link || !row[link]) return;\\n\\t\\tconst url = row[link];\\n\\n\\t\\tif (isUrlExternal(url)) return;\\n\\n\\t\\tawait preloadData(url);\\n\\t};\\n\\n\\tconst navigateToLink = async (row) => {\\n\\t\\tif (!link || !row[link]) return;\\n\\t\\tconst url = row[link];\\n\\n\\t\\tif (isUrlExternal(url)) {\\n\\t\\t\\twindow.location = addBasePath(url);\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\n\\t\\tawait goto(addBasePath(row[link]));\\n\\t};\\n\\n\\tconst { theme } = getThemeStores();\\n<\/script>\\n\\n{#each displayedData as row, i}\\n\\t<tr\\n\\t\\tclass:shaded-row={rowShading && i % 2 === 1}\\n\\t\\tclass:row-link={link && row[link]}\\n\\t\\ton:mouseover={() => preloadLink(row)}\\n\\t\\ton:focus={() => preloadLink(row)}\\n\\t\\ton:click={() => navigateToLink(row)}\\n\\t\\tclass:row-lines={rowLines}\\n\\t>\\n\\t\\t{#if rowNumbers && groupType !== 'section'}\\n\\t\\t\\t<TableCell class={'index w-[2%]'} {compact}>\\n\\t\\t\\t\\t{(index + i + 1).toLocaleString()}\\n\\t\\t\\t</TableCell>\\n\\t\\t{/if}\\n\\n\\t\\t{#each orderedColumns as column, k}\\n\\t\\t\\t{@const useCol = safeExtractColumn(column, columnSummary)}\\n\\t\\t\\t{@const scaleCol = column.scaleColumn\\n\\t\\t\\t\\t? columnSummary.find((d) => d.id === column.scaleColumn)\\n\\t\\t\\t\\t: useCol}\\n\\t\\t\\t{@const column_min = column.colorMin ?? scaleCol.columnUnitSummary?.min}\\n\\t\\t\\t{@const column_max = column.colorMax ?? scaleCol.columnUnitSummary?.max}\\n\\t\\t\\t{@const is_nonzero =\\n\\t\\t\\t\\tcolumn_max - column_min !== 0 && !isNaN(column_max) && !isNaN(column_min)}\\n\\t\\t\\t{@const column_format = column.fmt\\n\\t\\t\\t\\t? getFormatObjectFromString(column.fmt, useCol.format?.valueType)\\n\\t\\t\\t\\t: column.fmtColumn\\n\\t\\t\\t\\t\\t? getFormatObjectFromString(row[column.fmtColumn], useCol.format?.valuetype)\\n\\t\\t\\t\\t\\t: useCol.format}\\n\\t\\t\\t{@const color_domain =\\n\\t\\t\\t\\tcolumn.colorBreakpoints ??\\n\\t\\t\\t\\t(column.colorMid ? [column_min, column.colorMid, column_max] : [column_min, column_max])}\\n\\t\\t\\t{@const color_scale = column.colorScale\\n\\t\\t\\t\\t? chroma.scale(column.colorScale).domain(color_domain).nodata($theme.colors['base-100'])\\n\\t\\t\\t\\t: ''}\\n\\t\\t\\t{@const cell_color =\\n\\t\\t\\t\\tcolumn.contentType === 'colorscale' && is_nonzero && column.colorScale\\n\\t\\t\\t\\t\\t? column.scaleColumn\\n\\t\\t\\t\\t\\t\\t? color_scale(row[column.scaleColumn]).hex()\\n\\t\\t\\t\\t\\t\\t: color_scale(row[column.id]).hex()\\n\\t\\t\\t\\t\\t: ''}\\n\\t\\t\\t{@const font_color = column.redNegatives\\n\\t\\t\\t\\t? row[column.id] < 0\\n\\t\\t\\t\\t\\t? $theme.colors.negative\\n\\t\\t\\t\\t\\t: ''\\n\\t\\t\\t\\t: column.contentType === 'colorscale' && is_nonzero && column.colorScale\\n\\t\\t\\t\\t\\t? chroma.contrast(cell_color, $theme.colors['base-content']) <\\n\\t\\t\\t\\t\\t\\tchroma.contrast(cell_color, $theme.colors['base-100']) + 0.5\\n\\t\\t\\t\\t\\t\\t? $theme.colors['base-100']\\n\\t\\t\\t\\t\\t\\t: $theme.colors['base-content']\\n\\t\\t\\t\\t\\t: ''}\\n\\t\\t\\t{@const bottom_border =\\n\\t\\t\\t\\ti !== displayedData.length - 1 &&\\n\\t\\t\\t\\trowLines &&\\n\\t\\t\\t\\tcolumn.contentType === 'colorscale' &&\\n\\t\\t\\t\\tis_nonzero &&\\n\\t\\t\\t\\tcolumn.colorScale\\n\\t\\t\\t\\t\\t? \`1px solid \${chroma(cell_color).darken(0.5)}\`\\n\\t\\t\\t\\t\\t: ''}\\n\\t\\t\\t<TableCell\\n\\t\\t\\t\\tclass={useCol?.type}\\n\\t\\t\\t\\t{compact}\\n\\t\\t\\t\\tverticalAlign={groupType === 'section' ? groupNamePosition : undefined}\\n\\t\\t\\t\\trowSpan={groupType === 'section' && groupColumn === useCol.id && i === 0 ? rowSpan : 1}\\n\\t\\t\\t\\tshow={!(groupType === 'section' && groupColumn === useCol.id && i !== 0)}\\n\\t\\t\\t\\talign={column.align}\\n\\t\\t\\t\\tpaddingLeft={k === 0 && grouped && groupType === 'accordion' && !rowNumbers\\n\\t\\t\\t\\t\\t? '28px'\\n\\t\\t\\t\\t\\t: undefined}\\n\\t\\t\\t\\theight={column.height}\\n\\t\\t\\t\\twidth={column.width}\\n\\t\\t\\t\\twrap={column.wrap}\\n\\t\\t\\t\\tcellColor={cell_color}\\n\\t\\t\\t\\tfontColor={font_color}\\n\\t\\t\\t\\tborderBottom={bottom_border}\\n\\t\\t\\t>\\n\\t\\t\\t\\t{#if column.contentType === 'image' && row[column.id] !== undefined}\\n\\t\\t\\t\\t\\t<img\\n\\t\\t\\t\\t\\t\\tsrc={row[column.id]}\\n\\t\\t\\t\\t\\t\\talt={column.alt\\n\\t\\t\\t\\t\\t\\t\\t? row[column.alt]\\n\\t\\t\\t\\t\\t\\t\\t: row[column.id].replace(/^(.*[/])/g, '').replace(/[.][^.]+$/g, '')}\\n\\t\\t\\t\\t\\t\\tclass=\\"mx-auto my-2 max-w-[unset] rounded-[unset]\\"\\n\\t\\t\\t\\t\\t\\tstyle:height={column.height}\\n\\t\\t\\t\\t\\t\\tstyle:width={column.width}\\n\\t\\t\\t\\t\\t/>\\n\\t\\t\\t\\t{:else if column.contentType === 'link' && row[column.id] !== undefined}\\n\\t\\t\\t\\t\\t<!-- if \`column.linkLabel\` is a column in \`row\`, but undefined, display - -->\\n\\t\\t\\t\\t\\t{#if column.linkLabel != undefined && row[column.linkLabel] == undefined && column.linkLabel in row}\\n\\t\\t\\t\\t\\t\\t-\\n\\t\\t\\t\\t\\t{:else}\\n\\t\\t\\t\\t\\t\\t<a\\n\\t\\t\\t\\t\\t\\t\\thref={addBasePath(row[column.id])}\\n\\t\\t\\t\\t\\t\\t\\ttarget={column.openInNewTab ? '_blank' : ''}\\n\\t\\t\\t\\t\\t\\t\\tclass=\\"text-primary hover:brightness-110 transition-colors duration-200\\"\\n\\t\\t\\t\\t\\t\\t>\\n\\t\\t\\t\\t\\t\\t\\t{#if column.linkLabel != undefined}\\n\\t\\t\\t\\t\\t\\t\\t\\t<!-- if the linklabel is a column name, display that column -->\\n\\t\\t\\t\\t\\t\\t\\t\\t{#if row[column.linkLabel] != undefined}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t{@const labelSummary = safeExtractColumn({ id: column.linkLabel }, columnSummary)}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t{formatValue(\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\trow[column.linkLabel],\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tcolumn.fmt\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t? getFormatObjectFromString(column.fmt, labelSummary.format?.valueType)\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t: labelSummary.format,\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tlabelSummary.columnUnitSummary\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t)}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<!-- otherwise, consider it a label (like Details ->) and display it -->\\n\\t\\t\\t\\t\\t\\t\\t\\t{:else}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t{column.linkLabel}\\n\\t\\t\\t\\t\\t\\t\\t\\t{/if}\\n\\t\\t\\t\\t\\t\\t\\t{:else}\\n\\t\\t\\t\\t\\t\\t\\t\\t<!-- if no linkLabel is specified, display the link itself -->\\n\\t\\t\\t\\t\\t\\t\\t\\t{@const columnSummary = useCol}\\n\\t\\t\\t\\t\\t\\t\\t\\t{formatValue(\\n\\t\\t\\t\\t\\t\\t\\t\\t\\trow[column.id],\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tcolumn.fmt\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t? getFormatObjectFromString(column.fmt, columnSummary.format?.valueType)\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t: columnSummary.format,\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tcolumnSummary.columnUnitSummary\\n\\t\\t\\t\\t\\t\\t\\t\\t)}\\n\\t\\t\\t\\t\\t\\t\\t{/if}\\n\\t\\t\\t\\t\\t\\t</a>\\n\\t\\t\\t\\t\\t{/if}\\n\\t\\t\\t\\t{:else if column.contentType === 'delta' && row[column.id] !== undefined}\\n\\t\\t\\t\\t\\t<Delta\\n\\t\\t\\t\\t\\t\\tvalue={row[column.id]}\\n\\t\\t\\t\\t\\t\\tdownIsGood={column.downIsGood}\\n\\t\\t\\t\\t\\t\\tformat_object={column_format}\\n\\t\\t\\t\\t\\t\\tcolumnUnitSummary={useCol.columnUnitSummary}\\n\\t\\t\\t\\t\\t\\tshowValue={column.showValue}\\n\\t\\t\\t\\t\\t\\tshowSymbol={column.deltaSymbol}\\n\\t\\t\\t\\t\\t\\talign={column.align}\\n\\t\\t\\t\\t\\t\\tfontClass=\\"text-[9.25pt]\\"\\n\\t\\t\\t\\t\\t\\tneutralMin={column.neutralMin}\\n\\t\\t\\t\\t\\t\\tneutralMax={column.neutralMax}\\n\\t\\t\\t\\t\\t\\tchip={column.chip}\\n\\t\\t\\t\\t\\t/>\\n\\t\\t\\t\\t{:else if column.contentType === 'bar' && row[column.id] !== undefined}\\n\\t\\t\\t\\t\\t{@const total_width =\\n\\t\\t\\t\\t\\t\\tcolumn_min >= 0\\n\\t\\t\\t\\t\\t\\t\\t? column_max\\n\\t\\t\\t\\t\\t\\t\\t: column_max < 0\\n\\t\\t\\t\\t\\t\\t\\t\\t? column_min\\n\\t\\t\\t\\t\\t\\t\\t\\t: Math.abs(column_min) + column_max}\\n\\t\\t\\t\\t\\t<div\\n\\t\\t\\t\\t\\t\\tstyle=\\"width: 100%; background-color: {column.backgroundColor}; position: relative; height: 100%; display: flex; align-items: center; overflow: hidden;\\"\\n\\t\\t\\t\\t\\t>\\n\\t\\t\\t\\t\\t\\t<!-- Conditionally render axis line and negative space if any row has negative values -->\\n\\t\\t\\t\\t\\t\\t{#if column_min < 0}\\n\\t\\t\\t\\t\\t\\t\\t<!-- Axis line in the center -->\\n\\t\\t\\t\\t\\t\\t\\t<!-- <div style=\\"width: 0.5px;background-color: #000; position: absolute; left: {column_min < 0 ? (Math.abs(column_min) / (Math.abs(column_min) + column_max)) * 100 : 0}%; top: 0; height: 100%; z-index: 1;\\"></div> -->\\n\\n\\t\\t\\t\\t\\t\\t\\t<!-- Negative bar (if value is negative) -->\\n\\t\\t\\t\\t\\t\\t\\t{#if row[column.id] < 0}\\n\\t\\t\\t\\t\\t\\t\\t\\t<div\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tstyle=\\"width: {Math.min(\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tMath.abs((row[column.id] / total_width) * 100),\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t100\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t)}%; background-color: {column.negativeBarColor}; height: 100%; position: absolute; right: {(1 -\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tMath.abs(column_min) / (Math.abs(column_min) + column_max)) *\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t100}%;\\"\\n\\t\\t\\t\\t\\t\\t\\t\\t></div>\\n\\t\\t\\t\\t\\t\\t\\t{/if}\\n\\t\\t\\t\\t\\t\\t{/if}\\n\\n\\t\\t\\t\\t\\t\\t<!-- Positive bar (if value is positive or zero) -->\\n\\t\\t\\t\\t\\t\\t{#if row[column.id] >= 0}\\n\\t\\t\\t\\t\\t\\t\\t<div\\n\\t\\t\\t\\t\\t\\t\\t\\tstyle=\\"width: {Math.min(\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t(row[column.id] / total_width) * 100,\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t100\\n\\t\\t\\t\\t\\t\\t\\t\\t)}%; background-color: {column.barColor}; height: 100%; position: absolute; left: {column_min <\\n\\t\\t\\t\\t\\t\\t\\t\\t0\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t? (Math.abs(column_min) / (Math.abs(column_min) + column_max)) * 100 + '%'\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t: '0'};\\"\\n\\t\\t\\t\\t\\t\\t\\t></div>\\n\\t\\t\\t\\t\\t\\t{/if}\\n\\n\\t\\t\\t\\t\\t\\t<!-- Display label -->\\n\\t\\t\\t\\t\\t\\t<div\\n\\t\\t\\t\\t\\t\\t\\tclass:invisible={column.hideLabels}\\n\\t\\t\\t\\t\\t\\t\\tstyle=\\"\\n\\t\\t\\t\\t\\t\\t\\t\\tposition: relative; \\n\\t\\t\\t\\t\\t\\t\\t\\tz-index: 2; \\n\\t\\t\\t\\t\\t\\t\\t\\tpadding-left: 4px; \\n\\t\\t\\t\\t\\t\\t\\t\\tpadding-right: 4px; \\n\\t\\t\\t\\t\\t\\t\\t\\ttext-align: {column.align ?? 'left'};\\n\\t\\t\\t\\t\\t\\t\\t\\twidth: {(Math.abs(column_max) /\\n\\t\\t\\t\\t\\t\\t\\t\\t((column_min < 0 ? Math.abs(column_min) : 0) + Math.abs(column_max))) *\\n\\t\\t\\t\\t\\t\\t\\t\\t100}%;\\n\\t\\t\\t\\t\\t\\t\\t\\tleft: {column_min < 0 && column_max >= 0\\n\\t\\t\\t\\t\\t\\t\\t\\t? (Math.abs(column_min) / (Math.abs(column_min) + column_max)) * 100 + '%'\\n\\t\\t\\t\\t\\t\\t\\t\\t: '0'};\\"\\n\\t\\t\\t\\t\\t\\t>\\n\\t\\t\\t\\t\\t\\t\\t{formatValue(row[column.id], column_format, useCol.columnUnitSummary)}\\n\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t</div>\\n\\n\\t\\t\\t\\t\\t<!-- <div style=\\"background-color: red; max-width: '{row[column.id] / column_max * 100}%'\\">{row[column.id]}</div> -->\\n\\t\\t\\t\\t{:else if column.contentType === 'sparkline' && row[column.id] !== undefined}\\n\\t\\t\\t\\t\\t{@const alignment = column.align ?? 'center'}\\n\\t\\t\\t\\t\\t<div class=\\"items-{alignment} justify-{alignment} flex\\">\\n\\t\\t\\t\\t\\t\\t<Sparkline\\n\\t\\t\\t\\t\\t\\t\\ttype=\\"line\\"\\n\\t\\t\\t\\t\\t\\t\\tdata={[...row[column.id]]}\\n\\t\\t\\t\\t\\t\\t\\tdateCol={column.sparkX}\\n\\t\\t\\t\\t\\t\\t\\tvalueCol={column.sparkY}\\n\\t\\t\\t\\t\\t\\t\\tinteractive=\\"false\\"\\n\\t\\t\\t\\t\\t\\t\\tcolor={column.sparkColor}\\n\\t\\t\\t\\t\\t\\t\\tyScale={column.sparkYScale}\\n\\t\\t\\t\\t\\t\\t\\theight={column.sparkHeight ?? 19}\\n\\t\\t\\t\\t\\t\\t\\twidth={column.sparkWidth ?? 90}\\n\\t\\t\\t\\t\\t\\t/>\\n\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t{:else if column.contentType === 'sparkbar' && row[column.id] !== undefined}\\n\\t\\t\\t\\t\\t<div class=\\"items-center justify-center flex\\">\\n\\t\\t\\t\\t\\t\\t<Sparkline\\n\\t\\t\\t\\t\\t\\t\\ttype=\\"bar\\"\\n\\t\\t\\t\\t\\t\\t\\tdata={[...row[column.id]]}\\n\\t\\t\\t\\t\\t\\t\\tdateCol={column.sparkX}\\n\\t\\t\\t\\t\\t\\t\\tvalueCol={column.sparkY}\\n\\t\\t\\t\\t\\t\\t\\tinteractive=\\"false\\"\\n\\t\\t\\t\\t\\t\\t\\tcolor={column.sparkColor}\\n\\t\\t\\t\\t\\t\\t\\tyScale={column.sparkYScale}\\n\\t\\t\\t\\t\\t\\t\\theight={column.sparkHeight ?? 19}\\n\\t\\t\\t\\t\\t\\t\\twidth={column.sparkWidth ?? 90}\\n\\t\\t\\t\\t\\t\\t/>\\n\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t{:else if column.contentType === 'sparkarea' && row[column.id] !== undefined}\\n\\t\\t\\t\\t\\t{@const alignment =\\n\\t\\t\\t\\t\\t\\tcolumn.align === 'right' ? 'end' : column.align === 'left' ? 'start' : 'center'}\\n\\t\\t\\t\\t\\t<div class=\\"items-center justify-{alignment} flex\\">\\n\\t\\t\\t\\t\\t\\t<Sparkline\\n\\t\\t\\t\\t\\t\\t\\ttype=\\"area\\"\\n\\t\\t\\t\\t\\t\\t\\tdata={[...row[column.id]]}\\n\\t\\t\\t\\t\\t\\t\\tdateCol={column.sparkX}\\n\\t\\t\\t\\t\\t\\t\\tvalueCol={column.sparkY}\\n\\t\\t\\t\\t\\t\\t\\tinteractive=\\"false\\"\\n\\t\\t\\t\\t\\t\\t\\tcolor={column.sparkColor}\\n\\t\\t\\t\\t\\t\\t\\tyScale={column.sparkYScale}\\n\\t\\t\\t\\t\\t\\t\\theight={column.sparkHeight ?? 20}\\n\\t\\t\\t\\t\\t\\t\\twidth={column.sparkWidth ?? 80}\\n\\t\\t\\t\\t\\t\\t/>\\n\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t{:else if column.contentType === 'html' && row[column.id] !== undefined}\\n\\t\\t\\t\\t\\t{@html row[column.id]}\\n\\t\\t\\t\\t{:else}\\n\\t\\t\\t\\t\\t{formatValue(row[column.id], column_format, useCol.columnUnitSummary)}\\n\\t\\t\\t\\t{/if}\\n\\t\\t\\t</TableCell>\\n\\t\\t{/each}\\n\\n\\t\\t{#if link && row[link]}\\n\\t\\t\\t<TableCell {compact} width=\\"16px\\">\\n\\t\\t\\t\\t<Icon src={ChevronRight} class=\\"w-4 h-4\\" />\\n\\t\\t\\t\\t<a href={addBasePath(row[link])} class=\\"sr-only\\">See more</a>\\n\\t\\t\\t</TableCell>\\n\\t\\t{/if}\\n\\t</tr>\\n{/each}\\n\\n<style>\\n\\t.row-lines {\\n\\t\\tborder-bottom-width: 1px;\\n\\t\\t--tw-border-opacity: 1;\\n\\t\\tborder-color: hsl(var(--twc-base-300) / var(--twc-base-300-opacity, var(--tw-border-opacity)));\\n}\\n\\n\\t.shaded-row {\\n\\t\\t--tw-bg-opacity: 1;\\n\\t\\tbackground-color: hsl(var(--twc-base-200) / var(--twc-base-200-opacity, var(--tw-bg-opacity)));\\n}\\n\\n\\t*:focus {\\n\\t\\toutline: none;\\n\\t}\\n\\n\\t.row-link {\\n\\t\\tcursor: pointer;\\n\\t}\\n\\n\\t.row-link:hover {\\n\\t\\t--tw-bg-opacity: 1;\\n\\t\\tbackground-color: hsl(var(--twc-base-200) / var(--twc-base-200-opacity, var(--tw-bg-opacity)));\\n}</style>\\n"],"names":[],"mappings":"AAiUC,yBAAW,CACV,mBAAmB,CAAE,GAAG,CACxB,mBAAmB,CAAE,CAAC,CACtB,YAAY,CAAE,IAAI,IAAI,cAAc,CAAC,CAAC,CAAC,CAAC,IAAI,sBAAsB,CAAC,yBAAyB,CAAC,CAC/F,CAEC,0BAAY,CACX,eAAe,CAAE,CAAC,CAClB,gBAAgB,CAAE,IAAI,IAAI,cAAc,CAAC,CAAC,CAAC,CAAC,IAAI,sBAAsB,CAAC,qBAAqB,CAAC,CAC/F,CAEC,eAAC,MAAO,CACP,OAAO,CAAE,IACV,CAEA,wBAAU,CACT,MAAM,CAAE,OACT,CAEA,wBAAS,MAAO,CACf,eAAe,CAAE,CAAC,CAClB,gBAAgB,CAAE,IAAI,IAAI,cAAc,CAAC,CAAC,CAAC,CAAC,IAAI,sBAAsB,CAAC,qBAAqB,CAAC,CAC/F"}`},fe=U((n,e,t,h)=>{let r,A,{displayedData:l=void 0}=e,{rowShading:d=void 0}=e,{link:u=void 0}=e,{rowNumbers:m=void 0}=e,{rowLines:p=void 0}=e,{index:g=void 0}=e,{columnSummary:s=void 0}=e,{grouped:a=!1}=e,{groupType:w=void 0}=e,{groupColumn:b=void 0}=e,{rowSpan:S=void 0}=e,{groupNamePosition:y="middle"}=e,{orderedColumns:x=void 0}=e,{compact:I=void 0}=e;const{theme:st}=ae();return A=R(st,v=>r=v),e.displayedData===void 0&&t.displayedData&&l!==void 0&&t.displayedData(l),e.rowShading===void 0&&t.rowShading&&d!==void 0&&t.rowShading(d),e.link===void 0&&t.link&&u!==void 0&&t.link(u),e.rowNumbers===void 0&&t.rowNumbers&&m!==void 0&&t.rowNumbers(m),e.rowLines===void 0&&t.rowLines&&p!==void 0&&t.rowLines(p),e.index===void 0&&t.index&&g!==void 0&&t.index(g),e.columnSummary===void 0&&t.columnSummary&&s!==void 0&&t.columnSummary(s),e.grouped===void 0&&t.grouped&&a!==void 0&&t.grouped(a),e.groupType===void 0&&t.groupType&&w!==void 0&&t.groupType(w),e.groupColumn===void 0&&t.groupColumn&&b!==void 0&&t.groupColumn(b),e.rowSpan===void 0&&t.rowSpan&&S!==void 0&&t.rowSpan(S),e.groupNamePosition===void 0&&t.groupNamePosition&&y!==void 0&&t.groupNamePosition(y),e.orderedColumns===void 0&&t.orderedColumns&&x!==void 0&&t.orderedColumns(x),e.compact===void 0&&t.compact&&I!==void 0&&t.compact(I),n.css.add(Fn),A(),`${tt(l,(v,P)=>`<tr class="${["svelte-174z7k0",(d&&P%2===1?"shaded-row":"")+" "+(u&&v[u]?"row-link":"")+" "+(p?"row-lines":"")].join(" ").trim()}">${m&&w!=="section"?`${c(Bt,"TableCell").$$render(n,{class:"index w-[2%]",compact:I},{},{default:()=>`${C((g+P+1).toLocaleString())} `})}`:""} ${tt(x,(o,Vt)=>{let _=xt(o,s),It=o.scaleColumn?s.find(M=>M.id===o.scaleColumn):_,k=o.colorMin??It.columnUnitSummary?.min,T=o.colorMax??It.columnUnitSummary?.max,Rt=T-k!==0&&!isNaN(T)&&!isNaN(k),ct=o.fmt?at(o.fmt,_.format?.valueType):o.fmtColumn?at(v[o.fmtColumn],_.format?.valuetype):_.format,ht=o.colorBreakpoints??(o.colorMid?[k,o.colorMid,T]:[k,T]),dt=o.colorScale?ie.scale(o.colorScale).domain(ht).nodata(r.colors["base-100"]):"",L=o.contentType==="colorscale"&&Rt&&o.colorScale?o.scaleColumn?dt(v[o.scaleColumn]).hex():dt(v[o.id]).hex():"",et=o.redNegatives?v[o.id]<0?r.colors.negative:"":o.contentType==="colorscale"&&Rt&&o.colorScale?ie.contrast(L,r.colors["base-content"])<ie.contrast(L,r.colors["base-100"])+.5?r.colors["base-100"]:r.colors["base-content"]:"",Ut=P!==l.length-1&&p&&o.contentType==="colorscale"&&Rt&&o.colorScale?`1px solid ${ie(L).darken(.5)}`:"";return`           ${c(Bt,"TableCell").$$render(n,{class:_?.type,compact:I,verticalAlign:w==="section"?y:void 0,rowSpan:w==="section"&&b===_.id&&P===0?S:1,show:!(w==="section"&&b===_.id&&P!==0),align:o.align,paddingLeft:Vt===0&&a&&w==="accordion"&&!m?"28px":void 0,height:o.height,width:o.width,wrap:o.wrap,cellColor:L,fontColor:et,borderBottom:Ut},{},{default:()=>`${o.contentType==="image"&&v[o.id]!==void 0?`<img${O("src",v[o.id],0)}${O("alt",o.alt?v[o.alt]:v[o.id].replace(/^(.*[/])/g,"").replace(/[.][^.]+$/g,""),0)} class="mx-auto my-2 max-w-[unset] rounded-[unset] svelte-174z7k0"${At({height:o.height,width:o.width})}>`:`${o.contentType==="link"&&v[o.id]!==void 0?` ${o.linkLabel!=null&&v[o.linkLabel]==null&&o.linkLabel in v?"-":`<a${O("href",he(v[o.id]),0)}${O("target",o.openInNewTab?"_blank":"",0)} class="text-primary hover:brightness-110 transition-colors duration-200 svelte-174z7k0">${o.linkLabel!=null?` ${v[o.linkLabel]!=null?(()=>{let M=xt({id:o.linkLabel},s);return` ${C(Nt(v[o.linkLabel],o.fmt?at(o.fmt,M.format?.valueType):M.format,M.columnUnitSummary))} `})():`${C(o.linkLabel)}`}`:(()=>{let M=_;return`  ${C(Nt(v[o.id],o.fmt?at(o.fmt,M.format?.valueType):M.format,M.columnUnitSummary))}`})()} </a>`}`:`${o.contentType==="delta"&&v[o.id]!==void 0?`${c(se,"Delta").$$render(n,{value:v[o.id],downIsGood:o.downIsGood,format_object:ct,columnUnitSummary:_.columnUnitSummary,showValue:o.showValue,showSymbol:o.deltaSymbol,align:o.align,fontClass:"text-[9.25pt]",neutralMin:o.neutralMin,neutralMax:o.neutralMax,chip:o.chip},{},{})}`:`${o.contentType==="bar"&&v[o.id]!==void 0?(()=>{let M=k>=0?T:T<0?k:Math.abs(k)+T;return` <div style="${"width: 100%; background-color: "+C(o.backgroundColor,!0)+"; position: relative; height: 100%; display: flex; align-items: center; overflow: hidden;"}" class="svelte-174z7k0"> ${k<0?`   ${v[o.id]<0?`<div style="${"width: "+C(Math.min(Math.abs(v[o.id]/M*100),100),!0)+"%; background-color: "+C(o.negativeBarColor,!0)+"; height: 100%; position: absolute; right: "+C((1-Math.abs(k)/(Math.abs(k)+T))*100,!0)+"%;"}" class="svelte-174z7k0"></div>`:""}`:""}  ${v[o.id]>=0?`<div style="${"width: "+C(Math.min(v[o.id]/M*100,100),!0)+"%; background-color: "+C(o.barColor,!0)+"; height: 100%; position: absolute; left: "+C(k<0?Math.abs(k)/(Math.abs(k)+T)*100+"%":"0",!0)+";"}" class="svelte-174z7k0"></div>`:""}  <div style="${"position: relative; z-index: 2; padding-left: 4px; padding-right: 4px; text-align: "+C(o.align??"left",!0)+"; width: "+C(Math.abs(T)/((k<0?Math.abs(k):0)+Math.abs(T))*100,!0)+"%; left: "+C(k<0&&T>=0?Math.abs(k)/(Math.abs(k)+T)*100+"%":"0",!0)+";"}" class="${["svelte-174z7k0",o.hideLabels?"invisible":""].join(" ").trim()}">${C(Nt(v[o.id],ct,_.columnUnitSummary))} </div></div> `})():`${o.contentType==="sparkline"&&v[o.id]!==void 0?(()=>{let M=o.align??"center";return` <div class="${"items-"+C(M,!0)+" justify-"+C(M,!0)+" flex svelte-174z7k0"}">${c(ve,"Sparkline").$$render(n,{type:"line",data:[...v[o.id]],dateCol:o.sparkX,valueCol:o.sparkY,interactive:"false",color:o.sparkColor,yScale:o.sparkYScale,height:o.sparkHeight??19,width:o.sparkWidth??90},{},{})} </div>`})():`${o.contentType==="sparkbar"&&v[o.id]!==void 0?`<div class="items-center justify-center flex svelte-174z7k0">${c(ve,"Sparkline").$$render(n,{type:"bar",data:[...v[o.id]],dateCol:o.sparkX,valueCol:o.sparkY,interactive:"false",color:o.sparkColor,yScale:o.sparkYScale,height:o.sparkHeight??19,width:o.sparkWidth??90},{},{})} </div>`:`${o.contentType==="sparkarea"&&v[o.id]!==void 0?(()=>{let M=o.align==="right"?"end":o.align==="left"?"start":"center";return` <div class="${"items-center justify-"+C(M,!0)+" flex svelte-174z7k0"}">${c(ve,"Sparkline").$$render(n,{type:"area",data:[...v[o.id]],dateCol:o.sparkX,valueCol:o.sparkY,interactive:"false",color:o.sparkColor,yScale:o.sparkYScale,height:o.sparkHeight??20,width:o.sparkWidth??80},{},{})} </div>`})():`${o.contentType==="html"&&v[o.id]!==void 0?`<!-- HTML_TAG_START -->${v[o.id]}<!-- HTML_TAG_END -->`:`${C(Nt(v[o.id],ct,_.columnUnitSummary))}`}`}`}`}`}`}`}`} `})}`})} ${u&&v[u]?`${c(Bt,"TableCell").$$render(n,{compact:I,width:"16px"},{},{default:()=>`${c(ot,"Icon").$$render(n,{src:We,class:"w-4 h-4"},{},{})} <a${O("href",he(v[u]),0)} class="sr-only svelte-174z7k0">See more</a> `})}`:""} </tr>`)}`}),Nn=U((n,e,t,h)=>{let{data:r=void 0}=e,{rowNumbers:A=void 0}=e,{columnSummary:l=void 0}=e,{rowColor:d=void 0}=e,{fontColor:u=void 0}=e,{groupType:m=void 0}=e,{orderedColumns:p=void 0}=e,{compact:g=void 0}=e;return e.data===void 0&&t.data&&r!==void 0&&t.data(r),e.rowNumbers===void 0&&t.rowNumbers&&A!==void 0&&t.rowNumbers(A),e.columnSummary===void 0&&t.columnSummary&&l!==void 0&&t.columnSummary(l),e.rowColor===void 0&&t.rowColor&&d!==void 0&&t.rowColor(d),e.fontColor===void 0&&t.fontColor&&u!==void 0&&t.fontColor(u),e.groupType===void 0&&t.groupType&&m!==void 0&&t.groupType(m),e.orderedColumns===void 0&&t.orderedColumns&&p!==void 0&&t.orderedColumns(p),e.compact===void 0&&t.compact&&g!==void 0&&t.compact(g),`<tr class="font-semibold"${At({"background-color":d,color:u})}>${A&&m!=="section"?`${c(Bt,"TableCell").$$render(n,{class:"index w-[2%]",compact:g,topBorder:"border-t border-base-300"},{},{})}`:""} ${tt(p,s=>{let a=xt(s,l),w=s.totalFmt?at(s.totalFmt):s.fmt?at(s.fmt):a.format,b=s.totalAgg??"sum";return`   ${c(Bt,"TableCell").$$render(n,{compact:g,dataType:a.type,align:s.align,height:s.height,width:s.width,wrap:s.wrap,topBorder:"border-t border-base-content-muted"},{},{default:()=>`${["sum","mean","weightedMean","median","min","max","count","countDistinct"].includes(b)?`${s.contentType==="delta"?`${c(se,"Delta").$$render(n,{value:b==="weightedMean"?Oe(r,s.id,s.weightCol):a.columnUnitSummary[b],downIsGood:s.downIsGood,format_object:w,columnUnitSummary:a.columnUnitSummary,showValue:s.showValue,showSymbol:s.deltaSymbol,align:s.align,fontClass:"font-semibold text-[9.25pt]",neutralMin:s.neutralMin,neutralMax:s.neutralMax,chip:s.chip},{},{})}`:`${C(Nt(b==="weightedMean"?Oe(r,s.id,s.weightCol):a.columnUnitSummary[b],w,a.columnUnitSummary))}`}`:` ${C(s.totalFmt?Nt(b,w,a.columnUnitSummary):b)}`} `})}`})}</tr>`}),Rn=U((n,e,t,h)=>{let{groupName:r=void 0}=e,{currentGroupData:A=void 0}=e,{columnSummary:l=void 0}=e,{rowColor:d=void 0}=e,{groupBy:u=void 0}=e,{groupType:m=void 0}=e,{fontColor:p=void 0}=e,{orderedColumns:g=void 0}=e,{compact:s=void 0}=e;return e.groupName===void 0&&t.groupName&&r!==void 0&&t.groupName(r),e.currentGroupData===void 0&&t.currentGroupData&&A!==void 0&&t.currentGroupData(A),e.columnSummary===void 0&&t.columnSummary&&l!==void 0&&t.columnSummary(l),e.rowColor===void 0&&t.rowColor&&d!==void 0&&t.rowColor(d),e.groupBy===void 0&&t.groupBy&&u!==void 0&&t.groupBy(u),e.groupType===void 0&&t.groupType&&m!==void 0&&t.groupType(m),e.fontColor===void 0&&t.fontColor&&p!==void 0&&t.fontColor(p),e.orderedColumns===void 0&&t.orderedColumns&&g!==void 0&&t.orderedColumns(g),e.compact===void 0&&t.compact&&s!==void 0&&t.compact(s),`<tr class="w-full border-b border-base-content-muted bg-base-200"${At({"background-color":d,color:p})}>${tt(g,a=>{let w=xt(a,l),b=a.fmt?at(a.fmt,w.format?.valueType):w.format,S=a.subtotalFmt?at(a.subtotalFmt):a.totalFmt?at(a.totalFmt):b,y=S?.valueType==="date"?"":S;return`    ${c(Bt,"TableCell").$$render(n,{class:w.type+" font-medium",compact:s,align:a.align},{},{default:()=>`${a.id!==u?`${a.contentType==="delta"?`${c(se,"Delta").$$render(n,{value:oe(A,a.id,a.totalAgg,w.type,a.weightCol),downIsGood:a.downIsGood,format_object:b,columnUnitSummary:w.columnUnitSummary,showValue:a.showValue,showSymbol:a.deltaSymbol,align:a.align,fontClass:"font-medium text-[9.25pt]",neutralMin:a.neutralMin,neutralMax:a.neutralMax,chip:a.chip},{},{})}`:`${C(Nt(oe(A,a.id,a.totalAgg,w.type,a.weightCol),y,w.columnUnitSummary))}`}`:`${m==="section"?`${C(r)}`:""}`} `})}`})}</tr>`}),Ge=U((n,e,t,h)=>{let{ascending:r}=e;return e.ascending===void 0&&t.ascending&&r!==void 0&&t.ascending(r),`${r?`${c(ot,"Icon").$$render(n,{src:vn,class:"w-[10px] h-[10px] mb-0.5 inline"},{},{})}`:`${c(ot,"Icon").$$render(n,{src:fn,class:"w-[10px] h-[10px] mb-0.5 inline"},{},{})}`}`}),Un={code:"th.svelte-1q0vbz4{white-space:nowrap;overflow:hidden}th.svelte-1q0vbz4:first-child{padding-left:3px}.index.svelte-1q0vbz4{--tw-text-opacity:1;color:hsl(var(--twc-base-content-muted) / var(--twc-base-content-muted-opacity, var(--tw-text-opacity)));text-align:left;max-width:-moz-min-content;max-width:min-content}.string.svelte-1q0vbz4{text-align:left}.date.svelte-1q0vbz4{text-align:left}.number.svelte-1q0vbz4{text-align:right}.boolean.svelte-1q0vbz4{text-align:left}",map:`{"version":3,"file":"TableHeader.svelte","sources":["TableHeader.svelte"],"sourcesContent":["<script>\\n\\timport SortIcon from '../../ui/SortIcon.svelte';\\n\\timport { safeExtractColumn } from './datatable.js';\\n\\n\\texport let rowNumbers = undefined;\\n\\texport let headerColor = undefined;\\n\\texport let headerFontColor = undefined;\\n\\texport let orderedColumns = undefined;\\n\\texport let columnSummary = undefined;\\n\\texport let sortable = undefined;\\n\\texport let sortClick = undefined;\\n\\texport let formatColumnTitles = undefined;\\n\\texport let sortObj = undefined;\\n\\texport let wrapTitles = undefined;\\n\\texport let compact = undefined;\\n\\n\\t/** @type {string | undefined} */\\n\\texport let link = undefined;\\n\\n\\tfunction getWrapTitleAlignment(column, columnSummary) {\\n\\t\\tif (column.align) {\\n\\t\\t\\tif (column.align === 'right') {\\n\\t\\t\\t\\treturn 'justify-end';\\n\\t\\t\\t} else if (column.align === 'center') {\\n\\t\\t\\t\\treturn 'justify-center';\\n\\t\\t\\t} else {\\n\\t\\t\\t\\treturn 'justify-start';\\n\\t\\t\\t}\\n\\t\\t} else if (safeExtractColumn(column, columnSummary).type === 'number') {\\n\\t\\t\\treturn 'justify-end';\\n\\t\\t}\\n\\t}\\n<\/script>\\n\\n<thead>\\n\\t{#if orderedColumns.length > 0}\\n\\t\\t{@const columnsWithGroupSpan = orderedColumns.map((column, index, array) => {\\n\\t\\t\\t// Determine if this column starts a new group or continues an existing one\\n\\t\\t\\tlet isNewGroup = index === 0 || column.colGroup !== array[index - 1].colGroup;\\n\\t\\t\\tlet span = 1;\\n\\t\\t\\tif (column.colGroup) {\\n\\t\\t\\t\\t// Count how many contiguous columns have the same group\\n\\t\\t\\t\\tfor (let i = index + 1; i < array.length && array[i].colGroup === column.colGroup; i++) {\\n\\t\\t\\t\\t\\tspan++;\\n\\t\\t\\t\\t}\\n\\t\\t\\t}\\n\\t\\t\\treturn { ...column, isNewGroup, span: isNewGroup ? span : 0 }; // Only assign span to the first column in a group\\n\\t\\t})}\\n\\t\\t{#if columnsWithGroupSpan.length > 0}\\n\\t\\t\\t<tr class=\\"border-0\\" style:background-color={headerColor}>\\n\\t\\t\\t\\t{#if rowNumbers}\\n\\t\\t\\t\\t\\t<th\\n\\t\\t\\t\\t\\t\\tclass=\\"index w-[2%] {compact ? 'text-xs py-[1px] px-[4px]' : 'py-[2px]'}\\"\\n\\t\\t\\t\\t\\t\\tstyle:background-color={headerColor}\\n\\t\\t\\t\\t\\t/>\\n\\t\\t\\t\\t{/if}\\n\\t\\t\\t\\t{#each columnsWithGroupSpan as column}\\n\\t\\t\\t\\t\\t{#if column.colGroup && column.isNewGroup}\\n\\t\\t\\t\\t\\t\\t<th\\n\\t\\t\\t\\t\\t\\t\\trole=\\"columnheader\\"\\n\\t\\t\\t\\t\\t\\t\\tcolspan={column.span}\\n\\t\\t\\t\\t\\t\\t\\tclass=\\"pt-1 align-bottom {compact ? 'px-[1px]' : 'px-[2px]'}\\"\\n\\t\\t\\t\\t\\t\\t>\\n\\t\\t\\t\\t\\t\\t\\t<!-- Group header with dynamic colspan -->\\n\\t\\t\\t\\t\\t\\t\\t<div class=\\" border-b-[1px] border-base-content-muted whitespace-normal pb-[2px]\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t{column.colGroup}\\n\\t\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t\\t</th>\\n\\t\\t\\t\\t\\t{:else if column.colGroup}\\n\\t\\t\\t\\t\\t\\t<!-- Not new group, th covered by previous column span-->\\n\\t\\t\\t\\t\\t{:else}\\n\\t\\t\\t\\t\\t\\t<!-- Not part of a group - empty header cell -->\\n\\t\\t\\t\\t\\t\\t<th></th>\\n\\t\\t\\t\\t\\t{/if}\\n\\t\\t\\t\\t{/each}\\n\\t\\t\\t</tr>\\n\\t\\t{/if}\\n\\t{/if}\\n\\n\\t<tr class=\\"border-b border-base-content-muted\\">\\n\\t\\t{#if rowNumbers}\\n\\t\\t\\t<th\\n\\t\\t\\t\\trole=\\"columnheader\\"\\n\\t\\t\\t\\tclass=\\"index w-[2%] {compact ? 'text-xs py-[1px] px-[4px]' : 'py-[2px] px-[8px]'}\\"\\n\\t\\t\\t\\tstyle:background-color={headerColor}\\n\\t\\t\\t/>\\n\\t\\t{/if}\\n\\t\\t{#each orderedColumns as column}\\n\\t\\t\\t<th\\n\\t\\t\\t\\trole=\\"columnheader\\"\\n\\t\\t\\t\\tclass=\\"{safeExtractColumn(column, columnSummary).type} {compact\\n\\t\\t\\t\\t\\t? 'text-xs py-[1px] pl-[1px]'\\n\\t\\t\\t\\t\\t: 'py-[2px] pl-[6px]'}\\"\\n\\t\\t\\t\\tstyle:text-align={column.align ??\\n\\t\\t\\t\\t\\t(['sparkline', 'sparkbar', 'sparkarea', 'bar'].includes(column.contentType)\\n\\t\\t\\t\\t\\t\\t? 'center'\\n\\t\\t\\t\\t\\t\\t: undefined)}\\n\\t\\t\\t\\tstyle:color={headerFontColor}\\n\\t\\t\\t\\tstyle:background={headerColor}\\n\\t\\t\\t\\tstyle:cursor={sortable ? 'pointer' : 'auto'}\\n\\t\\t\\t\\ton:click={sortable ? sortClick(column.id) : ''}\\n\\t\\t\\t\\tstyle:vertical-align=\\"bottom\\"\\n\\t\\t\\t\\tstyle:border-radius={sortObj.col === column.id ? '2px' : ''}\\n\\t\\t\\t>\\n\\t\\t\\t\\t<div\\n\\t\\t\\t\\t\\tclass=\\"{wrapTitles || column.wrapTitle\\n\\t\\t\\t\\t\\t\\t? \`flex items-end \${getWrapTitleAlignment(column, columnSummary)}\`\\n\\t\\t\\t\\t\\t\\t: ''} tracking-[-1.5px]\\"\\n\\t\\t\\t\\t>\\n\\t\\t\\t\\t\\t<span class=\\"tracking-normal {wrapTitles || column.wrapTitle ? 'whitespace-normal' : ''}\\">\\n\\t\\t\\t\\t\\t\\t{column.title\\n\\t\\t\\t\\t\\t\\t\\t? column.title\\n\\t\\t\\t\\t\\t\\t\\t: formatColumnTitles\\n\\t\\t\\t\\t\\t\\t\\t\\t? safeExtractColumn(column, columnSummary).title\\n\\t\\t\\t\\t\\t\\t\\t\\t: safeExtractColumn(column, columnSummary).id}\\n\\t\\t\\t\\t\\t</span>\\n\\t\\t\\t\\t\\t<span\\n\\t\\t\\t\\t\\t\\tclass=\\"tracking-normal {wrapTitles || column.wrapTitle ? 'ml-0.5' : ''} {compact\\n\\t\\t\\t\\t\\t\\t\\t? 'mr-1'\\n\\t\\t\\t\\t\\t\\t\\t: ''}\\"\\n\\t\\t\\t\\t\\t>\\n\\t\\t\\t\\t\\t\\t{#if sortObj.col === column.id}\\n\\t\\t\\t\\t\\t\\t\\t<SortIcon ascending={sortObj.ascending} />\\n\\t\\t\\t\\t\\t\\t{:else}\\n\\t\\t\\t\\t\\t\\t\\t<span class=\\"invisible\\"><SortIcon /></span>\\n\\t\\t\\t\\t\\t\\t{/if}\\n\\t\\t\\t\\t\\t</span>\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t</th>\\n\\t\\t{/each}\\n\\n\\t\\t<!-- Extra column for Chevron icons -->\\n\\t\\t{#if link}\\n\\t\\t\\t<th role=\\"columnheader\\">\\n\\t\\t\\t\\t<span class=\\"sr-only\\">Links</span>\\n\\t\\t\\t</th>\\n\\t\\t{/if}\\n\\t</tr>\\n</thead>\\n\\n<style>\\n\\tth {\\n\\t\\twhite-space: nowrap;\\n\\t\\toverflow: hidden;\\n\\t}\\n\\n\\tth:first-child {\\n\\t\\tpadding-left: 3px;\\n\\t}\\n\\n\\t.index {\\n\\t\\t--tw-text-opacity: 1;\\n\\t\\tcolor: hsl(var(--twc-base-content-muted) / var(--twc-base-content-muted-opacity, var(--tw-text-opacity)));\\n\\t\\ttext-align: left;\\n\\t\\tmax-width: -moz-min-content;\\n\\t\\tmax-width: min-content;\\n}\\n\\n\\t.string {\\n\\t\\ttext-align: left;\\n\\t}\\n\\n\\t.date {\\n\\t\\ttext-align: left;\\n\\t}\\n\\n\\t.number {\\n\\t\\ttext-align: right;\\n\\t}\\n\\n\\t.boolean {\\n\\t\\ttext-align: left;\\n\\t}</style>\\n"],"names":[],"mappings":"AA6IC,iBAAG,CACF,WAAW,CAAE,MAAM,CACnB,QAAQ,CAAE,MACX,CAEA,iBAAE,YAAa,CACd,YAAY,CAAE,GACf,CAEA,qBAAO,CACN,iBAAiB,CAAE,CAAC,CACpB,KAAK,CAAE,IAAI,IAAI,wBAAwB,CAAC,CAAC,CAAC,CAAC,IAAI,gCAAgC,CAAC,uBAAuB,CAAC,CAAC,CACzG,UAAU,CAAE,IAAI,CAChB,SAAS,CAAE,gBAAgB,CAC3B,SAAS,CAAE,WACb,CAEC,sBAAQ,CACP,UAAU,CAAE,IACb,CAEA,oBAAM,CACL,UAAU,CAAE,IACb,CAEA,sBAAQ,CACP,UAAU,CAAE,KACb,CAEA,uBAAS,CACR,UAAU,CAAE,IACb"}`},Kn=U((n,e,t,h)=>{let{rowNumbers:r=void 0}=e,{headerColor:A=void 0}=e,{headerFontColor:l=void 0}=e,{orderedColumns:d=void 0}=e,{columnSummary:u=void 0}=e,{sortable:m=void 0}=e,{sortClick:p=void 0}=e,{formatColumnTitles:g=void 0}=e,{sortObj:s=void 0}=e,{wrapTitles:a=void 0}=e,{compact:w=void 0}=e,{link:b=void 0}=e;function S(y,x){if(y.align)return y.align==="right"?"justify-end":y.align==="center"?"justify-center":"justify-start";if(xt(y,x).type==="number")return"justify-end"}return e.rowNumbers===void 0&&t.rowNumbers&&r!==void 0&&t.rowNumbers(r),e.headerColor===void 0&&t.headerColor&&A!==void 0&&t.headerColor(A),e.headerFontColor===void 0&&t.headerFontColor&&l!==void 0&&t.headerFontColor(l),e.orderedColumns===void 0&&t.orderedColumns&&d!==void 0&&t.orderedColumns(d),e.columnSummary===void 0&&t.columnSummary&&u!==void 0&&t.columnSummary(u),e.sortable===void 0&&t.sortable&&m!==void 0&&t.sortable(m),e.sortClick===void 0&&t.sortClick&&p!==void 0&&t.sortClick(p),e.formatColumnTitles===void 0&&t.formatColumnTitles&&g!==void 0&&t.formatColumnTitles(g),e.sortObj===void 0&&t.sortObj&&s!==void 0&&t.sortObj(s),e.wrapTitles===void 0&&t.wrapTitles&&a!==void 0&&t.wrapTitles(a),e.compact===void 0&&t.compact&&w!==void 0&&t.compact(w),e.link===void 0&&t.link&&b!==void 0&&t.link(b),n.css.add(Un),`<thead>${d.length>0?(()=>{let y=d.map((x,I,st)=>{let v=I===0||x.colGroup!==st[I-1].colGroup,P=1;if(x.colGroup)for(let o=I+1;o<st.length&&st[o].colGroup===x.colGroup;o++)P++;return{...x,isNewGroup:v,span:v?P:0}});return` ${y.length>0?`<tr class="border-0"${At({"background-color":A})}>${r?`<th class="${"index w-[2%] "+C(w?"text-xs py-[1px] px-[4px]":"py-[2px]",!0)+" svelte-1q0vbz4"}"${At({"background-color":A})}></th>`:""} ${tt(y,x=>`${x.colGroup&&x.isNewGroup?`<th role="columnheader"${O("colspan",x.span,0)} class="${"pt-1 align-bottom "+C(w?"px-[1px]":"px-[2px]",!0)+" svelte-1q0vbz4"}"> <div class="border-b-[1px] border-base-content-muted whitespace-normal pb-[2px]">${C(x.colGroup)}</div> </th>`:`${x.colGroup?"":' <th class="svelte-1q0vbz4"></th>'}`}`)}</tr>`:""}`})():""} <tr class="border-b border-base-content-muted">${r?`<th role="columnheader" class="${"index w-[2%] "+C(w?"text-xs py-[1px] px-[4px]":"py-[2px] px-[8px]",!0)+" svelte-1q0vbz4"}"${At({"background-color":A})}></th>`:""} ${tt(d,y=>`<th role="columnheader" class="${C(xt(y,u).type,!0)+" "+C(w?"text-xs py-[1px] pl-[1px]":"py-[2px] pl-[6px]",!0)+" svelte-1q0vbz4"}"${At({"text-align":y.align??(["sparkline","sparkbar","sparkarea","bar"].includes(y.contentType)?"center":void 0),color:l,background:A,cursor:m?"pointer":"auto","vertical-align":"bottom","border-radius":s.col===y.id?"2px":""})}><div class="${C(a||y.wrapTitle?`flex items-end ${S(y,u)}`:"",!0)+" tracking-[-1.5px] svelte-1q0vbz4"}"><span class="${"tracking-normal "+C(a||y.wrapTitle?"whitespace-normal":"",!0)}">${C(y.title?y.title:g?xt(y,u).title:xt(y,u).id)}</span> <span class="${"tracking-normal "+C(a||y.wrapTitle?"ml-0.5":"",!0)+" "+C(w?"mr-1":"",!0)}">${s.col===y.id?`${c(Ge,"SortIcon").$$render(n,{ascending:s.ascending},{},{})}`:`<span class="invisible">${c(Ge,"SortIcon").$$render(n,{},{},{})}</span>`} </span></div> </th>`)}  ${b?'<th role="columnheader" class="svelte-1q0vbz4" data-svelte-h="svelte-17az424"><span class="sr-only">Links</span></th>':""}</tr> </thead>`}),Pn={code:"svg.svelte-c6mrxw.svelte-c6mrxw{display:inline-block;vertical-align:middle;transition:transform 0.15s ease-in}span.svelte-c6mrxw.svelte-c6mrxw{margin:auto 0 auto 0}[aria-expanded='true'].svelte-c6mrxw svg.svelte-c6mrxw{transform:rotate(0.25turn)}",map:`{"version":3,"file":"TableGroupIcon.svelte","sources":["TableGroupIcon.svelte"],"sourcesContent":["<script>\\n\\timport { getThemeStores } from '../../../themes/themes.js';\\n\\n\\texport let toggled = false;\\n\\texport let color = undefined;\\n\\texport let size = 10;\\n\\n\\tconst { theme } = getThemeStores();\\n<\/script>\\n\\n<span aria-expanded={toggled} class=\\"inline-flex\\">\\n\\t<svg viewBox=\\"0 0 16 16\\" width={size} height={size}\\n\\t\\t><path\\n\\t\\t\\tfill={color ?? $theme.colors['base-content']}\\n\\t\\t\\tfill-rule=\\"evenodd\\"\\n\\t\\t\\td=\\"M6.22 3.22a.75.75 0 011.06 0l4.25 4.25a.75.75 0 010 1.06l-4.25 4.25a.75.75 0 01-1.06-1.06L9.94 8 6.22 4.28a.75.75 0 010-1.06z\\"\\n\\t\\t/></svg\\n\\t>\\n</span>\\n\\n<style>\\n\\tsvg {\\n\\t\\tdisplay: inline-block;\\n\\t\\tvertical-align: middle;\\n\\t\\ttransition: transform 0.15s ease-in;\\n\\t}\\n\\n\\tspan {\\n\\t\\tmargin: auto 0 auto 0;\\n\\t}\\n\\n\\t[aria-expanded='true'] svg {\\n\\t\\ttransform: rotate(0.25turn);\\n\\t}</style>\\n"],"names":[],"mappings":"AAqBC,+BAAI,CACH,OAAO,CAAE,YAAY,CACrB,cAAc,CAAE,MAAM,CACtB,UAAU,CAAE,SAAS,CAAC,KAAK,CAAC,OAC7B,CAEA,gCAAK,CACJ,MAAM,CAAE,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,CACrB,CAEA,CAAC,aAAa,CAAC,MAAM,eAAC,CAAC,iBAAI,CAC1B,SAAS,CAAE,OAAO,QAAQ,CAC3B"}`},jn=U((n,e,t,h)=>{let r,A,{toggled:l=!1}=e,{color:d=void 0}=e,{size:u=10}=e;const{theme:m}=ae();return A=R(m,p=>r=p),e.toggled===void 0&&t.toggled&&l!==void 0&&t.toggled(l),e.color===void 0&&t.color&&d!==void 0&&t.color(d),e.size===void 0&&t.size&&u!==void 0&&t.size(u),n.css.add(Pn),A(),`<span${O("aria-expanded",l,0)} class="inline-flex svelte-c6mrxw"><svg viewBox="0 0 16 16"${O("width",u,0)}${O("height",u,0)} class="svelte-c6mrxw"><path${O("fill",d??r.colors["base-content"],0)} fill-rule="evenodd" d="M6.22 3.22a.75.75 0 011.06 0l4.25 4.25a.75.75 0 010 1.06l-4.25 4.25a.75.75 0 01-1.06-1.06L9.94 8 6.22 4.28a.75.75 0 010-1.06z"></path></svg> </span>`}),Ln={code:"@media print{.chevron.svelte-bqpzbr{display:none}}",map:`{"version":3,"file":"GroupRow.svelte","sources":["GroupRow.svelte"],"sourcesContent":["<script>\\n\\timport { createEventDispatcher } from 'svelte';\\n\\timport TableGroupIcon from './TableGroupIcon.svelte';\\n\\timport Delta from '../core/Delta.svelte';\\n\\timport { safeExtractColumn, aggregateColumn } from './datatable.js';\\n\\timport {\\n\\t\\tformatValue,\\n\\t\\tgetFormatObjectFromString\\n\\t} from '@evidence-dev/component-utilities/formatting';\\n\\timport TableCell from './TableCell.svelte';\\n\\n\\texport let groupName;\\n\\texport let currentGroupData;\\n\\texport let toggled;\\n\\texport let columnSummary;\\n\\texport let rowNumbers;\\n\\texport let rowColor = undefined;\\n\\texport let subtotals = true;\\n\\texport let orderedColumns = undefined;\\n\\texport let compact = undefined;\\n\\n\\tconst dispatch = createEventDispatcher();\\n\\n\\tfunction toggleGroup() {\\n\\t\\tdispatch('toggle', { groupName });\\n\\t}\\n<\/script>\\n\\n<tr\\n\\ton:click={toggleGroup}\\n\\tclass=\\"cursor-pointer hover:bg-base-200 w-full border-t-[1px] border-base-200\\"\\n\\trole=\\"button\\"\\n\\ttabindex=\\"0\\"\\n\\ton:keypress={(e) => e.key === 'Enter' && toggleGroup()}\\n\\tstyle:background-color={rowColor}\\n>\\n\\t{#each orderedColumns as column, j}\\n\\t\\t{@const useCol = safeExtractColumn(column, columnSummary)}\\n\\t\\t{@const column_format = column.fmt\\n\\t\\t\\t? getFormatObjectFromString(column.fmt, useCol.format?.valueType)\\n\\t\\t\\t: useCol.format}\\n\\t\\t{@const format = column.subtotalFmt\\n\\t\\t\\t? getFormatObjectFromString(column.subtotalFmt)\\n\\t\\t\\t: column.totalFmt\\n\\t\\t\\t\\t? getFormatObjectFromString(column.totalFmt)\\n\\t\\t\\t\\t: column_format}\\n\\t\\t{@const useFormat = format?.valueType === 'date' ? '' : format}\\n\\t\\t{#if j === 0}\\n\\t\\t\\t<TableCell\\n\\t\\t\\t\\tclass=\\"font-medium py-[3px]\\"\\n\\t\\t\\t\\t{compact}\\n\\t\\t\\t\\tcolSpan={rowNumbers ? 2 : 1}\\n\\t\\t\\t\\tpaddingLeft=\\"1px\\"\\n\\t\\t\\t>\\n\\t\\t\\t\\t<div class=\\"items-center gap-2 align-top\\">\\n\\t\\t\\t\\t\\t<span class=\\"inline-flex print-hidden chevron\\"><TableGroupIcon {toggled} /></span>\\n\\t\\t\\t\\t\\t{groupName}\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t</TableCell>\\n\\t\\t{:else if subtotals}\\n\\t\\t\\t<TableCell class=\\"{useCol.type} font-medium\\" {compact} align={column.align}>\\n\\t\\t\\t\\t{#if [undefined, 'sum', 'mean', 'median', 'min', 'max', 'weightedMean', 'count', 'countDistinct'].includes(column.totalAgg) || column.subtotalFmt}\\n\\t\\t\\t\\t\\t{#if column.contentType === 'delta'}\\n\\t\\t\\t\\t\\t\\t<Delta\\n\\t\\t\\t\\t\\t\\t\\tvalue={aggregateColumn(\\n\\t\\t\\t\\t\\t\\t\\t\\tcurrentGroupData,\\n\\t\\t\\t\\t\\t\\t\\t\\tcolumn.id,\\n\\t\\t\\t\\t\\t\\t\\t\\tcolumn.totalAgg,\\n\\t\\t\\t\\t\\t\\t\\t\\tuseCol.type,\\n\\t\\t\\t\\t\\t\\t\\t\\tcolumn.weightCol\\n\\t\\t\\t\\t\\t\\t\\t)}\\n\\t\\t\\t\\t\\t\\t\\tdownIsGood={column.downIsGood}\\n\\t\\t\\t\\t\\t\\t\\tformat_object={useFormat}\\n\\t\\t\\t\\t\\t\\t\\tcolumnUnitSummary={useCol.columnUnitSummary}\\n\\t\\t\\t\\t\\t\\t\\tshowValue={column.showValue}\\n\\t\\t\\t\\t\\t\\t\\tshowSymbol={column.deltaSymbol}\\n\\t\\t\\t\\t\\t\\t\\talign={column.align}\\n\\t\\t\\t\\t\\t\\t\\tfontClass=\\"font-medium text-[9.25pt]\\"\\n\\t\\t\\t\\t\\t\\t\\tneutralMin={column.neutralMin}\\n\\t\\t\\t\\t\\t\\t\\tneutralMax={column.neutralMax}\\n\\t\\t\\t\\t\\t\\t\\tchip={column.chip}\\n\\t\\t\\t\\t\\t\\t/>\\n\\t\\t\\t\\t\\t{:else}\\n\\t\\t\\t\\t\\t\\t{formatValue(\\n\\t\\t\\t\\t\\t\\t\\taggregateColumn(\\n\\t\\t\\t\\t\\t\\t\\t\\tcurrentGroupData,\\n\\t\\t\\t\\t\\t\\t\\t\\tcolumn.id,\\n\\t\\t\\t\\t\\t\\t\\t\\tcolumn.totalAgg,\\n\\t\\t\\t\\t\\t\\t\\t\\tuseCol.type,\\n\\t\\t\\t\\t\\t\\t\\t\\tcolumn.weightCol\\n\\t\\t\\t\\t\\t\\t\\t),\\n\\t\\t\\t\\t\\t\\t\\tuseFormat,\\n\\t\\t\\t\\t\\t\\t\\tuseCol.columnUnitSummary\\n\\t\\t\\t\\t\\t\\t)}\\n\\t\\t\\t\\t\\t{/if}\\n\\t\\t\\t\\t{:else}\\n\\t\\t\\t\\t\\t{column.totalAgg}\\n\\t\\t\\t\\t{/if}\\n\\t\\t\\t</TableCell>\\n\\t\\t{:else}\\n\\t\\t\\t<TableCell />\\n\\t\\t{/if}\\n\\t{/each}\\n</tr>\\n\\n<style>\\n\\t@media print {\\n\\t\\t.chevron {\\n\\t\\t\\tdisplay: none;\\n\\t\\t}\\n\\t}</style>\\n"],"names":[],"mappings":"AA0GC,OAAO,KAAM,CACZ,sBAAS,CACR,OAAO,CAAE,IACV,CACD"}`},Wn=U((n,e,t,h)=>{let{groupName:r}=e,{currentGroupData:A}=e,{toggled:l}=e,{columnSummary:d}=e,{rowNumbers:u}=e,{rowColor:m=void 0}=e,{subtotals:p=!0}=e,{orderedColumns:g=void 0}=e,{compact:s=void 0}=e;return Ze(),e.groupName===void 0&&t.groupName&&r!==void 0&&t.groupName(r),e.currentGroupData===void 0&&t.currentGroupData&&A!==void 0&&t.currentGroupData(A),e.toggled===void 0&&t.toggled&&l!==void 0&&t.toggled(l),e.columnSummary===void 0&&t.columnSummary&&d!==void 0&&t.columnSummary(d),e.rowNumbers===void 0&&t.rowNumbers&&u!==void 0&&t.rowNumbers(u),e.rowColor===void 0&&t.rowColor&&m!==void 0&&t.rowColor(m),e.subtotals===void 0&&t.subtotals&&p!==void 0&&t.subtotals(p),e.orderedColumns===void 0&&t.orderedColumns&&g!==void 0&&t.orderedColumns(g),e.compact===void 0&&t.compact&&s!==void 0&&t.compact(s),n.css.add(Ln),`<tr class="cursor-pointer hover:bg-base-200 w-full border-t-[1px] border-base-200" role="button" tabindex="0"${At({"background-color":m})}>${tt(g,(a,w)=>{let b=xt(a,d),S=a.fmt?at(a.fmt,b.format?.valueType):b.format,y=a.subtotalFmt?at(a.subtotalFmt):a.totalFmt?at(a.totalFmt):S,x=y?.valueType==="date"?"":y;return`    ${w===0?`${c(Bt,"TableCell").$$render(n,{class:"font-medium py-[3px]",compact:s,colSpan:u?2:1,paddingLeft:"1px"},{},{default:()=>`<div class="items-center gap-2 align-top"><span class="inline-flex print-hidden chevron svelte-bqpzbr">${c(jn,"TableGroupIcon").$$render(n,{toggled:l},{},{})}</span> ${C(r)}</div> `})}`:`${p?`${c(Bt,"TableCell").$$render(n,{class:b.type+" font-medium",compact:s,align:a.align},{},{default:()=>`${[void 0,"sum","mean","median","min","max","weightedMean","count","countDistinct"].includes(a.totalAgg)||a.subtotalFmt?`${a.contentType==="delta"?`${c(se,"Delta").$$render(n,{value:oe(A,a.id,a.totalAgg,b.type,a.weightCol),downIsGood:a.downIsGood,format_object:x,columnUnitSummary:b.columnUnitSummary,showValue:a.showValue,showSymbol:a.deltaSymbol,align:a.align,fontClass:"font-medium text-[9.25pt]",neutralMin:a.neutralMin,neutralMax:a.neutralMax,chip:a.chip},{},{})}`:`${C(Nt(oe(A,a.id,a.totalAgg,b.type,a.weightCol),x,b.columnUnitSummary))}`}`:`${C(a.totalAgg)}`} `})}`:`${c(Bt,"TableCell").$$render(n,{},{},{})}`}`}`})} </tr>`}),Qn={code:"button.svelte-1grvppi svg{stroke:var(--base-content);margin-top:auto;margin-bottom:auto;transition:stroke 200ms}button.svelte-1grvppi{display:flex;cursor:pointer;font-family:var(--ui-font-family);font-size:1em;color:var(--base-content);opacity:0.5;justify-items:flex-end;align-items:baseline;background-color:transparent;border:none;padding:0;margin:0 5px;gap:3px;transition:all 200ms;-moz-user-select:none;-webkit-user-select:none;-o-user-select:none;user-select:none}button.svelte-1grvppi:hover{opacity:1;color:var(--primary);transition:all 200ms}button.svelte-1grvppi:hover svg{stroke:var(--primary);transition:all 200ms}@media(max-width: 600px){button.svelte-1grvppi{display:none}}@media print{button.svelte-1grvppi{display:none}}",map:`{"version":3,"file":"EnterFullScreen.svelte","sources":["EnterFullScreen.svelte"],"sourcesContent":["<script>\\n\\timport { fade } from 'svelte/transition';\\n\\timport { Icon } from '@steeze-ui/svelte-icon';\\n\\timport { EnterFullScreen } from '@steeze-ui/radix-icons';\\n\\n\\texport let display;\\n<\/script>\\n\\n{#if display}\\n\\t<div transition:fade|local={{ duration: 200 }}>\\n\\t\\t<button type=\\"button\\" aria-label=\\"Enter Fullscreen\\" on:click>\\n\\t\\t\\t<span>Fullscreen</span>\\n\\t\\t\\t<Icon class=\\"w-3 h-3\\" src={EnterFullScreen} />\\n\\t\\t</button>\\n\\t</div>\\n{/if}\\n\\n<style>\\n\\tbutton :global(svg) {\\n\\t\\tstroke: var(--base-content);\\n\\t\\tmargin-top: auto;\\n\\t\\tmargin-bottom: auto;\\n\\t\\ttransition: stroke 200ms;\\n\\t}\\n\\n\\tbutton {\\n\\t\\tdisplay: flex;\\n\\t\\tcursor: pointer;\\n\\t\\tfont-family: var(--ui-font-family);\\n\\t\\tfont-size: 1em;\\n\\t\\tcolor: var(--base-content);\\n\\t\\topacity: 0.5;\\n\\t\\tjustify-items: flex-end;\\n\\t\\talign-items: baseline;\\n\\t\\tbackground-color: transparent;\\n\\t\\tborder: none;\\n\\t\\tpadding: 0;\\n\\t\\tmargin: 0 5px;\\n\\t\\tgap: 3px;\\n\\t\\ttransition: all 200ms;\\n\\t\\t-moz-user-select: none;\\n\\t\\t-webkit-user-select: none;\\n\\t\\t-o-user-select: none;\\n\\t\\tuser-select: none;\\n\\t}\\n\\n\\tbutton:hover {\\n\\t\\topacity: 1;\\n\\t\\tcolor: var(--primary);\\n\\t\\ttransition: all 200ms;\\n\\t}\\n\\n\\tbutton:hover :global(svg) {\\n\\t\\tstroke: var(--primary);\\n\\t\\ttransition: all 200ms;\\n\\t}\\n\\n\\t@media (max-width: 600px) {\\n\\t\\tbutton {\\n\\t\\t\\tdisplay: none;\\n\\t\\t}\\n\\t}\\n\\n\\t@media print {\\n\\t\\tbutton {\\n\\t\\t\\tdisplay: none;\\n\\t\\t}\\n\\t}</style>\\n"],"names":[],"mappings":"AAkBC,qBAAM,CAAS,GAAK,CACnB,MAAM,CAAE,IAAI,cAAc,CAAC,CAC3B,UAAU,CAAE,IAAI,CAChB,aAAa,CAAE,IAAI,CACnB,UAAU,CAAE,MAAM,CAAC,KACpB,CAEA,qBAAO,CACN,OAAO,CAAE,IAAI,CACb,MAAM,CAAE,OAAO,CACf,WAAW,CAAE,IAAI,gBAAgB,CAAC,CAClC,SAAS,CAAE,GAAG,CACd,KAAK,CAAE,IAAI,cAAc,CAAC,CAC1B,OAAO,CAAE,GAAG,CACZ,aAAa,CAAE,QAAQ,CACvB,WAAW,CAAE,QAAQ,CACrB,gBAAgB,CAAE,WAAW,CAC7B,MAAM,CAAE,IAAI,CACZ,OAAO,CAAE,CAAC,CACV,MAAM,CAAE,CAAC,CAAC,GAAG,CACb,GAAG,CAAE,GAAG,CACR,UAAU,CAAE,GAAG,CAAC,KAAK,CACrB,gBAAgB,CAAE,IAAI,CACtB,mBAAmB,CAAE,IAAI,CACzB,cAAc,CAAE,IAAI,CACpB,WAAW,CAAE,IACd,CAEA,qBAAM,MAAO,CACZ,OAAO,CAAE,CAAC,CACV,KAAK,CAAE,IAAI,SAAS,CAAC,CACrB,UAAU,CAAE,GAAG,CAAC,KACjB,CAEA,qBAAM,MAAM,CAAS,GAAK,CACzB,MAAM,CAAE,IAAI,SAAS,CAAC,CACtB,UAAU,CAAE,GAAG,CAAC,KACjB,CAEA,MAAO,YAAY,KAAK,CAAE,CACzB,qBAAO,CACN,OAAO,CAAE,IACV,CACD,CAEA,OAAO,KAAM,CACZ,qBAAO,CACN,OAAO,CAAE,IACV,CACD"}`},_e=U((n,e,t,h)=>{let{display:r}=e;return e.display===void 0&&t.display&&r!==void 0&&t.display(r),n.css.add(Qn),`${r?`<div><button type="button" aria-label="Enter Fullscreen" class="svelte-1grvppi"><span data-svelte-h="svelte-qzhydn">Fullscreen</span> ${c(ot,"Icon").$$render(n,{class:"w-3 h-3",src:In},{},{})}</button></div>`:""}`}),qn=n=>Object.keys(Qe).includes(n),Qe={grey:"base-content-muted",blue:"info",green:"positive",yellow:"warning",red:"negative",bluegreen:"positive"},Vn=(n,e,t)=>qn(t)?(console.warn(`[${n}] ${e}=${t} is deprecated. Please use a color from the theme, or a valid color string.`),Qe[t]):t,Fe=U((n,e,t,h)=>{let r,A,l,d,u,m,p=$,g=()=>(p(),p=R(d,E=>m=E),d),s,a=$,w=()=>(a(),a=R(l,E=>s=E),l),b,S=$,y=()=>(S(),S=R(A,E=>b=E),A),x,I=$,st=()=>(I(),I=R(r,E=>x=E),r),v,P;const{resolveColor:o,resolveColorScale:Vt}=ae();let _=Je(Le);P=R(_,E=>v=E);let It;const k=Symbol();let{id:T}=e;function Rt(){try{if(!Object.keys(v.data[0]).includes(T))throw It="Error in table: "+T+" does not exist in the dataset",new Error(It)}catch(E){It=E.message}}let{contentType:ct=void 0}=e,{title:ht=void 0}=e,{align:dt=void 0}=e;dt==="centre"&&(dt="center");let{wrap:L=!1}=e,{wrapTitle:et=!1}=e,{height:Ut=void 0}=e,{width:M=void 0}=e,{alt:Kt=void 0}=e,{openInNewTab:Et=!1}=e,{linkLabel:Yt=void 0}=e,{fmt:Pt=void 0}=e,{totalAgg:$t=void 0}=e,{totalFmt:Ht=void 0}=e,{weightCol:jt=void 0}=e,{subtotalFmt:te=void 0}=e,{colorMax:nt=void 0}=e,{colorMin:St=void 0}=e,{colorMid:B=void 0}=e,{colorBreakpoints:ut=void 0}=e,{scaleColor:K=void 0}=e,{colorScale:F="default"}=e,{scaleColumn:gt=void 0}=e,{downIsGood:Y=!1}=e,{showValue:wt=!0}=e,{deltaSymbol:rt=!0}=e,{neutralMin:D=0}=e,{neutralMax:N=0}=e,{chip:H=!1}=e,{sparkWidth:X=void 0}=e,{sparkHeight:Lt=void 0}=e,{sparkColor:Wt=void 0}=e,{sparkX:lt=void 0}=e,{sparkY:Qt=void 0}=e,{sparkYScale:Ct=!1}=e,{barColor:kt="#a5cdee"}=e,{negativeBarColor:qt="#fca5a5"}=e,{backgroundColor:Mt="transparent"}=e,{hideLabels:Z=!1}=e,{colGroup:W=void 0}=e,{fmtColumn:mt=void 0}=e,{redNegatives:Q=!1}=e;const Tt=()=>{Rt(),_.update(E=>{const bt=E.columns.findIndex(Dt=>Dt.identifier===k);return bt===-1?E.columns.push(u):E.columns=[...E.columns.slice(0,bt),u,...E.columns.slice(bt+1)],E})};return $e(()=>{_.update(E=>(E.columns=E.columns.filter(bt=>bt.identifier!==k),E))}),e.id===void 0&&t.id&&T!==void 0&&t.id(T),e.contentType===void 0&&t.contentType&&ct!==void 0&&t.contentType(ct),e.title===void 0&&t.title&&ht!==void 0&&t.title(ht),e.align===void 0&&t.align&&dt!==void 0&&t.align(dt),e.wrap===void 0&&t.wrap&&L!==void 0&&t.wrap(L),e.wrapTitle===void 0&&t.wrapTitle&&et!==void 0&&t.wrapTitle(et),e.height===void 0&&t.height&&Ut!==void 0&&t.height(Ut),e.width===void 0&&t.width&&M!==void 0&&t.width(M),e.alt===void 0&&t.alt&&Kt!==void 0&&t.alt(Kt),e.openInNewTab===void 0&&t.openInNewTab&&Et!==void 0&&t.openInNewTab(Et),e.linkLabel===void 0&&t.linkLabel&&Yt!==void 0&&t.linkLabel(Yt),e.fmt===void 0&&t.fmt&&Pt!==void 0&&t.fmt(Pt),e.totalAgg===void 0&&t.totalAgg&&$t!==void 0&&t.totalAgg($t),e.totalFmt===void 0&&t.totalFmt&&Ht!==void 0&&t.totalFmt(Ht),e.weightCol===void 0&&t.weightCol&&jt!==void 0&&t.weightCol(jt),e.subtotalFmt===void 0&&t.subtotalFmt&&te!==void 0&&t.subtotalFmt(te),e.colorMax===void 0&&t.colorMax&&nt!==void 0&&t.colorMax(nt),e.colorMin===void 0&&t.colorMin&&St!==void 0&&t.colorMin(St),e.colorMid===void 0&&t.colorMid&&B!==void 0&&t.colorMid(B),e.colorBreakpoints===void 0&&t.colorBreakpoints&&ut!==void 0&&t.colorBreakpoints(ut),e.scaleColor===void 0&&t.scaleColor&&K!==void 0&&t.scaleColor(K),e.colorScale===void 0&&t.colorScale&&F!==void 0&&t.colorScale(F),e.scaleColumn===void 0&&t.scaleColumn&&gt!==void 0&&t.scaleColumn(gt),e.downIsGood===void 0&&t.downIsGood&&Y!==void 0&&t.downIsGood(Y),e.showValue===void 0&&t.showValue&&wt!==void 0&&t.showValue(wt),e.deltaSymbol===void 0&&t.deltaSymbol&&rt!==void 0&&t.deltaSymbol(rt),e.neutralMin===void 0&&t.neutralMin&&D!==void 0&&t.neutralMin(D),e.neutralMax===void 0&&t.neutralMax&&N!==void 0&&t.neutralMax(N),e.chip===void 0&&t.chip&&H!==void 0&&t.chip(H),e.sparkWidth===void 0&&t.sparkWidth&&X!==void 0&&t.sparkWidth(X),e.sparkHeight===void 0&&t.sparkHeight&&Lt!==void 0&&t.sparkHeight(Lt),e.sparkColor===void 0&&t.sparkColor&&Wt!==void 0&&t.sparkColor(Wt),e.sparkX===void 0&&t.sparkX&&lt!==void 0&&t.sparkX(lt),e.sparkY===void 0&&t.sparkY&&Qt!==void 0&&t.sparkY(Qt),e.sparkYScale===void 0&&t.sparkYScale&&Ct!==void 0&&t.sparkYScale(Ct),e.barColor===void 0&&t.barColor&&kt!==void 0&&t.barColor(kt),e.negativeBarColor===void 0&&t.negativeBarColor&&qt!==void 0&&t.negativeBarColor(qt),e.backgroundColor===void 0&&t.backgroundColor&&Mt!==void 0&&t.backgroundColor(Mt),e.hideLabels===void 0&&t.hideLabels&&Z!==void 0&&t.hideLabels(Z),e.colGroup===void 0&&t.colGroup&&W!==void 0&&t.colGroup(W),e.fmtColumn===void 0&&t.fmtColumn&&mt!==void 0&&t.fmtColumn(mt),e.redNegatives===void 0&&t.redNegatives&&Q!==void 0&&t.redNegatives(Q),L=L==="true"||L===!0,et=et==="true"||et===!0,Et=Et==="true"||Et===!0,K&&console.warn("[Column] scaleColor is deprecated. Use colorScale instead."),F=Vn("Column","colorScale",F),st(r=Vt(F??F)),Y=Y==="true"||Y===!0,wt=wt==="true"||wt===!0,rt=rt==="true"||rt===!0,H=H==="true"||H===!0,Ct=Ct==="true"||Ct===!0,y(A=o(kt)),w(l=o(qt)),g(d=o(Mt)),Z=Z==="true"||Z===!0,Q=Q==="true"||Q===!0,u={identifier:k,id:T,title:ht,align:dt,wrap:L,wrapTitle:et,contentType:ct,height:Ut,width:M,alt:Kt,openInNewTab:Et,linkLabel:Yt,fmt:Pt,fmtColumn:mt,totalAgg:$t,totalFmt:Ht,subtotalFmt:te,weightCol:jt,downIsGood:Y,deltaSymbol:rt,chip:H,neutralMin:D,neutralMax:N,showValue:wt,colorMax:nt,colorMin:St,colorScale:x,scaleColumn:gt,colGroup:W,colorMid:B,colorBreakpoints:ut,redNegatives:Q,sparkWidth:X,sparkHeight:Lt,sparkColor:Wt,sparkX:lt,sparkY:Qt,sparkYScale:Ct,barColor:b,negativeBarColor:s,backgroundColor:m,hideLabels:Z},Tt(),p(),a(),S(),I(),P(),""}),{Object:Ne}=je,Yn={code:".table-container.svelte-ozf09l.svelte-ozf09l{font-size:9.5pt}.scrollbox.svelte-ozf09l.svelte-ozf09l{width:100%;overflow-x:auto;scrollbar-width:thin}table.svelte-ozf09l.svelte-ozf09l{display:table;width:100%;border-collapse:collapse;font-variant-numeric:tabular-nums}.page-changer.svelte-ozf09l.svelte-ozf09l{padding:0;height:1.1em;width:1.1em}.pagination.svelte-ozf09l.svelte-ozf09l{--tw-text-opacity:1;color:hsl(var(--twc-base-content-muted) / var(--twc-base-content-muted-opacity, var(--tw-text-opacity)));font-size:12px;display:flex;align-items:center;justify-content:flex-end;height:2em;font-family:var(--ui-font-family);-webkit-user-select:none;-moz-user-select:none;user-select:none;text-align:right;margin-top:0.5em;margin-bottom:1.8em;font-variant-numeric:tabular-nums}.page-labels.svelte-ozf09l.svelte-ozf09l{display:flex;justify-content:flex-start;align-items:center;gap:3px}.page-changer.svelte-ozf09l.svelte-ozf09l{font-size:20px;background:none;border:none;cursor:pointer;transition:color 200ms}.page-changer.hovering.svelte-ozf09l.svelte-ozf09l{color:hsl(var(--twc-primary) / var(--twc-primary-opacity, 1));transition:color 200ms}.page-changer.svelte-ozf09l.svelte-ozf09l:disabled{color:hsl(var(--twc-base-content-muted) / 0.25);cursor:auto;-webkit-user-select:none;-moz-user-select:none;user-select:none;transition:color 200ms}.page-icon.svelte-ozf09l.svelte-ozf09l{height:1em;width:1em}.page-input.svelte-ozf09l.svelte-ozf09l{--tw-bg-opacity:1;background-color:hsl(var(--twc-base-200) / var(--twc-base-200-opacity, var(--tw-bg-opacity)));--tw-text-opacity:1;color:hsl(var(--twc-base-content-muted) / var(--twc-base-content-muted-opacity, var(--tw-text-opacity)));box-sizing:content-box;text-align:center;padding:0.25em 0.5em;margin:0;border:1px solid transparent;border-radius:4px;font-size:12px}.table-footer.svelte-ozf09l.svelte-ozf09l{display:flex;justify-content:flex-end;align-items:center;margin:10px 0px;font-size:12px;height:9px}.page-input.svelte-ozf09l.svelte-ozf09l::-webkit-outer-spin-button,.page-input.svelte-ozf09l.svelte-ozf09l::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}.page-input[type='number'].svelte-ozf09l.svelte-ozf09l{-moz-appearance:textfield;-webkit-appearance:textfield;appearance:textfield}.page-input.hovering.svelte-ozf09l.svelte-ozf09l{border:1px solid var(--base-300)}.page-input.error.svelte-ozf09l.svelte-ozf09l{border:1px solid var(--negative)}.page-input.svelte-ozf09l.svelte-ozf09l::-moz-placeholder{--tw-text-opacity:1;color:hsl(var(--twc-base-content-muted) / var(--twc-base-content-muted-opacity, var(--tw-text-opacity)))}.page-input.svelte-ozf09l.svelte-ozf09l::placeholder{--tw-text-opacity:1;color:hsl(var(--twc-base-content-muted) / var(--twc-base-content-muted-opacity, var(--tw-text-opacity)))}button.svelte-ozf09l:enabled>.page-icon.svelte-ozf09l:hover{filter:brightness(0.8)}.svelte-ozf09l.svelte-ozf09l:focus{outline:none}.svelte-ozf09l.svelte-ozf09l::-moz-placeholder{--tw-text-opacity:1;color:hsl(var(--twc-base-content-muted) / var(--twc-base-content-muted-opacity, var(--tw-text-opacity)));opacity:1}.svelte-ozf09l.svelte-ozf09l::placeholder{--tw-text-opacity:1;color:hsl(var(--twc-base-content-muted) / var(--twc-base-content-muted-opacity, var(--tw-text-opacity)));opacity:1}.svelte-ozf09l.svelte-ozf09l:-ms-input-placeholder{--tw-text-opacity:1;color:hsl(var(--twc-base-content-muted) / var(--twc-base-content-muted-opacity, var(--tw-text-opacity)))}.svelte-ozf09l.svelte-ozf09l::-ms-input-placeholder{--tw-text-opacity:1;color:hsl(var(--twc-base-content-muted) / var(--twc-base-content-muted-opacity, var(--tw-text-opacity)))}.noresults.svelte-ozf09l.svelte-ozf09l{display:none;--tw-text-opacity:1;color:hsl(var(--twc-base-content-muted) / var(--twc-base-content-muted-opacity, var(--tw-text-opacity)));text-align:center;margin-top:5px}.shownoresults.svelte-ozf09l.svelte-ozf09l{display:block}.print-page-count.svelte-ozf09l.svelte-ozf09l{display:none}@media(max-width: 600px){.page-changer.svelte-ozf09l.svelte-ozf09l{height:1.2em;width:1.2em}.page-icon.svelte-ozf09l.svelte-ozf09l{height:1.2em;width:1.2em}.page-count.svelte-ozf09l.svelte-ozf09l{font-size:1.1em}.page-input.svelte-ozf09l.svelte-ozf09l{font-size:1.1em}}@media print{.pagination.svelte-ozf09l.svelte-ozf09l{-moz-column-break-inside:avoid;break-inside:avoid}.page-changer.svelte-ozf09l.svelte-ozf09l{display:none}.page-count.svelte-ozf09l.svelte-ozf09l{display:none}.print-page-count.svelte-ozf09l.svelte-ozf09l{display:inline}}",map:`{"version":3,"file":"_DataTable.svelte","sources":["_DataTable.svelte"],"sourcesContent":["<script>\\n\\timport { writable } from 'svelte/store';\\n\\timport { setContext } from 'svelte';\\n\\timport { slide } from 'svelte/transition';\\n\\timport { propKey, strictBuild } from '@evidence-dev/component-utilities/chartContext';\\n\\timport getColumnSummary from '@evidence-dev/component-utilities/getColumnSummary';\\n\\timport { convertColumnToDate } from '@evidence-dev/component-utilities/dateParsing';\\n\\timport ErrorChart from '../core/ErrorChart.svelte';\\n\\timport SearchBar from '../core/SearchBar.svelte';\\n\\timport checkInputs from '@evidence-dev/component-utilities/checkInputs';\\n\\timport DownloadData from '../../ui/DownloadData.svelte';\\n\\timport InvisibleLinks from '../../../atoms/InvisibleLinks.svelte';\\n\\n\\timport { Icon } from '@steeze-ui/svelte-icon';\\n\\timport CodeBlock from '../../ui/CodeBlock.svelte';\\n\\timport { aggregateColumn, getFinalColumnOrder } from './datatable.js';\\n\\timport TableRow from './TableRow.svelte';\\n\\timport TotalRow from './TotalRow.svelte';\\n\\timport SubtotalRow from './SubtotalRow.svelte';\\n\\timport TableHeader from './TableHeader.svelte';\\n\\timport GroupRow from './GroupRow.svelte';\\n\\timport { ChevronsLeft, ChevronsRight, ChevronLeft, ChevronRight } from '@steeze-ui/tabler-icons';\\n\\timport EnterFullScreen from './EnterFullScreen.svelte';\\n\\timport Fullscreen from '../../../atoms/fullscreen/Fullscreen.svelte';\\n\\timport Column from './Column.svelte';\\n\\timport { Query } from '@evidence-dev/sdk/usql';\\n\\timport QueryLoad from '../../../atoms/query-load/QueryLoad.svelte';\\n\\timport { toasts } from '@evidence-dev/component-utilities/stores';\\n\\timport { query } from '@evidence-dev/universal-sql/client-duckdb';\\n\\timport Skeleton from '../../../atoms/skeletons/Skeleton.svelte';\\n\\timport { browserDebounce } from '@evidence-dev/sdk/utils';\\n\\timport { getThemeStores } from '../../../themes/themes.js';\\n\\n\\tconst { resolveColor } = getThemeStores();\\n\\n\\t// Set up props store\\n\\tlet props = writable({});\\n\\tsetContext(propKey, props);\\n\\n\\t// Data, pagination, and row index numbers\\n\\texport let data;\\n\\texport let queryID = undefined;\\n\\texport let rows = 10; // number of rows to show\\n\\t$: rows = Number.parseInt(rows);\\n\\n\\texport let rowNumbers = false;\\n\\t$: rowNumbers = rowNumbers === 'true' || rowNumbers === true;\\n\\n\\t// Sort props\\n\\texport let sort = undefined;\\n\\tlet sortBy = undefined;\\n\\tlet sortAsc = undefined;\\n\\tlet sortDirection = undefined;\\n\\tlet sortObj = {};\\n\\t$: if (sort) {\\n\\t\\tconst [column, direction] = sort.split(' ');\\n\\t\\tsortBy = column;\\n\\t\\tsortDirection = direction;\\n\\t\\tsortAsc = direction === 'desc' ? false : true; // Default to ascending if no direction is provided\\n\\t\\tsortObj = sortBy ? { col: sortBy, ascending: sortAsc } : { col: null, ascending: null };\\n\\t}\\n\\n\\texport let groupBy = undefined;\\n\\texport let groupsOpen = true; // starting toggle for groups - open or closed\\n\\t$: groupsOpen = groupsOpen === 'true' || groupsOpen === true;\\n\\texport let groupType = 'accordion'; // accordion | section\\n\\n\\texport let accordionRowColor = undefined;\\n\\t$: accordionRowColorStore = resolveColor(accordionRowColor);\\n\\n\\texport let groupNamePosition = 'middle'; // middle (default) | top | bottom\\n\\n\\tif (groupType === 'section') {\\n\\t\\trowNumbers = false; // turn off row numbers\\n\\t}\\n\\n\\texport let subtotals = false;\\n\\t$: subtotals = subtotals === 'true' || subtotals === true;\\n\\n\\texport let subtotalRowColor = undefined;\\n\\t$: subtotalRowColorStore = resolveColor(subtotalRowColor);\\n\\n\\texport let subtotalFontColor = undefined;\\n\\t$: subtotalFontColorStore = resolveColor(subtotalFontColor);\\n\\n\\tlet groupToggleStates = {};\\n\\n\\tfunction handleToggle({ detail }) {\\n\\t\\tconst { groupName } = detail;\\n\\t\\tgroupToggleStates[groupName] = !groupToggleStates[groupName];\\n\\t}\\n\\n\\tlet paginated;\\n\\t$: paginated = data.length > rows && !groupBy;\\n\\n\\tlet hovering = false;\\n\\n\\tlet marginTop = '1.5em';\\n\\tlet marginBottom = '1em';\\n\\tlet paddingBottom = '0em';\\n\\n\\texport let generateMarkdown = false;\\n\\t$: generateMarkdown = generateMarkdown === 'true' || generateMarkdown === true;\\n\\n\\t// Table features\\n\\texport let search = false;\\n\\t$: search = search === 'true' || search === true;\\n\\n\\texport let sortable = true;\\n\\t$: sortable = sortable === 'true' || sortable === true;\\n\\n\\texport let downloadable = true;\\n\\t$: downloadable = downloadable === 'true' || downloadable === true;\\n\\n\\texport let totalRow = false;\\n\\t$: totalRow = totalRow === 'true' || totalRow === true;\\n\\n\\texport let totalRowColor = undefined;\\n\\t$: totalRowColorStore = resolveColor(totalRowColor);\\n\\n\\texport let totalFontColor = undefined;\\n\\t$: totalFontColorStore = resolveColor(totalFontColor);\\n\\n\\texport let isFullPage = false;\\n\\n\\t// Row Links:\\n\\texport let link = undefined;\\n\\n\\texport let showLinkCol = false; // hides link column when columns have not been explicitly selected\\n\\t$: showLinkCol = showLinkCol === 'true' || showLinkCol === true;\\n\\n\\tlet error = undefined;\\n\\tlet groupDataPopulated = false;\\n\\n\\t// ---------------------------------------------------------------------------------------\\n\\t// Add props to store to let child components access them\\n\\t// ---------------------------------------------------------------------------------------\\n\\tprops.update((d) => {\\n\\t\\tgroupDataPopulated = false;\\n\\t\\treturn { ...d, data, columns: [] };\\n\\t});\\n\\n\\t// ---------------------------------------------------------------------------------------\\n\\t// STYLING\\n\\t// ---------------------------------------------------------------------------------------\\n\\texport let rowShading = false;\\n\\t$: rowShading = rowShading === 'true' || rowShading === true;\\n\\n\\texport let rowLines = true;\\n\\t$: rowLines = rowLines === 'true' || rowLines === true;\\n\\n\\texport let wrapTitles = false;\\n\\t$: wrapTitles = wrapTitles === 'true' || wrapTitles === true;\\n\\n\\texport let headerColor = undefined;\\n\\t$: headerColorStore = resolveColor(headerColor);\\n\\n\\texport let headerFontColor = undefined;\\n\\t$: headerFontColorStore = resolveColor(headerFontColor);\\n\\n\\texport let formatColumnTitles = true;\\n\\t$: formatColumnTitles = formatColumnTitles === 'true' || formatColumnTitles === true;\\n\\n\\texport let backgroundColor = undefined;\\n\\t$: backgroundColorStore = resolveColor(backgroundColor);\\n\\n\\texport let compact = undefined;\\n\\n\\t// ---------------------------------------------------------------------------------------\\n\\t// DATA SETUP\\n\\t// ---------------------------------------------------------------------------------------\\n\\n\\tlet columnSummary;\\n\\n\\tlet priorityColumns = [groupBy];\\n\\n\\tprops.update((d) => {\\n\\t\\treturn { ...d, priorityColumns };\\n\\t});\\n\\n\\t$: finalColumnOrder = getFinalColumnOrder(\\n\\t\\t$props.columns.map((d) => d.id),\\n\\t\\t$props.priorityColumns\\n\\t);\\n\\t$: orderedColumns = [...$props.columns].sort(\\n\\t\\t(a, b) => finalColumnOrder.indexOf(a.id) - finalColumnOrder.indexOf(b.id)\\n\\t);\\n\\n\\t$: try {\\n\\t\\terror = undefined;\\n\\n\\t\\t// CHECK INPUTS\\n\\t\\tcheckInputs(data);\\n\\n\\t\\t// GET COLUMN SUMMARY\\n\\t\\tcolumnSummary = getColumnSummary(data, 'array');\\n\\n\\t\\t// Check if sort column is in table\\n\\t\\tif (sortBy) {\\n\\t\\t\\tif (!columnSummary.map((d) => d.id).includes(sortBy)) {\\n\\t\\t\\t\\tthrow Error(\\n\\t\\t\\t\\t\\t\`\${sortBy} is not a column in the dataset. sort should contain one column name and optionally a direction (asc or desc). E.g., sort=my_column or sort=\\"my_column desc\\"\`\\n\\t\\t\\t\\t);\\n\\t\\t\\t}\\n\\t\\t\\tif (sortDirection && !['asc', 'desc'].includes(sortDirection)) {\\n\\t\\t\\t\\tthrow Error(\`\${sortDirection} is not a valid sort direction. Please use asc or desc\`);\\n\\t\\t\\t}\\n\\t\\t}\\n\\n\\t\\t// PROCESS DATES\\n\\t\\t// Filter for columns with type of \\"date\\"\\n\\t\\tconst dateCols = columnSummary\\n\\t\\t\\t.filter((d) => d.type === 'date' && !(data[0]?.[d.id] instanceof Date))\\n\\t\\t\\t.map((d) => d.id);\\n\\n\\t\\tfor (let i = 0; i < dateCols.length; i++) {\\n\\t\\t\\tdata = convertColumnToDate(data, dateCols[i]);\\n\\t\\t}\\n\\n\\t\\t// Hide link column if columns have not been explicitly selected:\\n\\t\\tif (link) {\\n\\t\\t\\tconst linkColIndex = columnSummary.findIndex((d) => d.id === link);\\n\\t\\t\\tif (linkColIndex !== -1 && !showLinkCol) {\\n\\t\\t\\t\\tcolumnSummary.splice(linkColIndex, 1);\\n\\t\\t\\t}\\n\\t\\t}\\n\\t} catch (e) {\\n\\t\\terror = e.message;\\n\\t\\tif (strictBuild) {\\n\\t\\t\\tthrow error;\\n\\t\\t}\\n\\t}\\n\\n\\tlet index = 0;\\n\\n\\tlet inputPage = null;\\n\\t$: inputPageElWidth = \`\${(inputPage ?? 1).toString().length}ch\`;\\n\\n\\t// ---------------------------------------------------------------------------------------\\n\\t// SEARCH\\n\\t// ---------------------------------------------------------------------------------------\\n\\tlet searchValue = '';\\n\\t/** @type {import(\\"@evidence-dev/sdk/usql\\").QueryValue} */\\n\\tlet filteredData;\\n\\t$: filteredData = data;\\n\\tlet showNoResults = false;\\n\\n\\t/** @type {ReturnValue<typeof Query[\\"createReactive\\"]>}*/\\n\\tlet searchFactory;\\n\\t$: if (Query.isQuery(data) && search) {\\n\\t\\tsearchFactory = browserDebounce(\\n\\t\\t\\tQuery.createReactive(\\n\\t\\t\\t\\t{\\n\\t\\t\\t\\t\\tloadGracePeriod: 1000,\\n\\t\\t\\t\\t\\tcallback: (v) => {\\n\\t\\t\\t\\t\\t\\tfilteredData = v;\\n\\t\\t\\t\\t\\t},\\n\\t\\t\\t\\t\\texecFn: query\\n\\t\\t\\t\\t},\\n\\t\\t\\t\\tdata.opts,\\n\\t\\t\\t\\tdata\\n\\t\\t\\t),\\n\\t\\t\\t200\\n\\t\\t);\\n\\t}\\n\\n\\t$: if (searchFactory) {\\n\\t\\tif (searchValue) {\\n\\t\\t\\tsearchFactory(\\n\\t\\t\\t\\tdata.search(\\n\\t\\t\\t\\t\\tsearchValue,\\n\\t\\t\\t\\t\\t$props.columns.map((c) => c.id),\\n\\t\\t\\t\\t\\tsearchValue.length === 1 ? 0.5 : searchValue.length >= 6 ? 0.9 : 0.8\\n\\t\\t\\t\\t),\\n\\t\\t\\t\\tdata.opts\\n\\t\\t\\t);\\n\\t\\t} else {\\n\\t\\t\\tsearchFactory(data, data.opts);\\n\\t\\t}\\n\\t}\\n\\n\\t$: if (search && !Query.isQuery(data)) {\\n\\t\\ttoasts.add(\\n\\t\\t\\t{\\n\\t\\t\\t\\tstatus: 'warning',\\n\\t\\t\\t\\ttitle: 'Search Failed',\\n\\t\\t\\t\\tmessage: 'Please use a query instead.'\\n\\t\\t\\t},\\n\\t\\t\\t5000\\n\\t\\t);\\n\\t}\\n\\n\\t// ---------------------------------------------------------------------------------------\\n\\t// SORTING\\n\\t// ---------------------------------------------------------------------------------------\\n\\n\\t$: sortClick = (column) => {\\n\\t\\tif (sortObj.col === column) {\\n\\t\\t\\t// If the clicked column is the same as inital sort column, switch the sort direction\\n\\t\\t\\tsortObj.ascending = !sortObj.ascending;\\n\\t\\t} else {\\n\\t\\t\\t// If the clicked column is different from initial sort column, change the sort column and sort ascending\\n\\t\\t\\tsortObj.col = column;\\n\\t\\t\\tsortObj.ascending = true;\\n\\t\\t}\\n\\n\\t\\tsortFunc(sortObj);\\n\\t};\\n\\n\\t$: sortFunc = (sortObj) => {\\n\\t\\tconst column = sortObj.col;\\n\\n\\t\\t// Modifier to sorting function for ascending or descending\\n\\t\\tconst sortModifier = sortObj.ascending ? 1 : -1;\\n\\n\\t\\tconst forceTopOfAscending = (val) =>\\n\\t\\t\\tval === undefined || val === null || (typeof val === 'number' && isNaN(val));\\n\\n\\t\\tconst comparator = (a, b) =>\\n\\t\\t\\t(forceTopOfAscending(a[column]) && !forceTopOfAscending(b[column])) || a[column] < b[column]\\n\\t\\t\\t\\t? -1 * sortModifier\\n\\t\\t\\t\\t: (forceTopOfAscending(b[column]) && !forceTopOfAscending(a[column])) ||\\n\\t\\t\\t\\t\\t  a[column] > b[column]\\n\\t\\t\\t\\t\\t? 1 * sortModifier\\n\\t\\t\\t\\t\\t: 0;\\n\\n\\t\\tif (groupBy) {\\n\\t\\t\\tconst sortedGroupedData = {};\\n\\n\\t\\t\\tfor (const groupName of Object.keys(groupedData)) {\\n\\t\\t\\t\\tsortedGroupedData[groupName] = [...groupedData[groupName]].sort(comparator);\\n\\t\\t\\t}\\n\\n\\t\\t\\tgroupedData = sortedGroupedData;\\n\\t\\t} else {\\n\\t\\t\\tconst sortedFilteredData = [...filteredData].sort(comparator);\\n\\t\\t\\tfilteredData = sortedFilteredData;\\n\\t\\t}\\n\\t};\\n\\n\\tlet sortedGroupNames;\\n\\t$: if (groupBy && sortObj.col) {\\n\\t\\t// Sorting groups based on aggregated values or group names\\n\\t\\tsortedGroupNames = Object.entries(groupRowData)\\n\\t\\t\\t.sort((a, b) => {\\n\\t\\t\\t\\tconst valA = a[1][sortObj.col],\\n\\t\\t\\t\\t\\tvalB = b[1][sortObj.col];\\n\\t\\t\\t\\t// Use the existing sort logic but apply it to groupRowData's values\\n\\t\\t\\t\\t// Special case for groupby column\\n\\t\\t\\t\\tif (sortObj.col === groupBy && isNaN(groupBy)) {\\n\\t\\t\\t\\t\\treturn sortObj.ascending ? a[0].localeCompare(b[0]) : b[0].localeCompare(a[0]);\\n\\t\\t\\t\\t}\\n\\t\\t\\t\\tif (\\n\\t\\t\\t\\t\\t(valA === undefined || valA === null || isNaN(valA)) &&\\n\\t\\t\\t\\t\\tvalB !== undefined &&\\n\\t\\t\\t\\t\\t!isNaN(valB)\\n\\t\\t\\t\\t) {\\n\\t\\t\\t\\t\\treturn -1 * (sortObj.ascending ? 1 : -1);\\n\\t\\t\\t\\t}\\n\\t\\t\\t\\tif (\\n\\t\\t\\t\\t\\t(valB === undefined || valB === null || isNaN(valB)) &&\\n\\t\\t\\t\\t\\tvalA !== undefined &&\\n\\t\\t\\t\\t\\t!isNaN(valA)\\n\\t\\t\\t\\t) {\\n\\t\\t\\t\\t\\treturn 1 * (sortObj.ascending ? 1 : -1);\\n\\t\\t\\t\\t}\\n\\t\\t\\t\\tif (valA < valB) {\\n\\t\\t\\t\\t\\treturn -1 * (sortObj.ascending ? 1 : -1);\\n\\t\\t\\t\\t} else if (valA > valB) {\\n\\t\\t\\t\\t\\treturn 1 * (sortObj.ascending ? 1 : -1);\\n\\t\\t\\t\\t}\\n\\t\\t\\t\\treturn 0;\\n\\t\\t\\t})\\n\\t\\t\\t.map((entry) => entry[0]); // Extract sorted group names\\n\\t} else {\\n\\t\\t// Default to alphabetical order of group names or another criterion when not sorting by a specific column\\n\\t\\tsortedGroupNames = Object.keys(groupedData).sort();\\n\\t}\\n\\n\\t// Re-run sort on data change (useful for input changes)\\n\\t$: if (data && sort) {\\n\\t\\tsortFunc(sortObj);\\n\\t}\\n\\n\\t// ---------------------------------------------------------------------------------------\\n\\t// PAGINATION\\n\\t// ---------------------------------------------------------------------------------------\\n\\n\\tlet totalRows;\\n\\t$: totalRows = filteredData.length;\\n\\n\\tlet displayedData = filteredData;\\n\\n\\tlet pageCount;\\n\\tlet currentPage = 1;\\n\\n\\t$: currentPage = Math.ceil((index + rows) / rows);\\n\\t$: currentPageElWidth = \`\${(currentPage ?? 1).toString().length}ch\`;\\n\\tlet max;\\n\\n\\t$: goToPage = (pageNumber) => {\\n\\t\\tindex = pageNumber * rows;\\n\\t\\tmax = index + rows;\\n\\t\\tcurrentPage = Math.ceil(max / rows);\\n\\t\\tif (inputPage) {\\n\\t\\t\\tinputPage = Math.ceil(max / rows);\\n\\t\\t}\\n\\t\\ttotalRows = filteredData.length;\\n\\t\\tdisplayedData = filteredData.slice(index, index + rows);\\n\\t};\\n\\n\\tlet displayedPageLength = 0;\\n\\n\\t$: if (paginated) {\\n\\t\\tpageCount = Math.ceil(filteredData.length / rows);\\n\\n\\t\\tdisplayedData = filteredData.slice(index, index + rows);\\n\\t\\tdisplayedPageLength = displayedData.length;\\n\\t\\tif (pageCount < currentPage) {\\n\\t\\t\\tgoToPage(pageCount - 1);\\n\\t\\t} else if (currentPage < 1) {\\n\\t\\t\\tgoToPage(0);\\n\\t\\t}\\n\\t} else {\\n\\t\\tcurrentPage = 1;\\n\\t\\tdisplayedData = filteredData;\\n\\t}\\n\\n\\t// ---------------------------------------------------------------------------------------\\n\\t// DATA FOR EXPORT\\n\\t// ---------------------------------------------------------------------------------------\\n\\n\\tfunction dataSubset(data, selectedCols) {\\n\\t\\treturn data.map((obj) => {\\n\\t\\t\\tconst ret = {};\\n\\t\\t\\tfor (const key of selectedCols) {\\n\\t\\t\\t\\tret[key] = obj[key];\\n\\t\\t\\t}\\n\\t\\t\\treturn ret;\\n\\t\\t});\\n\\t}\\n\\n\\t$: tableData = dataSubset(\\n\\t\\tdata,\\n\\t\\t$props.columns.map((d) => d.id)\\n\\t);\\n\\n\\t// ---------------------------------------------------------------------------------------\\n\\t// GROUPED DATA\\n\\t// ---------------------------------------------------------------------------------------\\n\\n\\tlet groupedData = {};\\n\\tlet groupRowData = [];\\n\\n\\t$: if (!error) {\\n\\t\\tif (groupBy && !groupDataPopulated) {\\n\\t\\t\\tgroupedData = data.reduce((acc, row) => {\\n\\t\\t\\t\\tconst groupName = row[groupBy];\\n\\t\\t\\t\\tif (!acc[groupName]) {\\n\\t\\t\\t\\t\\tacc[groupName] = [];\\n\\t\\t\\t\\t}\\n\\t\\t\\t\\tacc[groupName].push(row);\\n\\t\\t\\t\\treturn acc;\\n\\t\\t\\t}, {});\\n\\t\\t\\tgroupDataPopulated = true;\\n\\t\\t}\\n\\n\\t\\t// After groupedData is populated, calculate aggregations for groupRowData\\n\\t\\tgroupRowData = Object.keys(groupedData).reduce((acc, groupName) => {\\n\\t\\t\\tacc[groupName] = {}; // Initialize groupRow object for this group\\n\\n\\t\\t\\tfor (const col of $props.columns) {\\n\\t\\t\\t\\tconst id = col.id;\\n\\t\\t\\t\\tconst colType = columnSummary.find((d) => d.id === id)?.type;\\n\\t\\t\\t\\tconst totalAgg = col.totalAgg;\\n\\t\\t\\t\\tconst weightCol = col.weightCol;\\n\\t\\t\\t\\tconst rows = groupedData[groupName];\\n\\t\\t\\t\\tacc[groupName][id] = aggregateColumn(rows, id, totalAgg, colType, weightCol);\\n\\t\\t\\t}\\n\\n\\t\\t\\treturn acc;\\n\\t\\t}, {});\\n\\n\\t\\t// Update groupToggleStates only for new groups\\n\\t\\tconst existingGroups = Object.keys(groupToggleStates);\\n\\t\\tfor (const groupName of Object.keys(groupedData)) {\\n\\t\\t\\tif (!existingGroups.includes(groupName)) {\\n\\t\\t\\t\\tgroupToggleStates[groupName] = groupsOpen; // Only add new groups with the default state\\n\\t\\t\\t}\\n\\t\\t\\t// Existing states are untouched\\n\\t\\t}\\n\\t}\\n\\n\\tlet fullscreen = false;\\n\\t/** @type {number} */\\n\\tlet innerHeight;\\n<\/script>\\n\\n<svelte:window bind:innerHeight />\\n\\n{#if !isFullPage && innerHeight !== undefined}\\n\\t<Fullscreen bind:open={fullscreen} {search}>\\n\\t\\t<!-- when compact middle rows are 17.5, middle rows are 23 -->\\n\\t\\t{@const ROW_HEIGHT = compact ? 17.5 : 23}\\n\\t\\t<!-- header and last row are 22.5+22.5 = 45px -->\\n\\t\\t{@const HEADER_LAST_ROW_HEIGHT = 45}\\n\\t\\t<!-- Add additional padding for search bar + 24px-->\\n\\t\\t{@const SEARCHBAR_HEIGHT = 24}\\n\\t\\t<!-- Calculation of total padding -->\\n\\t\\t{@const Y_AXIS_PADDING = search\\n\\t\\t\\t? SEARCHBAR_HEIGHT + HEADER_LAST_ROW_HEIGHT + 234\\n\\t\\t\\t: HEADER_LAST_ROW_HEIGHT + 234}\\n\\t\\t<div class=\\"pt-4\\">\\n\\t\\t\\t<svelte:self\\n\\t\\t\\t\\t{...$$props}\\n\\t\\t\\t\\trows={1 + Math.round((innerHeight - Y_AXIS_PADDING) / ROW_HEIGHT)}\\n\\t\\t\\t\\tisFullPage\\n\\t\\t\\t>\\n\\t\\t\\t\\t{#each $props.columns as column}\\n\\t\\t\\t\\t\\t<Column {...column} />\\n\\t\\t\\t\\t{/each}\\n\\t\\t\\t</svelte:self>\\n\\t\\t</div>\\n\\t</Fullscreen>\\n{/if}\\n\\n{#if error === undefined}\\n\\t<slot>\\n\\t\\t<!-- default to every column with no customization -->\\n\\t\\t{#each columnSummary as column}\\n\\t\\t\\t<Column id={column.id} />\\n\\t\\t{/each}\\n\\t</slot>\\n\\n\\t{#if link}\\n\\t\\t<InvisibleLinks {data} {link} />\\n\\t{/if}\\n\\t{#each $props.columns.filter((column) => column.contentType === 'link') as column}\\n\\t\\t<InvisibleLinks {data} link={column.id} />\\n\\t{/each}\\n\\n\\t<div\\n\\t\\tdata-testid={isFullPage ? undefined : \`DataTable-\${data?.id ?? 'no-id'}\`}\\n\\t\\trole=\\"none\\"\\n\\t\\tclass=\\"table-container\\"\\n\\t\\ttransition:slide|local\\n\\t\\tstyle:margin-top={marginTop}\\n\\t\\tstyle:margin-bottom={marginBottom}\\n\\t\\tstyle:padding-bottom={paddingBottom}\\n\\t\\ton:mouseenter={() => (hovering = true)}\\n\\t\\ton:mouseleave={() => (hovering = false)}\\n\\t>\\n\\t\\t{#if search}\\n\\t\\t\\t<SearchBar bind:value={searchValue} searchFunction={() => {}} />\\n\\t\\t{/if}\\n\\n\\t\\t<div class=\\"scrollbox pretty-scrollbar\\" style:background-color={$backgroundColorStore}>\\n\\t\\t\\t<table>\\n\\t\\t\\t\\t<TableHeader\\n\\t\\t\\t\\t\\t{rowNumbers}\\n\\t\\t\\t\\t\\theaderColor={$headerColorStore}\\n\\t\\t\\t\\t\\theaderFontColor={$headerFontColorStore}\\n\\t\\t\\t\\t\\t{orderedColumns}\\n\\t\\t\\t\\t\\t{columnSummary}\\n\\t\\t\\t\\t\\t{compact}\\n\\t\\t\\t\\t\\t{sortable}\\n\\t\\t\\t\\t\\t{sortClick}\\n\\t\\t\\t\\t\\t{formatColumnTitles}\\n\\t\\t\\t\\t\\t{sortObj}\\n\\t\\t\\t\\t\\t{wrapTitles}\\n\\t\\t\\t\\t\\t{link}\\n\\t\\t\\t\\t/>\\n\\n\\t\\t\\t\\t<QueryLoad data={filteredData}>\\n\\t\\t\\t\\t\\t<svelte:fragment slot=\\"skeleton\\">\\n\\t\\t\\t\\t\\t\\t<tr>\\n\\t\\t\\t\\t\\t\\t\\t<td colspan={filteredData.columns.length} class=\\"h-32\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t<Skeleton />\\n\\t\\t\\t\\t\\t\\t\\t</td>\\n\\t\\t\\t\\t\\t\\t</tr>\\n\\t\\t\\t\\t\\t</svelte:fragment>\\n\\t\\t\\t\\t\\t{#if groupBy && groupedData && searchValue === ''}\\n\\t\\t\\t\\t\\t\\t{#each sortedGroupNames as groupName}\\n\\t\\t\\t\\t\\t\\t\\t{#if groupType === 'accordion'}\\n\\t\\t\\t\\t\\t\\t\\t\\t<GroupRow\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t{groupName}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tcurrentGroupData={groupedData[groupName]}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\ttoggled={groupToggleStates[groupName]}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\ton:toggle={handleToggle}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t{columnSummary}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\trowColor={$accordionRowColorStore}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t{rowNumbers}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t{subtotals}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t{compact}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t{orderedColumns}\\n\\t\\t\\t\\t\\t\\t\\t\\t/>\\n\\t\\t\\t\\t\\t\\t\\t\\t{#if groupToggleStates[groupName]}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<TableRow\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tdisplayedData={groupedData[groupName]}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t{groupType}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t{rowShading}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t{link}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t{rowNumbers}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t{rowLines}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t{compact}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t{index}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t{columnSummary}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tgrouped={true}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tgroupColumn={groupBy}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t{orderedColumns}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t/>\\n\\t\\t\\t\\t\\t\\t\\t\\t{/if}\\n\\t\\t\\t\\t\\t\\t\\t{:else if groupType === 'section'}\\n\\t\\t\\t\\t\\t\\t\\t\\t<TableRow\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tgroupColumn={groupBy}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t{groupType}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\trowSpan={groupedData[groupName].length}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tdisplayedData={groupedData[groupName]}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t{rowShading}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t{link}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t{rowNumbers}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t{rowLines}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t{compact}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t{index}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t{columnSummary}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tgrouped={true}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t{groupNamePosition}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t{orderedColumns}\\n\\t\\t\\t\\t\\t\\t\\t\\t/>\\n\\t\\t\\t\\t\\t\\t\\t\\t{#if subtotals}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<SubtotalRow\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t{groupName}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tcurrentGroupData={groupedData[groupName]}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t{columnSummary}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\trowColor={$subtotalRowColorStore}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tfontColor={$subtotalFontColorStore}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t{groupType}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t{groupBy}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t{compact}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t{orderedColumns}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t/>\\n\\t\\t\\t\\t\\t\\t\\t\\t{/if}\\n\\t\\t\\t\\t\\t\\t\\t{/if}\\n\\t\\t\\t\\t\\t\\t{/each}\\n\\t\\t\\t\\t\\t{:else}\\n\\t\\t\\t\\t\\t\\t<TableRow\\n\\t\\t\\t\\t\\t\\t\\t{displayedData}\\n\\t\\t\\t\\t\\t\\t\\t{rowShading}\\n\\t\\t\\t\\t\\t\\t\\t{link}\\n\\t\\t\\t\\t\\t\\t\\t{rowNumbers}\\n\\t\\t\\t\\t\\t\\t\\t{rowLines}\\n\\t\\t\\t\\t\\t\\t\\t{compact}\\n\\t\\t\\t\\t\\t\\t\\t{index}\\n\\t\\t\\t\\t\\t\\t\\t{columnSummary}\\n\\t\\t\\t\\t\\t\\t\\t{orderedColumns}\\n\\t\\t\\t\\t\\t\\t/>\\n\\t\\t\\t\\t\\t{/if}\\n\\n\\t\\t\\t\\t\\t{#if totalRow && searchValue === ''}\\n\\t\\t\\t\\t\\t\\t<TotalRow\\n\\t\\t\\t\\t\\t\\t\\t{data}\\n\\t\\t\\t\\t\\t\\t\\t{rowNumbers}\\n\\t\\t\\t\\t\\t\\t\\t{columnSummary}\\n\\t\\t\\t\\t\\t\\t\\trowColor={$totalRowColorStore}\\n\\t\\t\\t\\t\\t\\t\\tfontColor={$totalFontColorStore}\\n\\t\\t\\t\\t\\t\\t\\t{groupType}\\n\\t\\t\\t\\t\\t\\t\\t{compact}\\n\\t\\t\\t\\t\\t\\t\\t{orderedColumns}\\n\\t\\t\\t\\t\\t\\t/>\\n\\t\\t\\t\\t\\t{/if}\\n\\t\\t\\t\\t</QueryLoad>\\n\\t\\t\\t</table>\\n\\t\\t</div>\\n\\n\\t\\t<div class=\\"noresults\\" class:shownoresults={showNoResults}>No Results</div>\\n\\n\\t\\t{#if paginated && pageCount > 1}\\n\\t\\t\\t<div class=\\"pagination\\">\\n\\t\\t\\t\\t<div class=\\"page-labels mr-auto\\">\\n\\t\\t\\t\\t\\t<button\\n\\t\\t\\t\\t\\t\\taria-label=\\"first-page\\"\\n\\t\\t\\t\\t\\t\\tclass=\\"page-changer\\"\\n\\t\\t\\t\\t\\t\\tclass:hovering\\n\\t\\t\\t\\t\\t\\tdisabled={currentPage === 1}\\n\\t\\t\\t\\t\\t\\ton:click={() => goToPage(0)}\\n\\t\\t\\t\\t\\t>\\n\\t\\t\\t\\t\\t\\t<div class=\\"page-icon flex items-center\\">\\n\\t\\t\\t\\t\\t\\t\\t<Icon src={ChevronsLeft} />\\n\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t</button>\\n\\t\\t\\t\\t\\t<button\\n\\t\\t\\t\\t\\t\\taria-label=\\"previous-page\\"\\n\\t\\t\\t\\t\\t\\tclass=\\"page-changer\\"\\n\\t\\t\\t\\t\\t\\tclass:hovering\\n\\t\\t\\t\\t\\t\\tdisabled={currentPage === 1}\\n\\t\\t\\t\\t\\t\\ton:click={() => goToPage(currentPage - 2)}\\n\\t\\t\\t\\t\\t>\\n\\t\\t\\t\\t\\t\\t<div class=\\"page-icon h-[0.83em] flex items-center\\">\\n\\t\\t\\t\\t\\t\\t\\t<Icon src={ChevronLeft} class=\\"h-[0.83em]\\" />\\n\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t</button>\\n\\t\\t\\t\\t\\t<span class=\\"page-count\\">\\n\\t\\t\\t\\t\\t\\tPage\\n\\t\\t\\t\\t\\t\\t<input\\n\\t\\t\\t\\t\\t\\t\\tclass=\\"page-input\\"\\n\\t\\t\\t\\t\\t\\t\\tclass:hovering\\n\\t\\t\\t\\t\\t\\t\\tclass:error={inputPage > pageCount}\\n\\t\\t\\t\\t\\t\\t\\tstyle=\\"width: {inputPage ? inputPageElWidth : currentPageElWidth};\\"\\n\\t\\t\\t\\t\\t\\t\\ttype=\\"number\\"\\n\\t\\t\\t\\t\\t\\t\\tbind:value={inputPage}\\n\\t\\t\\t\\t\\t\\t\\ton:keyup={() => goToPage((inputPage ?? 1) - 1)}\\n\\t\\t\\t\\t\\t\\t\\ton:change={() => goToPage((inputPage ?? 1) - 1)}\\n\\t\\t\\t\\t\\t\\t\\tplaceholder={currentPage}\\n\\t\\t\\t\\t\\t\\t/>\\n\\t\\t\\t\\t\\t\\t/\\n\\t\\t\\t\\t\\t\\t<span class=\\"page-count ml-1\\">{pageCount.toLocaleString()}</span>\\n\\t\\t\\t\\t\\t</span>\\n\\t\\t\\t\\t\\t<span class=\\"print-page-count\\">\\n\\t\\t\\t\\t\\t\\t{displayedPageLength.toLocaleString()} of {totalRows.toLocaleString()} records\\n\\t\\t\\t\\t\\t</span>\\n\\t\\t\\t\\t\\t<button\\n\\t\\t\\t\\t\\t\\taria-label=\\"next-page\\"\\n\\t\\t\\t\\t\\t\\tclass=\\"page-changer\\"\\n\\t\\t\\t\\t\\t\\tclass:hovering\\n\\t\\t\\t\\t\\t\\tdisabled={currentPage === pageCount}\\n\\t\\t\\t\\t\\t\\ton:click={() => goToPage(currentPage)}\\n\\t\\t\\t\\t\\t>\\n\\t\\t\\t\\t\\t\\t<div class=\\"page-icon h-[0.83em] flex items-center\\">\\n\\t\\t\\t\\t\\t\\t\\t<Icon src={ChevronRight} class=\\"h-[0.83em]\\" />\\n\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t</button>\\n\\t\\t\\t\\t\\t<button\\n\\t\\t\\t\\t\\t\\taria-label=\\"last-page\\"\\n\\t\\t\\t\\t\\t\\tclass=\\"page-changer\\"\\n\\t\\t\\t\\t\\t\\tclass:hovering\\n\\t\\t\\t\\t\\t\\tdisabled={currentPage === pageCount}\\n\\t\\t\\t\\t\\t\\ton:click={() => goToPage(pageCount - 1)}\\n\\t\\t\\t\\t\\t>\\n\\t\\t\\t\\t\\t\\t<div class=\\"page-icon flex items-center\\">\\n\\t\\t\\t\\t\\t\\t\\t<Icon src={ChevronsRight} />\\n\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t</button>\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t{#if downloadable}\\n\\t\\t\\t\\t\\t<DownloadData class=\\"download-button\\" data={tableData} {queryID} display={hovering} />\\n\\t\\t\\t\\t{/if}\\n\\t\\t\\t\\t{#if !isFullPage}\\n\\t\\t\\t\\t\\t<EnterFullScreen on:click={() => (fullscreen = true)} display={hovering} />\\n\\t\\t\\t\\t{/if}\\n\\t\\t\\t</div>\\n\\t\\t{:else}\\n\\t\\t\\t<div class=\\"table-footer\\">\\n\\t\\t\\t\\t{#if downloadable}\\n\\t\\t\\t\\t\\t<DownloadData class=\\"download-button\\" data={tableData} {queryID} display={hovering} />\\n\\t\\t\\t\\t{/if}\\n\\t\\t\\t\\t{#if !isFullPage}\\n\\t\\t\\t\\t\\t<EnterFullScreen on:click={() => (fullscreen = true)} display={hovering} />\\n\\t\\t\\t\\t{/if}\\n\\t\\t\\t</div>\\n\\t\\t{/if}\\n\\t</div>\\n\\n\\t{#if generateMarkdown}\\n\\t\\t{#if queryID}\\n\\t\\t\\t<CodeBlock>\\n\\t\\t\\t\\t{\`<DataTable data={\${queryID}}>\`}\\n\\t\\t\\t\\t<br />\\n\\t\\t\\t\\t{#each Object.keys(data[0]) as column}\\n\\t\\t\\t\\t\\t{\`   <Column id=\${column.includes(' ') ? \`'\${column}'\` : column}/>\`}\\n\\t\\t\\t\\t\\t<br />\\n\\t\\t\\t\\t{/each}\\n\\t\\t\\t\\t{\`</DataTable>\`}\\n\\t\\t\\t</CodeBlock>\\n\\t\\t{/if}\\n\\t{/if}\\n{:else}\\n\\t<ErrorChart {error} title=\\"Data Table\\" />\\n{/if}\\n\\n<style>\\n\\t.table-container {\\n\\t\\tfont-size: 9.5pt;\\n\\t}\\n\\n\\t.scrollbox {\\n\\t\\twidth: 100%;\\n\\t\\toverflow-x: auto;\\n\\t\\tscrollbar-width: thin;\\n\\t}\\n\\n\\ttable {\\n\\t\\tdisplay: table;\\n\\t\\twidth: 100%;\\n\\t\\tborder-collapse: collapse;\\n\\t\\tfont-variant-numeric: tabular-nums;\\n\\t}\\n\\n\\t.page-changer {\\n\\t\\tpadding: 0;\\n\\t\\theight: 1.1em;\\n\\t\\twidth: 1.1em;\\n\\t}\\n\\n\\t.pagination {\\n\\t\\t--tw-text-opacity: 1;\\n\\t\\tcolor: hsl(var(--twc-base-content-muted) / var(--twc-base-content-muted-opacity, var(--tw-text-opacity)));\\n\\t\\tfont-size: 12px;\\n\\t\\tdisplay: flex;\\n\\t\\talign-items: center;\\n\\t\\tjustify-content: flex-end;\\n\\t\\theight: 2em;\\n\\t\\tfont-family: var(--ui-font-family);\\n\\t\\t-webkit-user-select: none;\\n\\t\\t-moz-user-select: none;\\n\\t\\tuser-select: none;\\n\\t\\ttext-align: right;\\n\\t\\tmargin-top: 0.5em;\\n\\t\\tmargin-bottom: 1.8em;\\n\\t\\tfont-variant-numeric: tabular-nums;\\n}\\n\\n\\t.page-labels {\\n\\t\\tdisplay: flex;\\n\\t\\tjustify-content: flex-start;\\n\\t\\talign-items: center;\\n\\t\\tgap: 3px;\\n\\t}\\n\\n\\t.page-changer {\\n\\t\\tfont-size: 20px;\\n\\t\\tbackground: none;\\n\\t\\tborder: none;\\n\\t\\tcursor: pointer;\\n\\t\\ttransition: color 200ms;\\n\\t}\\n\\n\\t.page-changer.hovering {\\n\\t\\tcolor: hsl(var(--twc-primary) / var(--twc-primary-opacity, 1));\\n\\t\\ttransition: color 200ms;\\n\\t}\\n\\n\\t.page-changer:disabled {\\n\\t\\tcolor: hsl(var(--twc-base-content-muted) / 0.25);\\n\\t\\tcursor: auto;\\n\\t\\t-webkit-user-select: none;\\n\\t\\t-moz-user-select: none;\\n\\t\\tuser-select: none;\\n\\t\\ttransition: color 200ms;\\n}\\n\\n\\t.page-icon {\\n\\t\\theight: 1em;\\n\\t\\twidth: 1em;\\n\\t}\\n\\n\\t.page-input {\\n\\t\\t--tw-bg-opacity: 1;\\n\\t\\tbackground-color: hsl(var(--twc-base-200) / var(--twc-base-200-opacity, var(--tw-bg-opacity)));\\n\\t\\t--tw-text-opacity: 1;\\n\\t\\tcolor: hsl(var(--twc-base-content-muted) / var(--twc-base-content-muted-opacity, var(--tw-text-opacity)));\\n\\t\\tbox-sizing: content-box;\\n\\t\\ttext-align: center;\\n\\t\\tpadding: 0.25em 0.5em;\\n\\t\\tmargin: 0;\\n\\t\\tborder: 1px solid transparent;\\n\\t\\tborder-radius: 4px;\\n\\t\\tfont-size: 12px;\\n}\\n\\n\\t.table-footer {\\n\\t\\tdisplay: flex;\\n\\t\\tjustify-content: flex-end;\\n\\t\\talign-items: center;\\n\\t\\tmargin: 10px 0px;\\n\\t\\tfont-size: 12px;\\n\\t\\theight: 9px;\\n\\t}\\n\\n\\t/* Remove number buttons in input box*/\\n\\t.page-input::-webkit-outer-spin-button,\\n\\t.page-input::-webkit-inner-spin-button {\\n\\t\\t-webkit-appearance: none;\\n\\t\\tmargin: 0;\\n\\t}\\n\\n\\t/* Firefox */\\n\\t.page-input[type='number'] {\\n\\t\\t-moz-appearance: textfield;\\n\\t\\t-webkit-appearance: textfield;\\n\\t\\tappearance: textfield;\\n\\t}\\n\\n\\t.page-input.hovering {\\n\\t\\tborder: 1px solid var(--base-300);\\n\\t}\\n\\n\\t.page-input.error {\\n\\t\\tborder: 1px solid var(--negative);\\n\\t}\\n\\n\\t.page-input::-moz-placeholder {\\n\\t\\t--tw-text-opacity: 1;\\n\\t\\tcolor: hsl(var(--twc-base-content-muted) / var(--twc-base-content-muted-opacity, var(--tw-text-opacity)));\\n}\\n\\n\\t.page-input::placeholder {\\n\\t\\t--tw-text-opacity: 1;\\n\\t\\tcolor: hsl(var(--twc-base-content-muted) / var(--twc-base-content-muted-opacity, var(--tw-text-opacity)));\\n}\\n\\n\\tbutton:enabled > .page-icon:hover {\\n\\t\\tfilter: brightness(0.8);\\n\\t}\\n\\n\\t*:focus {\\n\\t\\toutline: none;\\n\\t}\\n\\n\\t::-moz-placeholder {\\n\\t\\t/* Chrome, Firefox, Opera, Safari 10.1+ */\\n\\t\\t--tw-text-opacity: 1;\\n\\t\\tcolor: hsl(var(--twc-base-content-muted) / var(--twc-base-content-muted-opacity, var(--tw-text-opacity)));\\n\\t\\topacity: 1; /* Firefox */\\n\\t}\\n\\n\\t::placeholder {\\n\\t\\t/* Chrome, Firefox, Opera, Safari 10.1+ */\\n\\t\\t--tw-text-opacity: 1;\\n\\t\\tcolor: hsl(var(--twc-base-content-muted) / var(--twc-base-content-muted-opacity, var(--tw-text-opacity)));\\n\\t\\topacity: 1; /* Firefox */\\n\\t}\\n\\n\\t:-ms-input-placeholder {\\n\\t\\t/* Internet Explorer 10-11 */\\n\\t\\t--tw-text-opacity: 1;\\n\\t\\tcolor: hsl(var(--twc-base-content-muted) / var(--twc-base-content-muted-opacity, var(--tw-text-opacity)));\\n\\t}\\n\\n\\t::-ms-input-placeholder {\\n\\t\\t/* Microsoft Edge */\\n\\t\\t--tw-text-opacity: 1;\\n\\t\\tcolor: hsl(var(--twc-base-content-muted) / var(--twc-base-content-muted-opacity, var(--tw-text-opacity)));\\n\\t}\\n\\n\\t.noresults {\\n\\t\\tdisplay: none;\\n\\t\\t--tw-text-opacity: 1;\\n\\t\\tcolor: hsl(var(--twc-base-content-muted) / var(--twc-base-content-muted-opacity, var(--tw-text-opacity)));\\n\\t\\ttext-align: center;\\n\\t\\tmargin-top: 5px;\\n\\t}\\n\\n\\t.shownoresults {\\n\\t\\tdisplay: block;\\n\\t}\\n\\n\\t.print-page-count {\\n\\t\\tdisplay: none;\\n\\t}\\n\\n\\t@media (max-width: 600px) {\\n\\t\\t.page-changer {\\n\\t\\t\\theight: 1.2em;\\n\\t\\t\\twidth: 1.2em;\\n\\t\\t}\\n\\n\\t\\t.page-icon {\\n\\t\\t\\theight: 1.2em;\\n\\t\\t\\twidth: 1.2em;\\n\\t\\t}\\n\\n\\t\\t.page-count {\\n\\t\\t\\tfont-size: 1.1em;\\n\\t\\t}\\n\\n\\t\\t.page-input {\\n\\t\\t\\tfont-size: 1.1em;\\n\\t\\t}\\n\\t}\\n\\n\\t@media print {\\n\\t\\t.pagination {\\n\\t\\t\\t-moz-column-break-inside: avoid;\\n\\t\\t\\tbreak-inside: avoid;\\n\\t\\t}\\n\\n\\t\\t.page-changer {\\n\\t\\t\\tdisplay: none;\\n\\t\\t}\\n\\n\\t\\t.page-count {\\n\\t\\t\\tdisplay: none;\\n\\t\\t}\\n\\n\\t\\t.print-page-count {\\n\\t\\t\\tdisplay: inline;\\n\\t\\t}\\n\\t}</style>\\n"],"names":[],"mappings":"AA4wBC,4CAAiB,CAChB,SAAS,CAAE,KACZ,CAEA,sCAAW,CACV,KAAK,CAAE,IAAI,CACX,UAAU,CAAE,IAAI,CAChB,eAAe,CAAE,IAClB,CAEA,iCAAM,CACL,OAAO,CAAE,KAAK,CACd,KAAK,CAAE,IAAI,CACX,eAAe,CAAE,QAAQ,CACzB,oBAAoB,CAAE,YACvB,CAEA,yCAAc,CACb,OAAO,CAAE,CAAC,CACV,MAAM,CAAE,KAAK,CACb,KAAK,CAAE,KACR,CAEA,uCAAY,CACX,iBAAiB,CAAE,CAAC,CACpB,KAAK,CAAE,IAAI,IAAI,wBAAwB,CAAC,CAAC,CAAC,CAAC,IAAI,gCAAgC,CAAC,uBAAuB,CAAC,CAAC,CACzG,SAAS,CAAE,IAAI,CACf,OAAO,CAAE,IAAI,CACb,WAAW,CAAE,MAAM,CACnB,eAAe,CAAE,QAAQ,CACzB,MAAM,CAAE,GAAG,CACX,WAAW,CAAE,IAAI,gBAAgB,CAAC,CAClC,mBAAmB,CAAE,IAAI,CACzB,gBAAgB,CAAE,IAAI,CACtB,WAAW,CAAE,IAAI,CACjB,UAAU,CAAE,KAAK,CACjB,UAAU,CAAE,KAAK,CACjB,aAAa,CAAE,KAAK,CACpB,oBAAoB,CAAE,YACxB,CAEC,wCAAa,CACZ,OAAO,CAAE,IAAI,CACb,eAAe,CAAE,UAAU,CAC3B,WAAW,CAAE,MAAM,CACnB,GAAG,CAAE,GACN,CAEA,yCAAc,CACb,SAAS,CAAE,IAAI,CACf,UAAU,CAAE,IAAI,CAChB,MAAM,CAAE,IAAI,CACZ,MAAM,CAAE,OAAO,CACf,UAAU,CAAE,KAAK,CAAC,KACnB,CAEA,aAAa,qCAAU,CACtB,KAAK,CAAE,IAAI,IAAI,aAAa,CAAC,CAAC,CAAC,CAAC,IAAI,qBAAqB,CAAC,EAAE,CAAC,CAAC,CAC9D,UAAU,CAAE,KAAK,CAAC,KACnB,CAEA,yCAAa,SAAU,CACtB,KAAK,CAAE,IAAI,IAAI,wBAAwB,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAChD,MAAM,CAAE,IAAI,CACZ,mBAAmB,CAAE,IAAI,CACzB,gBAAgB,CAAE,IAAI,CACtB,WAAW,CAAE,IAAI,CACjB,UAAU,CAAE,KAAK,CAAC,KACpB,CAEC,sCAAW,CACV,MAAM,CAAE,GAAG,CACX,KAAK,CAAE,GACR,CAEA,uCAAY,CACX,eAAe,CAAE,CAAC,CAClB,gBAAgB,CAAE,IAAI,IAAI,cAAc,CAAC,CAAC,CAAC,CAAC,IAAI,sBAAsB,CAAC,qBAAqB,CAAC,CAAC,CAC9F,iBAAiB,CAAE,CAAC,CACpB,KAAK,CAAE,IAAI,IAAI,wBAAwB,CAAC,CAAC,CAAC,CAAC,IAAI,gCAAgC,CAAC,uBAAuB,CAAC,CAAC,CACzG,UAAU,CAAE,WAAW,CACvB,UAAU,CAAE,MAAM,CAClB,OAAO,CAAE,MAAM,CAAC,KAAK,CACrB,MAAM,CAAE,CAAC,CACT,MAAM,CAAE,GAAG,CAAC,KAAK,CAAC,WAAW,CAC7B,aAAa,CAAE,GAAG,CAClB,SAAS,CAAE,IACb,CAEC,yCAAc,CACb,OAAO,CAAE,IAAI,CACb,eAAe,CAAE,QAAQ,CACzB,WAAW,CAAE,MAAM,CACnB,MAAM,CAAE,IAAI,CAAC,GAAG,CAChB,SAAS,CAAE,IAAI,CACf,MAAM,CAAE,GACT,CAGA,uCAAW,2BAA2B,CACtC,uCAAW,2BAA4B,CACtC,kBAAkB,CAAE,IAAI,CACxB,MAAM,CAAE,CACT,CAGA,WAAW,CAAC,IAAI,CAAC,QAAQ,6BAAE,CAC1B,eAAe,CAAE,SAAS,CAC1B,kBAAkB,CAAE,SAAS,CAC7B,UAAU,CAAE,SACb,CAEA,WAAW,qCAAU,CACpB,MAAM,CAAE,GAAG,CAAC,KAAK,CAAC,IAAI,UAAU,CACjC,CAEA,WAAW,kCAAO,CACjB,MAAM,CAAE,GAAG,CAAC,KAAK,CAAC,IAAI,UAAU,CACjC,CAEA,uCAAW,kBAAmB,CAC7B,iBAAiB,CAAE,CAAC,CACpB,KAAK,CAAE,IAAI,IAAI,wBAAwB,CAAC,CAAC,CAAC,CAAC,IAAI,gCAAgC,CAAC,uBAAuB,CAAC,CAC1G,CAEC,uCAAW,aAAc,CACxB,iBAAiB,CAAE,CAAC,CACpB,KAAK,CAAE,IAAI,IAAI,wBAAwB,CAAC,CAAC,CAAC,CAAC,IAAI,gCAAgC,CAAC,uBAAuB,CAAC,CAC1G,CAEC,oBAAM,QAAQ,CAAG,wBAAU,MAAO,CACjC,MAAM,CAAE,WAAW,GAAG,CACvB,CAEA,4BAAC,MAAO,CACP,OAAO,CAAE,IACV,6BAEA,kBAAmB,CAElB,iBAAiB,CAAE,CAAC,CACpB,KAAK,CAAE,IAAI,IAAI,wBAAwB,CAAC,CAAC,CAAC,CAAC,IAAI,gCAAgC,CAAC,uBAAuB,CAAC,CAAC,CACzG,OAAO,CAAE,CACV,6BAEA,aAAc,CAEb,iBAAiB,CAAE,CAAC,CACpB,KAAK,CAAE,IAAI,IAAI,wBAAwB,CAAC,CAAC,CAAC,CAAC,IAAI,gCAAgC,CAAC,uBAAuB,CAAC,CAAC,CACzG,OAAO,CAAE,CACV,6BAEA,sBAAuB,CAEtB,iBAAiB,CAAE,CAAC,CACpB,KAAK,CAAE,IAAI,IAAI,wBAAwB,CAAC,CAAC,CAAC,CAAC,IAAI,gCAAgC,CAAC,uBAAuB,CAAC,CACzG,6BAEA,uBAAwB,CAEvB,iBAAiB,CAAE,CAAC,CACpB,KAAK,CAAE,IAAI,IAAI,wBAAwB,CAAC,CAAC,CAAC,CAAC,IAAI,gCAAgC,CAAC,uBAAuB,CAAC,CACzG,CAEA,sCAAW,CACV,OAAO,CAAE,IAAI,CACb,iBAAiB,CAAE,CAAC,CACpB,KAAK,CAAE,IAAI,IAAI,wBAAwB,CAAC,CAAC,CAAC,CAAC,IAAI,gCAAgC,CAAC,uBAAuB,CAAC,CAAC,CACzG,UAAU,CAAE,MAAM,CAClB,UAAU,CAAE,GACb,CAEA,0CAAe,CACd,OAAO,CAAE,KACV,CAEA,6CAAkB,CACjB,OAAO,CAAE,IACV,CAEA,MAAO,YAAY,KAAK,CAAE,CACzB,yCAAc,CACb,MAAM,CAAE,KAAK,CACb,KAAK,CAAE,KACR,CAEA,sCAAW,CACV,MAAM,CAAE,KAAK,CACb,KAAK,CAAE,KACR,CAEA,uCAAY,CACX,SAAS,CAAE,KACZ,CAEA,uCAAY,CACX,SAAS,CAAE,KACZ,CACD,CAEA,OAAO,KAAM,CACZ,uCAAY,CACX,wBAAwB,CAAE,KAAK,CAC/B,YAAY,CAAE,KACf,CAEA,yCAAc,CACb,OAAO,CAAE,IACV,CAEA,uCAAY,CACX,OAAO,CAAE,IACV,CAEA,6CAAkB,CACjB,OAAO,CAAE,MACV,CACD"}`};let Hn="1.5em",Xn="1em",Zn="0em";function Jn(n,e){return n.map(t=>{const h={};for(const r of e)h[r]=t[r];return h})}const we=U((n,e,t,h)=>{let r,A,l,d,u,m,p,g,s,a,w,b,S,y,x,I,st,v,P=$,o=()=>(P(),P=R(g,i=>v=i),g),Vt,_=$,It=()=>(_(),_=R(m,i=>Vt=i),m),k,T=$,Rt=()=>(T(),T=R(p,i=>k=i),p),ct,ht=$,dt=()=>(ht(),ht=R(r,i=>ct=i),r),L,et=$,Ut=()=>(et(),et=R(A,i=>L=i),A),M,Kt=$,Et=()=>(Kt(),Kt=R(l,i=>M=i),l),Yt,Pt=$,$t=()=>(Pt(),Pt=R(d,i=>Yt=i),d),Ht,jt=$,te=()=>(jt(),jt=R(u,i=>Ht=i),u);const{resolveColor:nt}=ae();let St=un({});st=R(St,i=>I=i),tn(Le,St);let{data:B}=e,{queryID:ut=void 0}=e,{rows:K=10}=e,{rowNumbers:F=!1}=e,{sort:gt=void 0}=e,Y,wt,rt,D={},{groupBy:N=void 0}=e,{groupsOpen:H=!0}=e,{groupType:X="accordion"}=e,{accordionRowColor:Lt=void 0}=e,{groupNamePosition:Wt="middle"}=e;X==="section"&&(F=!1);let{subtotals:lt=!1}=e,{subtotalRowColor:Qt=void 0}=e,{subtotalFontColor:Ct=void 0}=e,kt={},qt,Mt=!1,{generateMarkdown:Z=!1}=e,{search:W=!1}=e,{sortable:mt=!0}=e,{downloadable:Q=!0}=e,{totalRow:Tt=!1}=e,{totalRowColor:E=void 0}=e,{totalFontColor:bt=void 0}=e,{isFullPage:Dt=!1}=e,{link:pt=void 0}=e,{showLinkCol:Xt=!1}=e,ee,ce=!1;St.update(i=>(ce=!1,{...i,data:B,columns:[]}));let{rowShading:zt=!1}=e,{rowLines:Ot=!0}=e,{wrapTitles:Zt=!1}=e,{headerColor:de=void 0}=e,{headerFontColor:ue=void 0}=e,{formatColumnTitles:Jt=!0}=e,{backgroundColor:Ce=void 0}=e,{compact:vt=void 0}=e,q,qe=[N];St.update(i=>({...i,priorityColumns:qe}));let ft=0,be=null,Gt="",J,re,me,pe,ne=J,_t,it=1,ye,xe=0,V={},Be=[],Ie=!1,Ee;e.data===void 0&&t.data&&B!==void 0&&t.data(B),e.queryID===void 0&&t.queryID&&ut!==void 0&&t.queryID(ut),e.rows===void 0&&t.rows&&K!==void 0&&t.rows(K),e.rowNumbers===void 0&&t.rowNumbers&&F!==void 0&&t.rowNumbers(F),e.sort===void 0&&t.sort&&gt!==void 0&&t.sort(gt),e.groupBy===void 0&&t.groupBy&&N!==void 0&&t.groupBy(N),e.groupsOpen===void 0&&t.groupsOpen&&H!==void 0&&t.groupsOpen(H),e.groupType===void 0&&t.groupType&&X!==void 0&&t.groupType(X),e.accordionRowColor===void 0&&t.accordionRowColor&&Lt!==void 0&&t.accordionRowColor(Lt),e.groupNamePosition===void 0&&t.groupNamePosition&&Wt!==void 0&&t.groupNamePosition(Wt),e.subtotals===void 0&&t.subtotals&&lt!==void 0&&t.subtotals(lt),e.subtotalRowColor===void 0&&t.subtotalRowColor&&Qt!==void 0&&t.subtotalRowColor(Qt),e.subtotalFontColor===void 0&&t.subtotalFontColor&&Ct!==void 0&&t.subtotalFontColor(Ct),e.generateMarkdown===void 0&&t.generateMarkdown&&Z!==void 0&&t.generateMarkdown(Z),e.search===void 0&&t.search&&W!==void 0&&t.search(W),e.sortable===void 0&&t.sortable&&mt!==void 0&&t.sortable(mt),e.downloadable===void 0&&t.downloadable&&Q!==void 0&&t.downloadable(Q),e.totalRow===void 0&&t.totalRow&&Tt!==void 0&&t.totalRow(Tt),e.totalRowColor===void 0&&t.totalRowColor&&E!==void 0&&t.totalRowColor(E),e.totalFontColor===void 0&&t.totalFontColor&&bt!==void 0&&t.totalFontColor(bt),e.isFullPage===void 0&&t.isFullPage&&Dt!==void 0&&t.isFullPage(Dt),e.link===void 0&&t.link&&pt!==void 0&&t.link(pt),e.showLinkCol===void 0&&t.showLinkCol&&Xt!==void 0&&t.showLinkCol(Xt),e.rowShading===void 0&&t.rowShading&&zt!==void 0&&t.rowShading(zt),e.rowLines===void 0&&t.rowLines&&Ot!==void 0&&t.rowLines(Ot),e.wrapTitles===void 0&&t.wrapTitles&&Zt!==void 0&&t.wrapTitles(Zt),e.headerColor===void 0&&t.headerColor&&de!==void 0&&t.headerColor(de),e.headerFontColor===void 0&&t.headerFontColor&&ue!==void 0&&t.headerFontColor(ue),e.formatColumnTitles===void 0&&t.formatColumnTitles&&Jt!==void 0&&t.formatColumnTitles(Jt),e.backgroundColor===void 0&&t.backgroundColor&&Ce!==void 0&&t.backgroundColor(Ce),e.compact===void 0&&t.compact&&vt!==void 0&&t.compact(vt),n.css.add(Yn);let le,Se,Ve=n.head;do{if(le=!0,n.head=Ve,K=Number.parseInt(K),F=F==="true"||F===!0,gt){const[i,f]=gt.split(" ");Y=i,rt=f,wt=f!=="desc",D=Y?{col:Y,ascending:wt}:{col:null,ascending:null}}H=H==="true"||H===!0,dt(r=nt(Lt)),lt=lt==="true"||lt===!0,Ut(A=nt(Qt)),Et(l=nt(Ct)),Xt=Xt==="true"||Xt===!0;try{if(ee=void 0,ln(B),q=An(B,"array"),Y){if(!q.map(f=>f.id).includes(Y))throw Error(`${Y} is not a column in the dataset. sort should contain one column name and optionally a direction (asc or desc). E.g., sort=my_column or sort="my_column desc"`);if(rt&&!["asc","desc"].includes(rt))throw Error(`${rt} is not a valid sort direction. Please use asc or desc`)}const i=q.filter(f=>f.type==="date"&&!(B[0]?.[f.id]instanceof Date)).map(f=>f.id);for(let f=0;f<i.length;f++)B=sn(B,i[f]);if(pt){const f=q.findIndex(G=>G.id===pt);f!==-1&&!Xt&&q.splice(f,1)}}catch(i){ee=i.message}if(qt=B.length>K&&!N,Z=Z==="true"||Z===!0,W=W==="true"||W===!0,mt=mt==="true"||mt===!0,Q=Q==="true"||Q===!0,Tt=Tt==="true"||Tt===!0,$t(d=nt(E)),te(u=nt(bt)),zt=zt==="true"||zt===!0,Ot=Ot==="true"||Ot===!0,Zt=Zt==="true"||Zt===!0,It(m=nt(de)),Rt(p=nt(ue)),Jt=Jt==="true"||Jt===!0,o(g=nt(Ce)),s=Gn(I.columns.map(i=>i.id),I.priorityColumns),a=[...I.columns].sort((i,f)=>s.indexOf(i.id)-s.indexOf(f.id)),J=B,Ae.isQuery(B)&&W&&(re=en(Ae.createReactive({loadGracePeriod:1e3,callback:i=>{J=i},execFn:on},B.opts,B))),b=i=>{const f=i.col,G=i.ascending?1:-1,z=j=>j==null||typeof j=="number"&&isNaN(j),Ft=(j,yt)=>z(j[f])&&!z(yt[f])||j[f]<yt[f]?-1*G:z(yt[f])&&!z(j[f])||j[f]>yt[f]?1*G:0;if(N){const j={};for(const yt of Object.keys(V))j[yt]=[...V[yt]].sort(Ft);V=j}else J=[...J].sort(Ft)},y=i=>{ft=i*K,ye=ft+K,it=Math.ceil(ye/K),pe=J.length,ne=J.slice(ft,ft+K)},re&&re(Gt?B.search(Gt,I.columns.map(i=>i.id),Gt.length===1?.5:Gt.length>=6?.9:.8):B,B.opts),W&&!Ae.isQuery(B)&&nn.add({status:"warning",title:"Search Failed",message:"Please use a query instead."},5e3),w=i=>{D.col===i?D.ascending=!D.ascending:(D.col=i,D.ascending=!0),b(D)},!ee){N&&!ce&&(V=B.reduce((f,G)=>{const z=G[N];return f[z]||(f[z]=[]),f[z].push(G),f},{}),ce=!0),Be=Object.keys(V).reduce((f,G)=>{f[G]={};for(const z of I.columns){const Ft=z.id,j=q.find(Xe=>Xe.id===Ft)?.type,yt=z.totalAgg,Ye=z.weightCol,He=V[G];f[G][Ft]=oe(He,Ft,yt,j,Ye)}return f},{});const i=Object.keys(kt);for(const f of Object.keys(V))i.includes(f)||(kt[f]=H)}N&&D.col?me=Object.entries(Be).sort((i,f)=>{const G=i[1][D.col],z=f[1][D.col];return D.col===N&&isNaN(N)?D.ascending?i[0].localeCompare(f[0]):f[0].localeCompare(i[0]):(G==null||isNaN(G))&&z!==void 0&&!isNaN(z)?-1*(D.ascending?1:-1):(z==null||isNaN(z))&&G!==void 0&&!isNaN(G)?1*(D.ascending?1:-1):G<z?-1*(D.ascending?1:-1):G>z?1*(D.ascending?1:-1):0}).map(i=>i[0]):me=Object.keys(V).sort(),B&&gt&&b(D),pe=J.length,it=Math.ceil((ft+K)/K),qt?(_t=Math.ceil(J.length/K),ne=J.slice(ft,ft+K),xe=ne.length,_t<it?y(_t-1):it<1&&y(0)):(it=1,ne=J),S=`${(it??1).toString().length}ch`,x=Jn(B,I.columns.map(i=>i.id)),Se=` ${!Dt&&Ee!==void 0?`${c(Dn,"Fullscreen").$$render(n,{search:W,open:Ie},{open:i=>{Ie=i,le=!1}},{default:()=>{let i=vt?17.5:23,f=45,G=24,z=W?G+f+234:f+234;return`    <div class="pt-4 svelte-ozf09l">${c(we,"svelte:self").$$render(n,Ne.assign({},e,{rows:1+Math.round((Ee-z)/i)},{isFullPage:!0}),{},{default:()=>`${tt(I.columns,Ft=>`${c(Fe,"Column").$$render(n,Ne.assign({},Ft),{},{})}`)}`})}</div>`}})}`:""} ${ee===void 0?`${h.default?h.default({}):`  ${tt(q,i=>`${c(Fe,"Column").$$render(n,{id:i.id},{},{})}`)} `} ${pt?`${c(ze,"InvisibleLinks").$$render(n,{data:B,link:pt},{},{})}`:""} ${tt(I.columns.filter(i=>i.contentType==="link"),i=>`${c(ze,"InvisibleLinks").$$render(n,{data:B,link:i.id},{},{})}`)} <div${O("data-testid",Dt?void 0:`DataTable-${B?.id??"no-id"}`,0)} role="none" class="table-container svelte-ozf09l"${At({"margin-top":Hn,"margin-bottom":Xn,"padding-bottom":Zn})}>${W?`${c(On,"SearchBar").$$render(n,{searchFunction:()=>{},value:Gt},{value:i=>{Gt=i,le=!1}},{})}`:""} <div class="scrollbox pretty-scrollbar svelte-ozf09l"${At({"background-color":v})}><table class="svelte-ozf09l">${c(Kn,"TableHeader").$$render(n,{rowNumbers:F,headerColor:Vt,headerFontColor:k,orderedColumns:a,columnSummary:q,compact:vt,sortable:mt,sortClick:w,formatColumnTitles:Jt,sortObj:D,wrapTitles:Zt,link:pt},{},{})} ${c(Ke,"QueryLoad").$$render(n,{data:J},{},{skeleton:()=>`<tr class="svelte-ozf09l"><td${O("colspan",J.columns.length,0)} class="h-32 svelte-ozf09l">${c(cn,"Skeleton").$$render(n,{},{},{})}</td></tr> `,default:()=>`${N&&V&&Gt===""?`${tt(me,i=>`${X==="accordion"?`${c(Wn,"GroupRow").$$render(n,{groupName:i,currentGroupData:V[i],toggled:kt[i],columnSummary:q,rowColor:ct,rowNumbers:F,subtotals:lt,compact:vt,orderedColumns:a},{},{})} ${kt[i]?`${c(fe,"TableRow").$$render(n,{displayedData:V[i],groupType:X,rowShading:zt,link:pt,rowNumbers:F,rowLines:Ot,compact:vt,index:ft,columnSummary:q,grouped:!0,groupColumn:N,orderedColumns:a},{},{})}`:""}`:`${X==="section"?`${c(fe,"TableRow").$$render(n,{groupColumn:N,groupType:X,rowSpan:V[i].length,displayedData:V[i],rowShading:zt,link:pt,rowNumbers:F,rowLines:Ot,compact:vt,index:ft,columnSummary:q,grouped:!0,groupNamePosition:Wt,orderedColumns:a},{},{})} ${lt?`${c(Rn,"SubtotalRow").$$render(n,{groupName:i,currentGroupData:V[i],columnSummary:q,rowColor:L,fontColor:M,groupType:X,groupBy:N,compact:vt,orderedColumns:a},{},{})}`:""}`:""}`}`)}`:`${c(fe,"TableRow").$$render(n,{displayedData:ne,rowShading:zt,link:pt,rowNumbers:F,rowLines:Ot,compact:vt,index:ft,columnSummary:q,orderedColumns:a},{},{})}`} ${Tt&&Gt===""?`${c(Nn,"TotalRow").$$render(n,{data:B,rowNumbers:F,columnSummary:q,rowColor:Yt,fontColor:Ht,groupType:X,compact:vt,orderedColumns:a},{},{})}`:""}`})}</table></div> <div class="${["noresults svelte-ozf09l",""].join(" ").trim()}" data-svelte-h="svelte-l3t0gi">No Results</div> ${qt&&_t>1?`<div class="pagination svelte-ozf09l"><div class="page-labels mr-auto svelte-ozf09l"><button aria-label="first-page" class="${["page-changer svelte-ozf09l",""].join(" ").trim()}" ${it===1?"disabled":""}><div class="page-icon flex items-center svelte-ozf09l">${c(ot,"Icon").$$render(n,{src:hn},{},{})}</div></button> <button aria-label="previous-page" class="${["page-changer svelte-ozf09l",""].join(" ").trim()}" ${it===1?"disabled":""}><div class="page-icon h-[0.83em] flex items-center svelte-ozf09l">${c(ot,"Icon").$$render(n,{src:gn,class:"h-[0.83em]"},{},{})}</div></button> <span class="page-count svelte-ozf09l">Page
						<input class="${["page-input svelte-ozf09l"," "+(be>_t?"error":"")].join(" ").trim()}" style="${"width: "+C(S,!0)+";"}" type="number"${O("placeholder",it,0)}${O("value",be,0)}>
						/
						<span class="page-count ml-1 svelte-ozf09l">${C(_t.toLocaleString())}</span></span> <span class="print-page-count svelte-ozf09l">${C(xe.toLocaleString())} of ${C(pe.toLocaleString())} records</span> <button aria-label="next-page" class="${["page-changer svelte-ozf09l",""].join(" ").trim()}" ${it===_t?"disabled":""}><div class="page-icon h-[0.83em] flex items-center svelte-ozf09l">${c(ot,"Icon").$$render(n,{src:We,class:"h-[0.83em]"},{},{})}</div></button> <button aria-label="last-page" class="${["page-changer svelte-ozf09l",""].join(" ").trim()}" ${it===_t?"disabled":""}><div class="page-icon flex items-center svelte-ozf09l">${c(ot,"Icon").$$render(n,{src:wn},{},{})}</div></button></div> ${Q?`${c(ke,"DownloadData").$$render(n,{class:"download-button",data:x,queryID:ut,display:Mt},{},{})}`:""} ${Dt?"":`${c(_e,"EnterFullScreen").$$render(n,{display:Mt},{},{})}`}</div>`:`<div class="table-footer svelte-ozf09l">${Q?`${c(ke,"DownloadData").$$render(n,{class:"download-button",data:x,queryID:ut,display:Mt},{},{})}`:""} ${Dt?"":`${c(_e,"EnterFullScreen").$$render(n,{display:Mt},{},{})}`}</div>`}</div> ${Z?`${ut?`${c(Cn,"CodeBlock").$$render(n,{},{},{default:()=>`${C(`<DataTable data={${ut}}>`)} <br class="svelte-ozf09l"> ${tt(Object.keys(B[0]),i=>`${C(`   <Column id=${i.includes(" ")?`'${i}'`:i}/>`)} <br class="svelte-ozf09l">`)} ${C("</DataTable>")}`})}`:""}`:""}`:`${c(Pe,"ErrorChart").$$render(n,{error:ee,title:"Data Table"},{},{})}`}`}while(!le);return st(),P(),_(),T(),ht(),et(),Kt(),Pt(),jt(),Se}),{Object:Re}=je;let Ue="Data Table";const $n=U((n,e,t,h)=>{let r,A=rn(h),{data:l}=e;const d=Ae.isQuery(l)?l.hash:void 0;let u=l?.hash===d,{emptySet:m=void 0}=e,{emptyMessage:p=void 0}=e,g=l?.id;return e.data===void 0&&t.data&&l!==void 0&&t.data(l),e.emptySet===void 0&&t.emptySet&&m!==void 0&&t.emptySet(m),e.emptyMessage===void 0&&t.emptyMessage&&p!==void 0&&t.emptyMessage(p),u=l?.hash===d,r=Object.fromEntries(Object.entries(e).filter(([,s])=>s!==void 0)),` ${c(Ke,"QueryLoad").$$render(n,{data:l},{},{error:({loaded:s})=>`${c(Pe,"ErrorChart").$$render(n,{slot:"error",title:Ue,error:s.error.message},{},{})}`,empty:()=>`${c(dn,"EmptyChart").$$render(n,{slot:"empty",emptyMessage:p,emptySet:m,chartType:Ue,isInitial:u},{},{})}`,default:({loaded:s})=>` ${A.default?`${c(we,"DataTable").$$render(n,Re.assign({},r,{data:s},{queryID:g}),{},{default:()=>`${h.default?h.default({}):""}`})}`:`${c(we,"DataTable").$$render(n,Re.assign({},r,{data:s},{queryID:g}),{},{})}`}`})}`}),to={code:`section.svelte-1bw0fbe .cm-editor{min-height:8rem;border-radius:0.25rem
}`,map:`{"version":3,"file":"SqlConsole.svelte","sources":["SqlConsole.svelte"],"sourcesContent":["<script context=\\"module\\">\\n\\texport const evidenceInclude = true;\\n<\/script>\\n\\n<script>\\n\\t/** @typedef {import('./sqlConsole.action.js').SqlConsoleArgs} SqlConsoleArgs */\\n\\timport { sqlConsole, buildAutoCompletes } from './sqlConsole.action.js';\\n\\timport { slide } from 'svelte/transition';\\n\\timport { onMount } from 'svelte';\\n\\n\\timport { Button } from '../../atoms/button';\\n\\timport DataTable from '../../unsorted/viz/table/DataTable.svelte';\\n\\n\\timport { Eye, EyeOff, PlayerPlay } from '@evidence-dev/component-utilities/icons';\\n\\timport { buildQuery } from '@evidence-dev/component-utilities/buildQuery';\\n\\timport { getThemeStores } from '../../themes/themes.js';\\n\\n\\t/** @type {boolean} */\\n\\texport let hideErrors = false;\\n\\t/** @type {string} */\\n\\texport let initialQuery = \\"select 'ABC' as category, 123 as num, 26400000 as sales_usd\\";\\n\\t/** @type {boolean} */\\n\\texport let showResults = true;\\n\\t/** @type {boolean} */\\n\\texport let disabled = false;\\n\\n\\t/** @type {string} */\\n\\tlet currentQuery = initialQuery;\\n\\n\\t/** @type {string} */\\n\\tlet editorQuery = currentQuery;\\n\\n\\t/*\\n\\t - Try to fix autocomplete\\n\\t\\t - non-namespaced?\\n\\t\\t- keyword updates\\n\\t */\\n\\n\\t/** @type {import(\\"@evidence-dev/sdk/usql\\").Query} */\\n\\texport let data = buildQuery(currentQuery);\\n\\n\\t$: if (currentQuery) {\\n\\t\\tdata = buildQuery(currentQuery);\\n\\t\\tdata.fetch();\\n\\t}\\n\\n\\t/** @type {HTMLElement | undefined} */\\n\\tlet editor;\\n\\t/** @type {SqlConsoleArgs | undefined} */\\n\\tlet consoleArgs;\\n\\n\\t$: if (consoleArgs) consoleArgs.disabled = disabled;\\n\\tonMount(\\n\\t\\t/** @returns {Promise<never>} */\\n\\t\\tasync () => {\\n\\t\\t\\tif (data) data.fetch(); // we actually don't really care about this\\n\\n\\t\\t\\tconsoleArgs = {\\n\\t\\t\\t\\tinitialState: initialQuery,\\n\\t\\t\\t\\tdisabled: disabled,\\n\\t\\t\\t\\tschema: await buildAutoCompletes(),\\n\\t\\t\\t\\tonChange: (v) => {\\n\\t\\t\\t\\t\\tif (!v.docChanged) return;\\n\\t\\t\\t\\t\\tif (editorQuery.trim() === v.state.doc.toString().trim()) return;\\n\\t\\t\\t\\t\\teditorQuery = v.state.doc.toString();\\n\\t\\t\\t\\t},\\n\\t\\t\\t\\tonSubmit: () => {\\n\\t\\t\\t\\t\\tcurrentQuery = editorQuery.trim();\\n\\t\\t\\t\\t\\tif (currentQuery.endsWith(';'))\\n\\t\\t\\t\\t\\t\\tcurrentQuery = currentQuery.substring(0, currentQuery.length - 1);\\n\\t\\t\\t\\t\\tshowResults = true;\\n\\t\\t\\t\\t\\treturn true;\\n\\t\\t\\t\\t}\\n\\t\\t\\t};\\n\\t\\t}\\n\\t);\\n\\n\\tconst { theme } = getThemeStores();\\n<\/script>\\n\\n<h1 class=\\"markdown\\">SQL Console</h1>\\n<section\\n\\tclass=\\"px-0 py-2 flex flex-col gap-2 min-h-[8rem]\\"\\n\\ton:click={() => editor?.focus()}\\n\\ton:keydown={(e) => e.key === 'Enter' && editor?.focus()}\\n\\trole=\\"none\\"\\n>\\n\\t<div\\n\\t\\tbind:this={editor}\\n\\t\\tclass=\\"w-full relative rounded border border-base-300 min-h-[8rem] cursor-text\\"\\n\\t\\tuse:sqlConsole={{\\n\\t\\t\\t...consoleArgs,\\n\\t\\t\\ttheme: $theme\\n\\t\\t}}\\n\\t>\\n\\t\\t{#if !disabled}\\n\\t\\t\\t<div class=\\"absolute bottom-2 right-2 z-10 flex gap-2\\">\\n\\t\\t\\t\\t<Button\\n\\t\\t\\t\\t\\tsize=\\"sm\\"\\n\\t\\t\\t\\t\\toutline\\n\\t\\t\\t\\t\\ticon={showResults ? EyeOff : Eye}\\n\\t\\t\\t\\t\\ton:click={() => (showResults = !showResults)}\\n\\t\\t\\t\\t>\\n\\t\\t\\t\\t\\t{#if showResults}\\n\\t\\t\\t\\t\\t\\tHide Results\\n\\t\\t\\t\\t\\t{:else}\\n\\t\\t\\t\\t\\t\\tShow Results\\n\\t\\t\\t\\t\\t{/if}\\n\\t\\t\\t\\t</Button>\\n\\t\\t\\t\\t<Button\\n\\t\\t\\t\\t\\tsize=\\"sm\\"\\n\\t\\t\\t\\t\\tvariant=\\"positive\\"\\n\\t\\t\\t\\t\\toutline\\n\\t\\t\\t\\t\\ticon={PlayerPlay}\\n\\t\\t\\t\\t\\ton:click={() => {\\n\\t\\t\\t\\t\\t\\tcurrentQuery = editorQuery;\\n\\t\\t\\t\\t\\t\\tshowResults = true;\\n\\t\\t\\t\\t\\t}}\\n\\t\\t\\t\\t\\t>Submit\\n\\t\\t\\t\\t</Button>\\n\\t\\t\\t</div>\\n\\t\\t{/if}\\n\\t</div>\\n\\n\\t{#if $data.error && !hideErrors && Boolean(currentQuery)}\\n\\t\\t<pre class=\\"text-negative text-xs font-mono\\">{$data.error}</pre>\\n\\t{/if}\\n\\n\\t<!-- Result View -->\\n\\t{#if showResults}\\n\\t\\t<div transition:slide|local>\\n\\t\\t\\t<DataTable data={$data} />\\n\\t\\t</div>\\n\\t{/if}\\n</section>\\n\\n<style>\\n\\tsection :global(.cm-editor) {\\n    min-height: 8rem;\\n    border-radius: 0.25rem\\n}</style>\\n"],"names":[],"mappings":"AAyIC,sBAAO,CAAS,UAAY,CACzB,UAAU,CAAE,IAAI,CAChB,aAAa,CAAE;AACnB"}`},eo=U((n,e,t,h)=>{let r,A,l=$,d=()=>(l(),l=R(a,S=>A=S),a),{hideErrors:u=!1}=e,{initialQuery:m="select 'ABC' as category, 123 as num, 26400000 as sales_usd"}=e,{showResults:p=!0}=e,{disabled:g=!1}=e,s=m,{data:a=Me(s)}=e;d();let w;const{theme:b}=ae();return r=R(b,S=>S),e.hideErrors===void 0&&t.hideErrors&&u!==void 0&&t.hideErrors(u),e.initialQuery===void 0&&t.initialQuery&&m!==void 0&&t.initialQuery(m),e.showResults===void 0&&t.showResults&&p!==void 0&&t.showResults(p),e.disabled===void 0&&t.disabled&&g!==void 0&&t.disabled(g),e.data===void 0&&t.data&&a!==void 0&&t.data(a),n.css.add(to),s&&(d(a=Me(s)),a.fetch()),r(),l(),`<h1 class="markdown" data-svelte-h="svelte-7ylf69">SQL Console</h1> <section class="px-0 py-2 flex flex-col gap-2 min-h-[8rem] svelte-1bw0fbe" role="none"><div class="w-full relative rounded border border-base-300 min-h-[8rem] cursor-text"${O("this",w,0)}>${g?"":`<div class="absolute bottom-2 right-2 z-10 flex gap-2">${c(De,"Button").$$render(n,{size:"sm",outline:!0,icon:p?bn:yn},{},{default:()=>`${p?"Hide Results":"Show Results"}`})} ${c(De,"Button").$$render(n,{size:"sm",variant:"positive",outline:!0,icon:xn},{},{default:()=>"Submit"})}</div>`}</div> ${A.error&&!u&&s?`<pre class="text-negative text-xs font-mono">${C(A.error)}</pre>`:""}  ${p?`<div>${c($n,"DataTable").$$render(n,{data:A},{},{})}</div>`:""} </section>`}),Go=U((n,e,t,h)=>`${c(eo,"SqlConsole").$$render(n,{},{},{})}`);export{Go as default};
